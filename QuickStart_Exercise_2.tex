\begin{filecontents*}[overwrite]{\jobname.bib}


@case{thomas,
  partya = {Thomas},
  partyb = {Newton},
  icaseyear = {1827},
	}
@case{thomascar,
  reportyear = {1827},
  reportvolume = {2},
  reportseries = {Car \& P},
  reportpage = {606},
  crossref = {thomas},
}
@case{snail,
  partya = {Donoghue}, 
  partyb = {Stevenson},
  reportyear={1932},
%  volyearneeded = {true},
  reportseries = {AC},
  reportpage = {562},
  casenickname = {snail in the bottle},
  note = {HL},
	}



@case{caseausrec,
  partya = {Applicant S270/2019}, 
  partyb = {Minister for Immigration and Border Protection},
  caseyear = {2020},
  courtname = {HCA},
  casenumber = {32},
	}

@case{casecanrec,
  partya = {Michel}, 
  partyb = {Graydon},
  caseyear = {2020},
  courtname = {SCC},
  casenumber = {24},
	}


@case{caseukrec,
  partya = {Revenue and Customs}, 
  partyb = {Parry},
  caseyear = {2020},
  courtname = {UKSC},
  casenumber = {35},
	}

@case{caseusrec,
  partya = {Little}, 
  partyb = {Reclaim Idaho},
%  caseyear = {2020},
%  courtname = {UKSC},
%  casenumber = {35},
  courtname = {USSC (July 30, 2020)},
%  courtdivision = {},
%  courtlist = {},
%  courtjurisdiction = {},
  courtcasenumber ={No. 20A18},
	}

@case{caseus,
  partya = {Pittsburgh Melting Co},
  partyb = {Totten},
%  reportyear = {1918},
  reportvolume = {248},
  reportseries = {US},
  reportpage = {1},
  note = {1918},
}

@case{caseuslumber,
  partya = {United States},
  partyb = {Detroit Timber \& Lumber Company},
%  reportyear = {},
  reportvolume = {200},
  reportseries = {US},
  reportpage = {321},
  note = {1906},
}

%=======
@case{caseaus,
  partya = {Royal Botanic Gardens and Domain Trust}, 
  partyb = {South Sydney City Council},
  caseyear = {2002},
  courtname = {HCA},
  casenumber = {5},
  reportyear = {2002},
%  volyearneeded = {true},
  reportvolume = {186},
  reportseries = {ALR},
  reportpage = {289},
	}

@case{casecan,
  partya = {Babcock}, 
  partyb = {Canada (Attorney General)},
  caseyear = {2002},
  courtname = {SCC},
  casenumber = {57},
  reportyear = {2002},
  volyearneeded = {true},
  reportvolume = {3},
  reportseries = {SCR},
  reportpage = {3},
	}


@case{caseukunrep1,
  partya = {Stanford International Bank Ltd}, 
  partyb = {Director of The Serious Fraud Office},
  caseyear = {2012},
  courtname = {UKSC},
  casenumber = {3},
%  reportyear = {xxxx},
%  volyearneeded = {true},
%  reportvolume = {xxx},
%  reportseries = {xxx},
%  reportpage = {xxx},
	}

@case{caseukunrep2,
  partya = {Kasilevicius}, 
  partyb = {Deputy Prosecutor General Lithuania},
  caseyear = {2014},
  courtname = {EWHC},
  casenumber = {2281 (Admin)},
%  reportyear = {xxxx},
%  volyearneeded = {true},
%  reportvolume = {xxx},
%  reportseries = {xxx},
%  reportpage = {xxx},
	note = {QBD},
	}



@case{caseuk,
  partya = {Cox}, 
  partyb = {Ergo Versicherung AG },
  caseyear = {2014},
  courtname = {UKSC},
  casenumber = {22},
  reportyear = {2014},
%  volyearneeded = {true},
%  reportvolume = {},
  reportseries = {AC},
  reportpage = {1379},
	}



@case{caseusnd,
  partya = {State}, 
  partyb = {Birchfield},
  caseyear = {2016},
  courtname = {ND},
  casenumber = {182},
%  reportyear = {},
%  volyearneeded = {true},
  reportvolume = {885},
  reportseries = {NW 2d},
  reportpage = {62},
  note = {NDSC},
	}
@book{martin,
author={Peter W Martin},
title={Introduction to Basic Legal Citation},
publisher={online PDF at LII, 502 pages},
date={2017},
}


@statute{crimcan,
statutetitle = {Criminal Code},
%statutelongtitle = {},
%statuteshorttitle = {},
%statutenickname = {},
%statutevolume = {},
%statutejurisdiction = {NSW},
%statuteregnalyear = {},
%statutechapter = {},
%statuteyear = {},%for the volume
statutetitleyear = {RSC 1985, c~C-46},%for the title
}


@statute{canreg,
statutetitle = {Maple Products Regulations},
%statutelongtitle = {},
statuteshorttitle = {CRC},
%statutenickname = {},
%statutevolume = {},
%statutejurisdiction = {NSW},
%statuteregnalyear = {},
statutechapter = {289},
%statuteyear = {},%for the volume
%statutetitleyear = {RSC 1985},%for the title
}

@statute{canregnwt,
citeref = {nwtreg},
%title = {xxx},
%chapter = {xxx},
year = {2008},
regnum = {26},
}


@statute{crimnsw,
statutetitle = {Crimes Act},
%statutelongtitle = {},
%statuteshorttitle = {},
%statutenickname = {},
%statutevolume = {},
statutejurisdiction = {NSW},
%statuteregnalyear = {},
%statutechapter = {},
%statuteyear = {},%for the volume
statutetitleyear = {1900},%for the title
}


\end{filecontents*}

\documentclass[12pt]{article}
\title{Lawcite\\QuickStart Guide \\Exercise 2\\Table of Cases\\[24pt]\normalsize \hfill ---------\hfill\ }
\author{}
\date{}
\newcommand\rulesep{\rule{0.4\textwidth}{.4pt}}
%\usepackage{pdfpages}
\usepackage[table]{xcolor}
\usepackage{fontspec}
\setmainfont{Noto Serif}
\setsansfont{Noto Sans}[Scale=0.9]
\setmonofont{Noto Sans Mono}[Colour=blue]
\newfontface\ftmark{Noto Sans Symbols2}
\newcommand\goodoh{{\large\ftmark ðŸ—¸}}
\newcommand\notsogoodoh{{\large\ftmark ðŸ—¶}}

\usepackage{splitidx}
%=============================================

\newcommand\bef[1]{(\textit{#1})}
\newcommand\cef[1]{\textit{#1}}
\newcommand\cmd[1]{\textsf{\textbackslash\textbf{#1}}}
\newcommand\cmdb[2]{\textsf{\textbackslash\textbf{#1}\{#2\}}}

\usepackage[style=lawcite,
%	party-separator-dotted=true,
%	lawrefstyle=caseallabove,
	print-toc-tos=true,
%%	hyperlink-index-pages=true,
	use-toc-parnumrefs=false,
	show-statute-jurisdiction=true,
%	citetracker=true,
	ibidtracker=false,%for demo purposes
	]{biblatex}
\addbibresource{\jobname.bib}



%\renewcommand\myhyperref[1]{\hyperpage{#1}}
%\renewcommand\lcparnumrefsencap{|myhyperref}

\usepackage{fancyvrb}
\usepackage{mdframed}
\rowcolors{1}{blue!5}{blue!9}
\usepackage{float}
%\floatstyle{boxed}
%------------------------------- program float
\newfloat{program}{h}{lop}
\floatname{program}{Code listing}

\newenvironment{dov}[2]%
  {\VerbatimEnvironment
      \program
    \begin{mdframed}[backgroundcolor=green!40!blue!12]
    \caption{#2}%
    \label{#1}%    
    \begin{Verbatim}}
  {\end{Verbatim}%
    \end{mdframed}
    \endprogram
}

%------------------------------- reference float
\newfloat{reference}{h}{lop}
\floatname{reference}{Reference}

\newenvironment{dor}[2]%
  {%
      \reference
    \begin{mdframed}[backgroundcolor=red!40!green!12]
    \caption{#2}%
    \label{#1}%    
    }
  {%
    \end{mdframed}
    \endreference
}

%------------------------------- code emphasis
\newcommand\markthis[1]{\textcolor{red}{\textbf{#1}}}



\makeindex
\newindex[Table of Cases]{cases}
\newindex[Table of Statutes]{legislation}
\newindex[Table of Regulations]{regulations}
\newcommand\pagerefindexnoteb{{\small\mdseries\itshape\hfill Page}}
\setindexpreamble[cases]{\pagerefindexnoteb}
\setindexpreamble[legislation]{\pagerefindexnoteb}
\setindexpreamble[regulations]{\pagerefindexnoteb}

\usepackage[
				bookmarks,
            colorlinks=true,        
            allcolors = black,  
            citecolor=blue,        
            pageanchor=true,
            plainpages=false,
            hyperindex=false, 
]{hyperref}


\newcommand\illus[2]{\bigskip\noindent\fbox{#1}\\#2}

%\usepackage{tablefootnote}

%=============================================
\begin{document}
\maketitle
\tableofcontents


%\setprintlegtocon
\setindexhyperlinks
\let\xoldtwocolumn\twocolumn
\iftoggle{printlegtoc}{%
\let\oldtwocolumn\twocolumn
\renewcommand{\twocolumn}[1][]{#1}
\let\oldclearpage\clearpage
\renewcommand\clearpage{\relax}
\extendtheindex{}{\useindexpreamble}{}{}
\printindex[cases]
\printindex[legislation]
\iftoggle{printregulations}{\printindex[regulations]}{}
%%%\printindex[general]
%%%
\renewcommand{\twocolumn}[1][]{\oldtwocolumn}
\renewcommand\clearpage{\oldclearpage}
}{}
\bigskip
\hfill\rulesep\hfill\ %\hrule%{0.8\linewidth}
\bigskip

\section{Introduction}
The lawcite QuickStart Guide Exercise Pack consists of three exercises.

Exercise 1 illustrates the different styles available to the citation commands.

Exercise 2 demonstrates how to produce the Table of Cases and a general index.

Exercise 3 demonstrates the use of numbered paragraphs.

\section{Exercise 2}
Compile this document with (xe/lua)latex, biber, (xe/lua)latex.

\section{Indexing}
The Table of Cases, the Table of Statutes, and the Table of Regulations (compendiously referred to here as `ToC') are one-column indexes.

To produce them, put the code shown in listing \ref{indexpreamble} into the preamble of the document.

\begin{dov}{indexpreamble}{Defining the Indexes}
\usepackage{splitidx}
\makeindex
\newindex[Table of Cases]{cases}
\newindex[Table of Statutes]{legislation}
\newindex[Table of Regulations]{regulations}
\newcommand\pagerefindexnoteb{%
{\small\mdseries\itshape\hfill Page}}
\setindexpreamble[cases]{\pagerefindexnoteb}
\end{dov}


Put the code shown in listing \ref{indexbody} into the body of the document where the Table of Cases should appear (usually near the start, just after \texttt{\textbackslash begin\{document\}}).

\begin{dov}{indexbody}{Printing the Indexes}
\setindexhyperlinks
\let\xoldtwocolumn\twocolumn
\iftoggle{printlegtoc}{%
\let\oldtwocolumn\twocolumn
\renewcommand{\twocolumn}[1][]{#1}
\let\oldclearpage\clearpage
\renewcommand\clearpage{\relax}
\extendtheindex{}{\useindexpreamble}{}{}
\printindex[cases]
\printindex[legislation]
\iftoggle{printregulations}{%
\printindex[regulations]}{}
\renewcommand{\twocolumn}[1][]{\oldtwocolumn}
\renewcommand\clearpage{\oldclearpage}
}{}
\end{dov}

There are two lawcite biblatex options controlling the ToC.

\begin{itemize}
\item[] print-toc-tos=true 
	\begin{itemize}
	\item[] the ToC/ToS/ToR will be printed
	\end{itemize}
\item[] regulations-as-tor=true
	\begin{itemize}
	\item[] the Table of Regulations will be printed separately from the Table of Statutes
	\end{itemize}
\end{itemize}

\section{The \texttt{\textbackslash index} Command}
The MakeIndex program produces one index file (.ind) as output from information put into an input file (.idx) by the \texttt{\textbackslash index} command. Formatting is applied via code stored in an index style file (usually .ist).

The \texttt{\textbackslash index} command has the following structure:

\colorbox{yellow!50!green!20}{\texttt{\textbackslash index}\{sort-text\markthis{@}index-entry\markthis{!}subentry\markthis{!}subsubentry\markthis{|}code\}}

\section{The \texttt{\textbackslash sindex} Command}
The \texttt{splitidx} package, using the SplitIndex program, is able to produce, and apply MakeIndex to, multiple index files.

Its \texttt{\textbackslash sindex} command has the same structure as the \texttt{\textbackslash index} command, with the addition of a parameter identifying the specific index:

\colorbox{yellow!50!green!20}{\texttt{\textbackslash index}[index-shortname]\{ \ldots\ \}}

A split index is printed with \texttt{\textbackslash printindex} using the index shortname, e.g., \colorbox{yellow!50!green!20}{\texttt{\textbackslash printindex}[cases]}.

Additional (manual) indexes may be defined and used as desired, e.g., \colorbox{yellow!50!green!20}{\texttt{\textbackslash newindex}[General Index]\{general\}}.

The lawcite citation commands run the \texttt{\textbackslash sindex} command in the background, using the following method:

\colorbox{yellow!50!green!20}{\texttt{\textbackslash sindex}[shortname]\{sort-text\markthis{@}index-entry\markthis{|}code\}}

\noindent where \textit{code} is the command for setting hyperlinked page numbers or hyperlinked paragraph numbers.\footnote{Paragraph numbering is described in Exercise 3.}

\section{Generating the Table of Cases}
\lcsetstyleaglc\setallabove
Firstly, some cites are needed: some cases -- \lawcite{snail}, \lcsetstyleindigo\lawcite{caseuslumber}; some statutes -- 
\lcsetstylemcgill\setallabove
\lawcite{crimcan},
\lcsetstyleaglc\setallabove
\lawcite{crimnsw}; 
and some regulations\footnote{Where they are different in appearance and format to statutes, like the Canadian ones are.} -- 
\lcsetstylemcgill\setallabove
\lawcite{canreg}, and lastly \lawcite{canregnwt}.


Secondly, the index style file (see listing \ref{refist}) needs to be in place.

\begin{dov}{refist}{The index style file.}
delim_0 "\\space\\dotfill\\space "
delim_1 "\\space\\dotfill\\space "
delim_2 "\\space\\dotfill\\space "
delim_n ", "
delim_r "--"
delim_t ""
encap_prefix "\\"
encap_infix "{"
encap_suffix "}"
line_max 1000
\end{dov}


Thirdly, the SplitIndex program needs to be run. It requires certain parameters.

\colorbox{yellow!50!green!20}{\texttt{splitindex filename -s plain.ist}}

Then xelatex again, to read in the .ind files.
\bigskip


\bigskip
\bigskip
\hfill --oooOooo--\hfill\ 
%\vfill
%\printbibliography[type=book]

\end{document}


