% arara: lualatex
% arara: biber
% arara: lualatex
% arara: splitindex: { style: squarecheck.ist }
% arara: lualatex
% arara: splitindex: { style: squarecheck.ist }
% arara: lualatex
% arara: lualatex




\begin{filecontents*}{squarecheck.ist}
delim_0 ", \\squarecheck{"
delim_t "}"
\end{filecontents*}

\begin{filecontents*}{plain.ist}
delim_0 "\\space\\dotfill\\space "\hss
delim_1 "\\space\\dotfill\\space "\hss
delim_2 "\\space\\dotfill\\space "\hss
delim_n ", "
delim_r "--"
delim_t ""
encap_prefix "\\"
encap_infix "{"
encap_suffix "}"
line_max 1000
\end{filecontents*}
\begin{filecontents*}[overwrite]{lawcitemini.dbx}
\newcommand\printbibliographymcgill{%
\newpage
{\center
\printbibheading[title=Bibliography]
}
%------------------------------- Legislation
\newrefcontext[sorting=statsort]
\printbibliography[
title=\center Legislation,
heading=subbibliography,%
type=statute,
]
%------------------------------- Cases
\newrefcontext[sorting=casesort]
\printbibliography[
title=\center Jurisprudence,
heading=subbibliography,%
type=case,
notcategory=nobib,
%notkeyword=nobib,
]
%------------------------------- Monographs
\newrefcontext[sorting=nty]
\printbibliography[
heading=subbibliography,%
%nottype=case,
%nottype=statute,
%nottype=article,
%nottype=ljarticle,
keyword=lawbook,
title={\center Secondary Materials: Monographs},
%postnote={bibcolophon},
]
%------------------------------- Legal Articles, Law Reviews
\newrefcontext[sorting=nty]
\printbibliography[
heading=subbibliography,%
title={\center Secondary Materials: Articles},
type=ljarticle,
]
%postnote={bibcolophon},

%-------------------------------------
\bigskip
\hfill\rulesep\hfill\ %\hrule
\bigskip
%
%------------------------------- General Material
\printbibliography[
heading=subbibliography,%
nottype=case,
nottype=statute,
nottype=ljarticle,
nottype=quote,
notkeyword=lawbook,
title={\center General Material},
]
}
%...............................................................................................
\ExplSyntaxOn


		\cs_generate_variant:Nn 
			\seq_gset_split:Nnn 
			{ cno }


	\seq_new:N 
			\l_fc_rweq_seq
	\seq_new:N 
			\l_fc_rweqz_seq
	\seq_new:N 
			\l_fc_rweqy_seq
	\tl_new:N 
			\l_fc_rweqz_tl
	\seq_new:N 
			\l_fc_rweqyy_seq
	\int_new:N 
			\l_fc_rweqz_int
	\int_new:N 
			\l_fc_rweqy_int


	\tl_new:N 
			\g_fc_namespace_tl

	\tl_gset:Nn 
			\g_fc_namespace_tl
			{mfs}





%****************************************************
%*
%****************************************************
%------------------
	\cs_set:Npn \ic_funccatena:n #1 { 
	% 1=seq
			\seq_set_split:Nnn 
					\l_tmpa_seq 
					{ ; } 
					{ #1 }
			\tl_set:Nx 
					\l_tmpa_tl % bibentry key
					{ 
						\seq_item:Nn 
								\l_tmpa_seq  
								{1} 
					}
			\tl_set:Nx 
					\l_tmpb_tl % action on next decision
					{ 
						\seq_item:Nn 
								\l_tmpa_seq 
								{2} 
					}

% first item
			\int_compare:nNnTF 
					{ \g_fc_curritem_int } = { 1 }
					{ 
						\lcinline % full case name\ref
									{ \tl_use:N \l_tmpa_tl }
					}
					{ 
						\lawciteref %caseref only
									{ \tl_use:N \l_tmpa_tl }
					}

%last item
			\int_compare:nNnTF 
					{ \g_fc_curritem_int } { = } { \g_fc_totalitems_int }
					{   } % no punct sep: delim
					{ , \tex_space:D  } % delim comma space
	
					\tl_use:N \l_tmpb_tl % court action (empty on last decision)

%last item
			\int_compare:nNnTF 
					{ \g_fc_curritem_int } { = } { \g_fc_totalitems_int }
					{   } % no delim
					{ \tex_space:D  } % delim space
						
%			\bool_if:NTF
%				\g_fc_rollcall_bool
%				{
%			\tex_space:D
%			\mkbibparens
%						{ \tl_use:N \l_tmpb_tl }
%				}
%				{
%						,
%						\tex_space:D
%						\tl_use:N \l_tmpb_tl
%				}
						
%			\int_compare:nNnTF 
%					{ \g_fc_curritem_int } { < } { \g_fc_totalitems_int }
%					{ ; \tex_space:D \int_gincr:N \g_fc_curritem_int }
%					{ . }
						
						% looper+
				\int_gincr:N \g_fc_curritem_int
				
	}


%****************************************************
%*
%****************************************************
%------------------
	\cs_set:Npn \ic_funcrollcall:n #1 { 
	% 1=seq
			\seq_set_split:Nnn 
					\l_tmpa_seq 
					{ ; } 
					{ #1 }
			\tl_set:Nx 
					\l_tmpa_tl % bibentry key
					{ 
						\seq_item:Nn 
								\l_tmpa_seq  
								{1} 
					}
			\tl_set:Nx 
					\l_tmpb_tl % user note/comment
					{ 
						\seq_item:Nn 
								\l_tmpa_seq 
								{2} 
					}
	
			\lcinline
						{ \tl_use:N \l_tmpa_tl }
						
			\bool_if:NTF
				\g_fc_rollcall_bool
				{
			\tex_space:D
			\mkbibparens
						{ \tl_use:N \l_tmpb_tl }
				}
				{
						,
						\tex_space:D
						\tl_use:N \l_tmpb_tl
				}
						
			\int_compare:nNnTF 
					{ \g_fc_curritem_int } { < } { \g_fc_totalitems_int }
					{ ; \tex_space:D \int_gincr:N \g_fc_curritem_int }
					{ . }
						
				
	}





%****************************************************
%*
%****************************************************
%------------------
	\cs_set:Npn \ic_funcsortseq:cn #1#2 { % 1=seq, 2=order (<:descending, >:ascending) 
	\seq_sort:cn  { #1 } %\l_fc_rweq_seq 
		{
			\seq_clear:N 
					\l_fc_rweqz_seq 
			\seq_clear:N 
					\l_fc_rweqy_seq 
			\seq_set_split:Nnn 
					\l_fc_rweqz_seq 
					{ ; } 
					{ ##1 }
			\seq_set_split:Nnn 
					\l_fc_rweqy_seq 
					{ ; } 
					{ ##2 }
			\tl_set:Nx 
					\l_fc_rweqz_tl 
					{ 
						\seq_item:Nn 
								\l_fc_rweqz_seq 
								{1} 
					}
			\tl_set:Nx 
					\l_fc_rweqy_tl 
					{ 
						\seq_item:Nn 
								\l_fc_rweqy_seq 
								{1} 
					}

			\int_set:Nn 
					\l_fc_rweqz_int 
					{ 
						\tl_count_tokens:V 
								\l_fc_rweqz_tl 
					}
			\int_set:Nn 
					\l_fc_rweqy_int 
					{ 
						\tl_count_tokens:V 
						\l_fc_rweqy_tl 
					}
			\int_compare:nNnTF 
					{ \l_fc_rweqz_int } { #2 } { \l_fc_rweqy_int }
					{ \sort_return_swapped: }
					{ \sort_return_same: }
		}
}




	\int_new:N 
			\g_fc_curritem_int
	\int_new:N 
			\g_fc_totalitems_int
	\bool_new:N 
			\g_fc_rollcall_bool
	\bool_new:N 
			\g_fc_catena_bool
%****************************************************
%*
%****************************************************
%--------------------
\NewDocumentCommand { \lcrollcall } { s +m } { 
% 1=namspace,
% 2=seq name, 
% 3=data

				\IfBooleanTF {#1}
				{ \bool_gset_true:N \g_fc_rollcall_bool 	}
				{ \bool_gset_false:N \g_fc_rollcall_bool 	}


				\mfsloadaseq [lc] { rollcall } { #2 }
				
					\int_gset:Nn
							\g_fc_totalitems_int
							{
							\seq_count:c
							{ g_fc_rwe 
					  \tl_use:N
					  		\g_fc_namespace_tl 
							rollcall
					   _seq } 
					   }

					\int_gset:Nn
						\g_fc_curritem_int
						{ 1 }


			\seq_map_function:cN 
					{ g_fc_rwe 
					  \tl_use:N
					  		\g_fc_namespace_tl 
							rollcall
					   _seq } 
					\ic_funcrollcall:n
%					\adddot

}






%****************************************************
%*
%****************************************************
%--------------------
\NewDocumentCommand { \lccatena } { s +m } { 
% 1=namspace,
% (2=seq name, )
% 3=data

				\IfBooleanTF {#1}
				{ \bool_gset_true:N \g_fc_catena_bool 	}
				{ \bool_gset_false:N \g_fc_catena_bool 	}


				\mfsloadaseq [lc] { catena } { #2 }
				
					\int_gset:Nn
							\g_fc_totalitems_int
							{
							\seq_count:c
							{ g_fc_rwe 
					  \tl_use:N
					  		\g_fc_namespace_tl 
							catena
					   _seq } 
					   }

					\int_gset:Nn
						\g_fc_curritem_int
						{ 1 }


			\seq_map_function:cN 
					{ g_fc_rwe 
					  \tl_use:N
					  		\g_fc_namespace_tl 
							catena
					   _seq } 
					\ic_funccatena:n
%					\adddot

}






%****************************************************
%*
%****************************************************
%--------------------
\NewDocumentCommand { \mfsloadaseq } { o m +m } { % 1=seq name, 2=data

				\IfNoValueTF { #1 } 
						{ \tl_clear:N \g_fc_namespace_tl } 
						{ \tl_gset:Nn \g_fc_namespace_tl { #1 } }


	\cs_if_free:cT
			{ g_fc_rwe \g_fc_namespace_tl #2 _seq }
			{ \seq_new:c
					{ g_fc_rwe \g_fc_namespace_tl #2 _seq } 
			}
	\seq_gclear:c 
			{ g_fc_rwe \g_fc_namespace_tl #2 _seq } 
	\seq_gset_split:cno 
			{ g_fc_rwe \g_fc_namespace_tl #2 _seq } 
			{ , } 
			{ #3 }

%	\seq_show:c 
%			{ g_fc_rwe \g_fc_namespace_tl #2 _seq } 


}


%****************************************************
%*
%****************************************************
%--------------------
\NewDocumentCommand { \mfsloadaprop } { o m +m } { % 1=NS, 2=prop name, 3=data

				\IfNoValueTF { #1 } 
						{ \tl_clear:N \g_fc_namespace_tl } 
						{ \tl_gset:Nn \g_fc_namespace_tl { #1 } }

	\cs_if_free:cT
			{ g_fc_rwe \g_fc_namespace_tl #2 _prop }
			{ \prop_new:c
					{ g_fc_rwe \g_fc_namespace_tl #2 _prop } 
			}
	\prop_gclear:c 
			{ g_fc_rwe \g_fc_namespace_tl #2 _prop } 
	\prop_gset_from_keyval:cn 
			{ g_fc_rwe \g_fc_namespace_tl #2 _prop } 
			{ #3 }

}




%****************************************************
%*
%****************************************************
%--------------------
\NewDocumentCommand { \mfssortaseq } { o m m } { %1=seqname, 2=><, asc/desc

				\IfNoValueTF { #1 } 
						{ \tl_clear:N \g_fc_namespace_tl } 
						{ \tl_gset:Nn \g_fc_namespace_tl { #1 } }

\ic_funcsortseq:cn { g_fc_rwe \g_fc_namespace_tl #2 _seq } { #3 }

}



%****************************************************
%*
%****************************************************
%--------------------
\NewDocumentCommand { \mfssortaseqnum } { o m m } { %1=seqname, 2=><, asc/desc

				\IfNoValueTF { #1 } 
						{ \tl_clear:N \g_fc_namespace_tl } 
						{ \tl_gset:Nn \g_fc_namespace_tl { #1 } }

\ic_funcsortseqnum:cn { g_fc_rwe \g_fc_namespace_tl #2 _seq } { #3 }
}









%...............................................................................................
\ExplSyntaxOff

\newcommand\lccomma{,}


%hyperref support for splitindex
%\NewDocumentCommand\boldhyperpage{ m } {\textbf{\hyperpage{#1}}
%\NewDocumentCommand\boldhyperpage{ m } {\hyperpage{#1}}
\newcommand*\myhyperref[1]{\hyperpage{#1}}




\DeclareDatamodelFields[type=field, format=xsv, datatype=literal]{yoptions}
\DeclareDatamodelEntryfields{yoptions}

\DeclareDatamodelFields[type=field, datatype=verbatim]{thumbnail}
\DeclareDatamodelEntryfields{thumbnail}

%
\newtoggle{lcimageshow}
\togglefalse{lcimageshow}

\newtoggle{lcimageusescale}
\toggletrue{lcimageusescale}

\newcommand\lcimagewidth{1cm}
\newcommand\setlcimagewidth[1]{\renewcommand\lcimagewidth{#1}}

\newcommand\lcimagescale{0.2}
\newcommand\setlcimagescale[1]{\renewcommand\lcimagescale{#1}}

\newcommand*{\insertbibimage}[1]{\iftoggle{lcimageshow}%
{\fbox{\iftoggle{lcimageusescale}{\includegraphics[scale=\lcimagescale]{#1}}%true
{\includegraphics[width=\lcimagewidth,keepaspectratio]{#1}}%false
}}%true
{}%false
}



%
\newtoggle{printregulations}
\toggletrue{printregulations}

%
\newtoggle{printxregulations}
\toggletrue{printxregulations}


%
\newcommand\lctos{legislation}
%

\newcommand\lctor{%
%\ifkeyword{regulations}{\iftoggle{printregulations}{regulations}{legislation}}{legislation}%
\iftoggle{printxregulations}{regulations}{legislation}%
%legislation%
}

\newtoggle{hyperindexpages}
\toggletrue{hyperindexpages}



\DeclareDatamodelEntrytypes{case,statute,ljarticle,quote}

\DeclareDatamodelFields[type=list, datatype=literal]{%
parallel,
}


\DeclareDatamodelFields[type=field, datatype=literal]{
% case fields
  partya,
  partyb,
  partysep,
  partysepx,
  shipname,
  partyasn,%party short name, eg: DPP
  partybsn,
  partyajur,%party jurisdiction (for shortname), e.g. (NSW), as in DPP (NSW)
  partybjur,
  caseyear, %will be a date
  icaseyear, %for the index
  decisionyear, %for the casename, when no report year
  reportyear, %will be a date
  reportvolume,
  volyearneeded, %will be a boolean
  reportseries,
  reportpage,
  courtname,%for MNC, and in-progress
  casenumber,%for MNC
% for in-progress
  casename,
  courtdivision,
  courtlist,
  courtjurisdiction,
  courtcasenumber,%in-progress, the docket
  casestatus, %unreported, etc
  attribution, % J for the Court, for quote (qqcite)
  courtfullname, % for when unreported etc
%link
linkname,
url,
mncurl,
%general
  note,
  caseshortname,
  casenickname,
% statute
statutetitle,
statutelongtitle,
statuteshorttitle,
statutenickname,
statutevolume,
statutejurisdiction,
statuteregnalyear,
statutechapter,
statuteyear,%for the volume
statutetitleyear,%for the title
%reg2
title,
chapter,
year,
citeref,
regnum,
fulldate,
gazette,
%leg
svjy,
%ljarticle
mncyear,
mncname,
mncnumber,
shortname,
%quote
quotetext,
% annotation etc
annotation,
noterup,
commentary,
qquotation,
}

\DeclareDatamodelEntryfields[case]{%
partya,
partyb,
partysep,
partysepx,
caseyear,
reportyear,
reportvolume,%
volyearneeded,
reportseries,
reportpage,
courtname,
casenumber,
note,
shipname,%
icaseyear,
caseshortname,
casenickname,
decisionyear,
parallel,
  partyasn,%party short name, eg: DPP
  partybsn,
  partyajur,%party jurisdiction
  partybjur,
  casename,% in-progress fields
  courtdivision,
  courtlist,
  courtjurisdiction,
  courtcasenumber,
  casestatus, %unreported, etc
  attribution, % J for the Court, for quote (qqcite)
  courtfullname, % for when unreported etc
linkname,
url,
mncurl,
annotation,
noterup,
commentary,
%qquotation,
related,
relatedoptions,
relatedtype,
relatedstring,
}


\DeclareDatamodelEntryfields[statute]{%
statutetitle,%
statutelongtitle,%
statuteshorttitle,%
statutenickname,%
statutevolume,%
statutejurisdiction,%
statuteregnalyear,%
statutechapter,%
statuteyear,%for the volume
statutetitleyear,%for the title
%reg2
title,%
chapter,%
year,%
citeref,%
regnum,%
fulldate,%
gazette,%
%
svjy,%
linkname,
url,
mncurl,% court link
annotation,
noterup,
commentary,
%qquotation,
related,
relatedoptions,
relatedtype,
relatedstring,
}

\DeclareDatamodelEntryfields[ljarticle]{%
author,
title,
mncyear,
mncname,
mncnumber,
date,
volume,
journaltitle,
pages,
keywords,
note,
shortname,
annotation,
noterup,
commentary,
%qquotation,
related,
relatedoptions,
relatedtype,
relatedstring,
}

\DeclareDatamodelEntryfields[quote]{%
quotetext,
annotation,
noterup,
commentary,
qquotation,
related,
relatedoptions,
relatedtype,
relatedstring,
}


\DeclareLanguageMapping{english}{english-lawcitemini}


\endinput
\end{filecontents*}

\begin{filecontents*}[overwrite]{lawcitemini.bbx}
\ProvidesFile{lawcite.bbx}[2020/04/11 v1.0 biblatex bibliography style]
\RequireBibliographyStyle{ext-authortitle-ibid}
%%%%%%%%% case
%
\newtoggle{parabrackets}
\toggletrue{parabrackets}
%
\newtoggle{ibidpostdelimcomma}
\togglefalse{ibidpostdelimcomma}
%
\newtoggle{scndrefbrackets}
\togglefalse{scndrefbrackets}
%
\newtoggle{ibidsupracomma}
\togglefalse{ibidsupracomma}
%
\newtoggle{ibidsuprabrackets}
\togglefalse{ibidsuprabrackets}
%
\newtoggle{ibidsupraon}
\togglefalse{ibidsupraon}
%
\newtoggle{ibidsupraitalic}
\togglefalse{ibidsupraitalic}
%
\newtoggle{ibidsupranotelong}
\togglefalse{ibidsupranotelong}
%

\newtoggle{pinpointaftermnc}
\toggletrue{pinpointaftermnc}
%
\newtoggle{partysepitalic}
\toggletrue{partysepitalic}
%
\newtoggle{partysepdotted}
\togglefalse{partysepdotted}
%
\newtoggle{partynamesitalic}
\toggletrue{partynamesitalic}
%
\newcounter{reftypemode}
\setcounter{reftypemode}{3}%default: 3 allbelow
%
\newtoggle{mncbrackets}
\toggletrue{mncbrackets}
%
\newtoggle{caseyearasreportyear}
\togglefalse{caseyearasreportyear}
%
\newtoggle{multicitecomma}
\togglefalse{multicitecomma}
%
\newtoggle{printlegtoc}\toggletrue{printlegtoc}
%
\newtoggle{refintoc}\toggletrue{refintoc}
%
%%%%%%%%% statute
\newtoggle{statjurisdiction}
\togglefalse{statjurisdiction}
%
\newtoggle{stattycomma}
\togglefalse{stattycomma}
%
\newtoggle{stattyitalic}
\togglefalse{stattyitalic}
%
\newtoggle{lcindexing}
\toggletrue{lcindexing}


%ibid settings
%
\newtoggle{ibiditalic}
\togglefalse{ibiditalic}
%
\newtoggle{ibiduppercase}
\togglefalse{ibiduppercase}
%
%\newtoggle{ibiddelimcomma}
%\togglefalse{ibiddelimcomma}
\newcounter{ibiddelimmode}
\setcounter{ibiddelimmode}{1}%default: 1 none

%book
\newtoggle{bookauthorgiven}
\togglefalse{bookauthorgiven}
%
% useannotation
\newtoggle{useannotation}
\toggletrue{useannotation}
% usenoterup
\newtoggle{usenoterup}
\toggletrue{usenoterup}
% usecommentary
\newtoggle{usecommentary}
\toggletrue{usecommentary}
% useqquotation
\newtoggle{useqquotation}
\toggletrue{useqquotation}



\newcommand{\setannotationson}{%
\toggletrue{useannotation}
\toggletrue{usenoterup}
\toggletrue{usecommentary}
\toggletrue{useqquotation}
}

\newcommand{\setannotationsoff}{%
\togglefalse{useannotation}
\togglefalse{usenoterup}
\togglefalse{usecommentary}
\togglefalse{useqquotation}
}

%=======================================


\DeclareBibliographyOption[boolean]{use-annotation}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{useannotation}}
{\togglefalse{useannotation}}%
}

\DeclareBibliographyOption[boolean]{use-noterup}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{usenoterup}}
{\togglefalse{usenoterup}}%
}

\DeclareBibliographyOption[boolean]{use-commentary}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{usecommentary}}
{\togglefalse{usecommentary}}%
}

\DeclareBibliographyOption[boolean]{use-qquotation}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{useqquotation}}
{\togglefalse{useqquotation}}%
}


\DeclareBibliographyOption[boolean]{ibid-comma-postnote}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{ibidpostdelimcomma}}
{\togglefalse{ibidpostdelimcomma}}%
}



\DeclareBibliographyOption[boolean]{paragraph-number-brackets}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{parabrackets}}
{\togglefalse{parabrackets}}%
}


\DeclareBibliographyOption[boolean]{second-case-ref-brackets}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{scndrefbrackets}}
{\togglefalse{scndrefbrackets}}%
}



\DeclareBibliographyOption[boolean]{cite-book-author-given}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{bookauthorgiven}}
{\togglefalse{bookauthorgiven}}%
}


\DeclareBibliographyOption[boolean]{supra-comma}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{ibidsupracomma}}
{\togglefalse{ibidsupracomma}}%
}

%
\DeclareBibliographyOption[boolean]{supra-brackets}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{ibidsuprabrackets}}
{\togglefalse{ibidsuprabrackets}}%
}

%
\DeclareBibliographyOption[boolean]{supra-on}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{ibidsupraon}}
{\togglefalse{ibidsupraon}}%
}
%
\DeclareBibliographyOption[boolean]{supra-italic}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{ibidsupraitalic}}
{\togglefalse{ibidsupraitalic}}%
}

%
\DeclareBibliographyOption[boolean]{supra-note-long}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{ibidsupranotelong}}
{\togglefalse{ibidsupranotelong}}%
}
%




%
\DeclareBibliographyOption[boolean]{ibid-italic}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{ibiditalic}}
{\togglefalse{ibiditalic}}%
}

%
\DeclareBibliographyOption[boolean]{ibid-uppercase}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{ibiduppercase}}
{\togglefalse{ibiduppercase}}%
}

%
\DeclareBibliographyOption[boolean]{pinpoint-after-mnc}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{pinpointaftermnc}}
{\togglefalse{pinpointaftermnc}}%
}


%%
%\DeclareBibliographyOption[boolean]{ibid-delim-comma}[false]{%
%\ifstrequal{#1}{true}
%{\toggletrue{ibiddelimcomma}}
%{\togglefalse{ibiddelimcomma}}%
%}

%
\DeclareBibliographyOption[string]{ibid-delim}[none]{%
\ifstrempty{#1}{\setcounter{ibiddelimmode}{1}}{}
\ifstrequal{#1}{none}{\setcounter{ibiddelimmode}{1}}{}
\ifstrequal{#1}{comma}{\setcounter{ibiddelimmode}{2}}{}
\ifstrequal{#1}{colon}{\setcounter{ibiddelimmode}{3}}{}
\ifstrequal{#1}{dot}{\setcounter{ibiddelimmode}{4}}{}
}


%
\DeclareBibliographyOption[boolean]{use-case-year-as-report-year}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{caseyearasreportyear}}
{\togglefalse{caseyearasreportyear}}%
}



% statute
\DeclareBibliographyOption[boolean]{set-lawcite-indexing}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{lcindexing}}
{\togglefalse{lcindexing}}%
}
%
\newtoggle{ljarttitlequotes}
\toggletrue{ljarttitlequotes}
%
\newtoggle{ljarttitledoublequotes}
\toggletrue{ljarttitledoublequotes}
%
%\newtoggle{ljarttitledoublequoteslig}
%\toggletrue{ljarttitledoublequoteslig}
%
\newtoggle{ljarttitleitalic}
\toggletrue{ljarttitleitalic}

\newcommand\setljarttitleitalicon{%
\toggletrue{ljarttitleitalic}
}
\newcommand\setljarttitleitalicoff{%
\togglefalse{ljarttitleitalic}
}

% lj article title: italic
\DeclareBibliographyOption[boolean]{set-ljarticletitle-italic}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{ljarttitleitalic}}
{\togglefalse{ljarttitleitalic}}%
}

% lj article title: quotes
\DeclareBibliographyOption[boolean]{set-ljarticletitle-quotes}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{ljarttitlequotes}}
{\togglefalse{ljarttitlequotes}}%
}

% lj article title: double quotes
\DeclareBibliographyOption[boolean]{set-ljarticletitle-double-quotes}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{ljarttitledoublequotes}}
{\togglefalse{ljarttitledoublequotes}}%
}


% lj article title: double quotes ligature
%\DeclareBibliographyOption[boolean]{set-ljarticletitle-double-quotes-lig}[false]{%
%\ifstrequal{#1}{true}
%{\toggletrue{ljarttitledoublequoteslig}}
%{\togglefalse{ljarttitledoublequoteslig}}%
%}
%
\newtoggle{ljjnltitleitalic}
\toggletrue{ljjnltitleitalic}

\newcommand\setljjnltitleitalicon{%
\toggletrue{ljjnltitleitalic}
}
\newcommand\setljjnltitleitalicoff{%
\togglefalse{ljjnltitleitalic}
}

% lj journal title
\DeclareBibliographyOption[boolean]{set-ljjournaltitle-italic}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{ljjnltitleitalic}}
{\togglefalse{ljjnltitleitalic}}%
}






%---------------------------
\newtoggle{lcparnumrefs}
\toggletrue{lcparnumrefs}
\newcommand\lcparnumrefsencap{}

% statute
\DeclareBibliographyOption[boolean]{use-toc-parnumrefs}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{lcparnumrefs}}
{\togglefalse{lcparnumrefs}}%
\iftoggle{lcparnumrefs}{\renewcommand\myhyperref[1]{\ref{para.#1}}\renewcommand\lcparnumrefsencap{|myhyperref}}{\renewcommand\myhyperref[1]{\hyperpage{#1}}
\renewcommand\lcparnumrefsencap{|myhyperref}}%
}
%





% statute
\DeclareBibliographyOption[boolean]{regulations-as-tor}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{printregulations}\toggletrue{printxregulations}}
{\togglefalse{printregulations}\togglefalse{printxregulations}}%
}
%
\DeclareBibliographyOption[boolean]{show-statute-jurisdiction}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{statjurisdiction}}
{\togglefalse{statjurisdiction}}%
}
%
\DeclareBibliographyOption[boolean]{statute-title-year-comma}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{stattycomma}}
{\togglefalse{stattycomma}}%
}
%
\DeclareBibliographyOption[boolean]{statute-title-year-italic}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{stattyitalic}}
{\togglefalse{stattyitalic}}%
}

%
\newtoggle{indemomode}
\togglefalse{indemomode}
\DeclareBibliographyOption[boolean]{demo-mode}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{indemomode}}
{\togglefalse{indemomode}}%
\iftoggle{indemomode}{\lcsetdemoon}{\lcsetdemooff}
}


% case
\DeclareBibliographyOption[boolean]{multi-comma-sep}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{multicitecomma}}
{\togglefalse{multicitecomma}}%
}
%


\DeclareBibliographyOption[boolean]{caseref-in-toc}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{refintoc}}
{\togglefalse{refintoc}}%
}
%
\DeclareBibliographyOption[boolean]{mnc-brackets}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{mncbrackets}}
{\togglefalse{mncbrackets}}%
}
%
\DeclareBibliographyOption[boolean]{party-names-italic}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{partynamesitalic}}
{\togglefalse{partynamesitalic}}%
}
%
\DeclareBibliographyOption[boolean]{party-separator-italic}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{partysepitalic}}
{\togglefalse{partysepitalic}}
}
%
\DeclareBibliographyOption[boolean]{party-separator-dotted}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{partysepdotted}}
{\togglefalse{partysepdotted}}
}
%
%
\DeclareBibliographyOption[boolean]{print-toc-tos}[true]{%
\ifstrequal{#1}{true}{\toggletrue{printlegtoc}}{\togglefalse{printlegtoc}}
}

\DeclareBibliographyOption[boolean]{hyperlink-index-pages}[true]{%
\ifstrequal{#1}{true}{\toggletrue{hyperindexpages}\setindexhyperlinks}{\togglefalse{hyperindexpages}}
}



%
\DeclareBibliographyOption[string]{lawrefstyle}[caseallbelow]{%
\ifstrempty{#1}{\setcounter{reftypemode}{3}}{}
\ifstrequal{#1}{caseallabove}{\setcounter{reftypemode}{1}}{}
\ifstrequal{#1}{caseabovebelow}{\setcounter{reftypemode}{2}}{}
\ifstrequal{#1}{caseallbelow}{\setcounter{reftypemode}{3}}{}
\ifstrequal{#1}{casetitleonly}{\setcounter{reftypemode}{4}}{}
\ifstrequal{#1}{caserefonly}{\setcounter{reftypemode}{5}}{}
}

%
\newtoggle{commainindex}
\togglefalse{commainindex}
\DeclareBibliographyOption[boolean]{comma-in-index}[true]{%
\ifstrequal{#1}{true}
{\toggletrue{commainindex}}
{\togglefalse{commainindex}}%
}


%
\newtoggle{casenamecomma}
\togglefalse{casenamecomma}
\DeclareBibliographyOption[boolean]{casename-comma}[false]{%
\ifstrequal{#1}{true}
{\toggletrue{casenamecomma}}
{\togglefalse{casenamecomma}}%
}






%--------------------------------

%%%styletrack
\newcommand\lcstyletagdefault{1}
\newcommand\lcstyletagmlr{2}
\newcommand\lcstyletagmcgill{3}
\newcommand\lcstyletagaglc{4}
\newcommand\lcstyletagindigo{5}
\newcommand\lcstyletagunknown{99}
\newcommand\lccurrentstyle{}
\newcounter{lccurrentstyletag}
\newcommand\setlccurrentstyletag[1]{%
\setcounter{lccurrentstyletag}{#1}%
\ifcase\value{lccurrentstyletag}%
\or\renewcommand\lccurrentstyle{default}
\or\renewcommand\lccurrentstyle{MLR}
\or\renewcommand\lccurrentstyle{McGill}
\or\renewcommand\lccurrentstyle{AGLC}
\or\renewcommand\lccurrentstyle{Indigo}
\else\renewcommand\lccurrentstyle{unknown}
\fi%
}

\newcommand\lcshowcurrentstyle{%
lccurrentstyle <\thelccurrentstyletag =\lccurrentstyle>%
}




%--------------------- Default lawcite style
\newcommand\lcsetstyledefault{%
   \toggletrue{partynamesitalic}%
   \toggletrue{partysepitalic}%
   \togglefalse{partysepdotted}%
   \toggletrue{mncbrackets}%
   \setcounter{reftypemode}{3}%
   \toggletrue{printlegtoc}%
   \toggletrue{statjurisdiction}%
   \togglefalse{stattycomma}%
   \toggletrue{stattyitalic}%
   \toggletrue{commainindex}%
   \togglefalse{multicitecomma}%
   \togglefalse{casenamecomma}%
 \renewcommand\postnotedelim{,\ }%
   \toggletrue{ljarttitleitalic}%
   \togglefalse{ljjnltitleitalic}%
   \togglefalse{ljarttitlequotes}%
   \togglefalse{ljarttitledoublequotes}%
\togglefalse{ibiditalic}%
\togglefalse{ibiduppercase}%
\setcounter{ibiddelimmode}{1}%none   
\togglefalse{pinpointaftermnc}%
\togglefalse{ibidsupracomma}%
\togglefalse{ibidsuprabrackets}%
\togglefalse{ibidsupraon}%
\togglefalse{ibidsupraitalic}%
\togglefalse{ibidsupranotelong}%
\togglefalse{bookauthorgiven}%
\togglefalse{ibidpostdelimcomma}%
%\iftoggle{ibidpostdelimcomma}{\setpostnotedelimon}{\setpostnotedelimoff}
\toggletrue{parabrackets}%
\togglefalse{useannotation}%
\togglefalse{usenoterup}%
\togglefalse{usecommentary}%
\togglefalse{useqquotation}%
\setlccurrentstyletag{\lcstyletagdefault}%
}




%--------------------- AGLC
\newcommand\lcsetstyleaglc{%
   \toggletrue{partynamesitalic}%
   \toggletrue{partysepitalic}%
   \togglefalse{partysepdotted}%
   \toggletrue{mncbrackets}%
   \setcounter{reftypemode}{3}%
   \toggletrue{printlegtoc}%
   \toggletrue{statjurisdiction}%
   \togglefalse{stattycomma}%
   \toggletrue{stattyitalic}%
   \toggletrue{commainindex}%
   \togglefalse{multicitecomma}%
   \togglefalse{casenamecomma}%
 \renewcommand\postnotedelim{,\ }%
   \toggletrue{ljarttitleitalic}%
   \togglefalse{ljjnltitleitalic}%
   \togglefalse{ljarttitlequotes}%
   \togglefalse{ljarttitledoublequotes}%
\togglefalse{ibiditalic}%
\togglefalse{ibiduppercase}%
\setcounter{ibiddelimmode}{1}%none   
\togglefalse{pinpointaftermnc}%
\togglefalse{ibidsupracomma}%
\toggletrue{ibidsuprabrackets}%
\togglefalse{ibidsupraon}%
\togglefalse{ibidsupraitalic}%
\togglefalse{ibidsupranotelong}%
\togglefalse{bookauthorgiven}%     
\togglefalse{ibidpostdelimcomma}%
%\iftoggle{ibidpostdelimcomma}{\setpostnotedelimon}{\setpostnotedelimoff}
\toggletrue{parabrackets}%
\togglefalse{useannotation}%
\togglefalse{usenoterup}%
\togglefalse{usecommentary}%
\togglefalse{useqquotation}%
\setlccurrentstyletag{\lcstyletagaglc}%
}






%--------------------- MLR
\newcommand\lcsetstylemlr{%
   \toggletrue{partysepdotted}%
   \togglefalse{partysepitalic}%
   \toggletrue{partynamesitalic}%
   \toggletrue{mncbrackets}%
   \setcounter{reftypemode}{2}%
   \togglefalse{printlegtoc}%
   \togglefalse{multicitecomma}%
   \togglefalse{casenamecomma}%
 \renewcommand\postnotedelim{,\ }%
   \togglefalse{ljarttitleitalic}%
   \toggletrue{ljjnltitleitalic}%
   \togglefalse{ljarttitlequotes}%
   \togglefalse{ljarttitledoublequotes}%
\togglefalse{ibiditalic}%
\togglefalse{ibiduppercase}%
\setcounter{ibiddelimmode}{1}%none   
\togglefalse{pinpointaftermnc}%
\togglefalse{ibidsupracomma}%
\togglefalse{ibidsuprabrackets}%
\togglefalse{ibidsupraon}%
\togglefalse{ibidsupraitalic}%
\togglefalse{ibidsupranotelong}%
\togglefalse{bookauthorgiven}%        
\toggletrue{ibidpostdelimcomma}%
%\iftoggle{ibidpostdelimcomma}{\setpostnotedelimon}{\setpostnotedelimoff}
\toggletrue{parabrackets}%
\togglefalse{useannotation}%
\togglefalse{usenoterup}%
\togglefalse{usecommentary}%
\togglefalse{useqquotation}%
\setlccurrentstyletag{\lcstyletagmlr}%
}





%--------------------- McGill
\newcommand\lcsetstylemcgill{%
   \togglefalse{partysepdotted}%
   \toggletrue{partysepitalic}%
   \toggletrue{partynamesitalic}%
   \setcounter{reftypemode}{3}%
   \togglefalse{mncbrackets}%
   \toggletrue{stattycomma}%after the title
   \togglefalse{stattyitalic}%
   \togglefalse{statjurisdiction}%
%   \toggletrue{statutecomma}%after the title
 \toggletrue{commainindex}%
 \toggletrue{multicitecomma}%
 \toggletrue{casenamecomma}%
 \renewcommand\postnotedelim{\ }%
   \togglefalse{ljarttitleitalic}%
   \togglefalse{ljjnltitleitalic}%
   \togglefalse{ljarttitlequotes}%
   \toggletrue{ljarttitledoublequotes}%
\toggletrue{ibiditalic}%
\toggletrue{ibiduppercase}%
\setcounter{ibiddelimmode}{1}%no delimiter   
\toggletrue{pinpointaftermnc}%
%supra
\toggletrue{ibidsupracomma}%
\togglefalse{ibidsuprabrackets}%
\toggletrue{ibidsupraon}%
\toggletrue{ibidsupraitalic}%
\toggletrue{ibidsupranotelong}%
\toggletrue{bookauthorgiven}%
\togglefalse{ibidpostdelimcomma}%
%\iftoggle{ibidpostdelimcomma}{\setpostnotedelimon}{\setpostnotedelimoff}
\togglefalse{parabrackets}%
\togglefalse{useannotation}%
\togglefalse{usenoterup}%
\togglefalse{usecommentary}%
\togglefalse{useqquotation}%
   \setlccurrentstyletag{\lcstyletagmcgill}%
}

%--------------------- Indigo
\newcommand\lcsetstyleindigo{%
   \toggletrue{partynamesitalic}%
   \toggletrue{partysepitalic}%
   \toggletrue{partysepdotted}%
   \togglefalse{mncbrackets}%
   \setcounter{reftypemode}{1}%
   \toggletrue{printlegtoc}%
   \toggletrue{statjurisdiction}%
   \togglefalse{stattycomma}%
   \toggletrue{stattyitalic}%
   \toggletrue{commainindex}%
   \togglefalse{multicitecomma}%
   \toggletrue{casenamecomma}%
 \renewcommand\postnotedelim{,\ }%
   \toggletrue{ljarttitleitalic}%
   \togglefalse{ljjnltitleitalic}%
   \togglefalse{ljarttitlequotes}%
   \togglefalse{ljarttitledoublequotes}%
\togglefalse{ibiditalic}%
\togglefalse{ibiduppercase}%
\setcounter{ibiddelimmode}{1}%none   
\togglefalse{pinpointaftermnc}%
\togglefalse{ibidsupracomma}%
\togglefalse{ibidsuprabrackets}%
\togglefalse{ibidsupraon}%
\togglefalse{ibidsupraitalic}%
\togglefalse{ibidsupranotelong}%
\togglefalse{bookauthorgiven}%     
\toggletrue{ibidpostdelimcomma}%
%\iftoggle{ibidpostdelimcomma}{\setpostnotedelimon}{\setpostnotedelimoff}
\toggletrue{parabrackets}%
\togglefalse{useannotation}%
\togglefalse{usenoterup}%
\togglefalse{usecommentary}%
\togglefalse{useqquotation}%
\setlccurrentstyletag{\lcstyletagindigo}%
}



%
\DeclareBibliographyOption[string]{lawcitestyle}[mlr]{%
\ifstrempty{#1}{}{%
\ifstrequal{#1}{default}{%
   %xxx
   \lcsetstyledefault%
}{%
\ifstrequal{#1}{aglc}{%
   %xxx
   \lcsetstyleaglc%
}{%
\ifstrequal{#1}{mlr}{%
   %xxx
   \lcsetstylemlr%
}{%
\ifstrequal{#1}{mcgill}{%
   %xxx
   \lcsetstylemcgill%
}{%
\ifstrequal{#1}{indigo}{%
   %xxx
   \lcsetstyleindigo%
}{%
\lcsetstylemlr%
}}}}}}
}

%
\DeclareBibliographyCategory{nobib}

%
\DeclareBibliographyDriver{case}{% bib is a list; cite is a loop.
 \usebibmacro{begentry}%
% \iffieldundef{crossref}{%
   \usebibmacro{getcasenameref}%
   \iffieldundef{url}{}{\addspace\printtext[angles]{\usebibmacro{getcaseurl}}}%
%    }%code for no crossref
%   {\usebibmacro{getcasenameref}}%code for crossref
\usebibmacro{lcrelated}
 \usebibmacro{getann:noter:comm}
 \usebibmacro{finentry}
}
%
\DeclareBibliographyDriver{statute}{%
 \usebibmacro{begentry}%
   \usebibmacro{getstatutenameref}%
   \usebibmacro{getcanleg}%citeref method
   \usebibmacro{getcanreg2}%citeref method
\usebibmacro{lcrelated}
 \usebibmacro{getann:noter:comm}
 \usebibmacro{finentry}
}

\DeclareBibliographyDriver{ljarticle}{%
 \usebibmacro{begentry}%
 \usebibmacro{getljarticle}%ljb-generic}
\usebibmacro{lcrelated}
 \usebibmacro{getann:noter:comm}
 \usebibmacro{finentry}
}


\DeclareSortingTemplate{casesort}{
\sort{
 \field{partya}
 }
\sort{
 \field{partyb}
 }
\sort{
 \field{caseyear}
 }
\sort{
 \field{reportvolume}
 }
\sort{
 \field{casenumber}
 }
\sort{
 \field{reportseries}
 }
\sort{
 \field{reportpage}
 }
}

\DeclareSortingTemplate{statsort}{
\sort{
 \field{statutetitle}
 \field{title}
 \field{sorttitle}
% \field{citeref}%citeref method: if no title: no effect
 }
\sort{
 \field{statutejurisdiction}
 \field{citeref}%citeref method
 }
\sort{
 \field{statutetitleyear}
 \field{svjy}
 \field{year}
 }
\sort{
 \field{regnum}%other Canadian provinces
 \field{gazette}%Quebec
 }
}

\DeclareSortingTemplate{casestat}{
\sort{
 \field{partya}
 \field{statutetitle}
 }
\sort{
 \field{partyb}
 \field{statutejurisdiction}
 }
\sort{
 \field{caseyear}
 \field{statutetitleyear}
 }
\sort{
 \field{reportvolume}
 }
\sort{
 \field{casenumber}
 }
\sort{
 \field{reportseries}
 }
\sort{
 \field{reportpage}
 }
}





\DeclareSortingTemplate{legytj}{
\sort{
 \field{caseyear}
 \field{statutetitleyear}
 }
\sort{
 \field{partya}
 \field{statutetitle}
 }
\sort{
 \field{statutejurisdiction}
 \field{partyb}
 }
\sort{
 \field{casenumber}
 }
\sort{
 \field{reportvolume}
 }
\sort{
 \field{reportseries}
 }
\sort{
 \field{reportpage}
 }
}



\DeclareSortingTemplate{legyjt}{
\sort{
 \field{caseyear}
 \field{statutetitleyear}
 }
\sort{
 \field{statutejurisdiction}
 \field{courtname}
% \field{partyb}
 }
\sort{
 \field{partya}
 \field{statutetitle}
 }
\sort{
 \field{casenumber}
 }
\sort{
 \field{reportvolume}
 }
\sort{
 \field{reportseries}
 }
\sort{
 \field{reportpage}
 }
}



\DeclareSortingTemplate{legjyt}{
\sort{
 \field{statutejurisdiction}
 \field{courtname}
% \field{partyb}
 }
\sort{
 \field{caseyear}
 \field{statutetitleyear}
 }
\sort{
 \field{partya}
 \field{statutetitle}
 }
\sort{
 \field{casenumber}
 }
\sort{
 \field{reportvolume}
 }
\sort{
 \field{reportseries}
 }
\sort{
 \field{reportpage}
 }
}

\DeclareSortingTemplate{legjty}{
\sort{
 \field{statutejurisdiction}
 \field{partyb}
 }
\sort{
 \field{partya}
 \field{statutetitle}
 }
\sort{
 \field{caseyear}
 \field{statutetitleyear}
 }
\sort{
 \field{casenumber}
 }
\sort{
 \field{reportvolume}
 }
\sort{
 \field{reportseries}
 }
\sort{
 \field{reportpage}
 }
}








\endinput
\end{filecontents*}

\begin{filecontents*}[overwrite]{lawcitemini.cbx}
\ProvidesFile{lawcite.cbx}[2020-04-11 v1.0 biblatex citation lawcite style]
\RequireCitationStyle{ext-authortitle-ibid}

% commands
\newcommand\statutetitleyeardelim{\addspace}
\newcommand\statutejurisdictiondelim{\addspace}

%for Table of Cases
\newcommand\mncreportdelimiter{}
\newcommand\setmncreportdelimiter[1]{%
\renewcommand\mncreportdelimiter{\addcomma\addspace}}


%for tracing
\newcommand\ttt{\textcolor{red}{AA}}

%====================================================
%\DeclareListFormat{location}{%
%#1%
%\ifthenelse{\value{listcount}<\value{liststop}}
%{\addcomma\space}
%{}}

%\printlist[hformati][hstarti–hstopi]{hliteral listi}

%This command loops over all items in a hliteral listi, starting at item number hstarti
%and stopping at item number hstopi, including hstarti and hstopi (all lists are numbered
%starting at 1). Each item is printed using the formatting directive hformati,
%as defined with \DeclareListFormat. If a type-specific hformati has been
%declared, the type-specific formatting directive takes precedence over the generic
%one. If the hliteral listi is undefined, nothing is printed. If the hformati is omitted,
%\printlist tries using the name of the list as a format name.


%\DeclareListWrapperFormat[hentrytype, …i]{hformati}{hcodei}
%\DeclareListWrapperFormat*{hformati}{hcodei}
%
%Defines the list wrapper format hformati. This formatting directive is arbitrary hcodei
%to be executed once for the entire list processed by \printlist. The name of the
%literal list currently being processed is available to the hcodei as \currentlist.
%If an hentrytypei is specified, the format is specific to that type. The hentrytypei
%argument may be a comma-separated list of values. The starred variant of this
%command















% fieldformats: case
\DeclareFieldFormat{partya}{\iftoggle{partynamesitalic}{\mkbibemph{#1}}{#1}}
\DeclareFieldFormat{partyb}{\iftoggle{partynamesitalic}{\mkbibemph{#1}}{#1}}
\DeclareFieldFormat{shipname}{\mkbibemph{#1}}%
\DeclareFieldFormat{caseshortname}{%
\iftoggle{partynamesitalic}%
{\mkbibemph{#1}}%
{#1}%
}
\DeclareFieldFormat{casenickname}{\mkbibquote{#1}}%\addspace\bibstring{case}}}

\DeclareFieldFormat{partyasn}{\iftoggle{partynamesitalic}{\mkbibemph{#1}}{#1}}
\DeclareFieldFormat{partybsn}{\iftoggle{partynamesitalic}{\mkbibemph{#1}}{#1}}
\DeclareFieldFormat{partyajur}{\mkbibparens{\iftoggle{partynamesitalic}{\mkbibemph{#1}}{#1}}}
\DeclareFieldFormat{partybjur}{\mkbibparens{\iftoggle{partynamesitalic}{\mkbibemph{#1}}{#1}}}

\DeclareFieldFormat{quotetext}{\mkbibquote{#1}}
\DeclareFieldFormat[case]{casestatus}{#1}
\DeclareFieldFormat[case]{courtfullname}{#1}






\DeclareFieldFormat{decisionyear}{\mkbibparens{#1}}


\DeclareFieldFormat{partysep}{%
%#1
\iftoggle{partysepitalic}{%true
\mkbibemph{#1}{\iftoggle{partysepdotted}{\adddot}{}}%
}%end true
{%false
#1{\iftoggle{partysepdotted}{\adddot}{}}%
}%end false
}%end


\DeclareFieldFormat{caseyear}{%
\iffieldundef{casenumber}{#1}{\iftoggle{mncbrackets}{\mkbibbrackets{#1}}{#1}}}%make option
\DeclareFieldFormat{courtname}{#1}
\DeclareFieldFormat{casenumber}{#1}

\DeclareFieldFormat{reportyear}{#1}
\DeclareFieldFormat{reportvolume}{#1}
\DeclareFieldFormat{reportseries}{#1}
\DeclareFieldFormat{reportpage}{#1}



% fieldformats: statute

\DeclareFieldFormat{statutetitle}{\mkbibemph{#1}}
\DeclareFieldFormat{statutelongtitle}{#1}
\DeclareFieldFormat{statuteshorttitle}{#1}
\DeclareFieldFormat{statutenickname}{\mkbibquote{#1\space\bibstring{act}}}
\DeclareFieldFormat{statutevolume}{#1}
\DeclareFieldFormat{statutejurisdiction}{\mkbibparens{#1}}
\DeclareFieldFormat{statuteregnalyear}{#1}
\DeclareFieldFormat{statutechapter}{#1}
\DeclareFieldFormat{statuteyear}{#1}
\DeclareFieldFormat{statutetitleyear}{\iftoggle{stattyitalic}{\mkbibemph{#1}}{#1}}

% fieldformats: ljarticle
%%author,
%%title,
\DeclareFieldFormat[ljarticle]{title}{\iftoggle{ljarttitleitalic}{\mkbibemph{#1}}{#1}}
\DeclareFieldFormat[ljarticle]{subtitle}{\iftoggle{ljarttitleitalic}{\mkbibemph{#1}}{#1}}
%%mncyear,
%%mncname,
%%mncnumber,
%%date,
%%volume,
%%journaltitle,
\DeclareFieldFormat[ljarticle]{journaltitle}{\iftoggle{ljjnltitleitalic}{\mkbibemph{#1}}{#1}}
%%pages,
%%keywords,
%%note,

% bibmacros: general
\newbibmacro{lcrelated}{%
%:\thefield{entrykey};\thefield{related}:%xxx
\iffieldundef{related}{}{%
\iffieldundef{relatedtype}{}{%
\addspace\bibstring{\thefield{relatedtype}}\space}%
\entrydata*{\thefield{related}}{%
\ifentrytype{case}{\addspace\usebibmacro{getcasenameref}}{}%
\ifentrytype{statute}{\addspace\usebibmacro{getstatutenameref}}{}%
\ifentrytype{ljarticle}{\addspace\usebibmacro{getljarticle}}{}%
}%
}%
}




% bibmacros: case

%=========== partysep
\newbibmacro{getpartysep}{%
\iffieldundef{partysep}{%
 \iftoggle{partysepitalic}%
  {\mkbibemph{\bibstring{versus}}}%
  {\bibstring{versus}}%
 \iftoggle{partysepdotted}{\adddot}{}%
 }%
 {%
 \printfield{partysep}
% \iftoggle{partysepitalic}%
%  {\mkbibemph{\printfield{partysep}}}%
%  {\printfield{partysep}}%
% \iftoggle{partysepdotted}{\adddot}{}%
 }%
}

%======= partynamesa
\newbibmacro{getpartynamesa}{%
\iffootnote{%
\iffieldundef{partyasn}{\printfield{partya}}{\printfield{partyasn}}}%
{\printfield{partya}}%
\iffieldundef{partyajur}{}{\addspace\printfield{partyajur}}%
}%

%======= partynamesb
\newbibmacro{getpartynamesb}{%
\iffootnote{%
\iffieldundef{partybsn}{\printfield{partyb}}{\printfield{partybsn}}}%
{\printfield{partyb}}%
\iffieldundef{partybjur}{}{\addspace\printfield{partybjur}}%
}%


%======= casename
\newbibmacro{getcasename}{%
%\ifciteseen{\ifciteibid{SEENIBID}{SEEN}}{}%
\iffootnote{%
\ifciteseen{\ifciteibid{\textcolor{red}{CC}}{\usebibmacro{getcaseshortname}}}{%
\iffieldundef{shipname}{\usebibmacro{getpartynamesa}%
\iffieldundef{partyb}{}%
{\addspace\usebibmacro{getpartysep}\addspace%
\usebibmacro{getpartynamesb}}%
}%no shipname
{The \printfield{shipname}}%
\iffieldundef{decisionyear}{}{\addspace\printfield{decisionyear}}%
%\newunit
%\newblock
}%not seen, not ibid
}%end in footnote
{%
\iffieldundef{shipname}{\usebibmacro{getpartynamesa}%
\iffieldundef{partyb}{}%
{\addspace\usebibmacro{getpartysep}\addspace%
\usebibmacro{getpartynamesb}}%
}%no shipname
{The \printfield{shipname}}%
\iffieldundef{decisionyear}{}{\addspace\printfield{decisionyear}}%
}%not in footnote
}%


%======= casenamefull
\newbibmacro{getcasenamefull}{%
\iffieldundef{shipname}{\usebibmacro{getpartynamesa}%
\iffieldundef{partyb}{}%
{\addspace\usebibmacro{getpartysep}\addspace%
\usebibmacro{getpartynamesb}}%
}%no shipname
{The \printfield{shipname}}%
\iffieldundef{decisionyear}{}{\addspace\printfield{decisionyear}}%
}%


%%%======= casename
%%\newbibmacro{getcasename}{%
%%\iffieldundef{shipname}{\printfield{partya}%
%%\iffieldundef{partyb}{}%
%%{\addspace\usebibmacro{getpartysep}\addspace%
%%\printfield{partyb}}%
%%}%no shipname
%%{The \printfield{shipname}}%
%%\iffieldundef{decisionyear}{}{\addspace\printfield{decisionyear}}%
%%\newunit
%%\newblock
%%}%

%======== casesn
\newbibmacro{getcasesn}{%
\iffieldundef{shipname}{\iffieldundef{partya}{}{\printfield{partya}}}%
{\printfield{shipname}}%
}


%======== caseshortname
\newbibmacro{getcaseshortname}{%
\iffieldundef{shipname}{\iffieldundef{caseshortname}{%
%if no caseshortname, use partya (if there is one)
\iffieldundef{partya}{}{\printfield{partya}}%
}{\printfield{caseshortname}}}%
{\printfield{shipname}}%
}



%======== casenickname
\newbibmacro{getcasenickname}{%
\iffieldundef{casenickname}{}{\printfield{casenickname}}%
}




%======== caseyear
\newbibmacro{getcaseyear}{%
\iffieldundef{caseyear}{}%
{\iffieldundef{mncurl}{\addspace\printfield{caseyear}}}%
{\printfield{caseyear}}%
}

%======== courtname
\newbibmacro{getcourtname}{%
\iffieldundef{courtname}{}%
{\addspace\printfield{courtname}}%
}

%======== casenumber
\newbibmacro{getcasenumber}{%
\iffieldundef{casenumber}{}%
{\addspace\printfield{casenumber}}%
}





%
\newbibmacro{getreportyear}{%
\ifkeyword{nobracketssecondref}%
{%no brackets
\iffieldundef{reportyear}%
{\iffieldundef{caseyear}%if no report year
{}%if no case year
{\iftoggle{caseyearasreportyear}{\printfield{caseyear}}{}}%
}%end if no reportyear
{\iffieldundef{volyearneeded}{%
\iffieldundef{reportvolume}{%
\printtext{\printfield{reportyear}}%
}{\printtext{\printfield{reportyear}}}%
}{%
\printtext{\printfield{reportyear}}%
%
}}%
}%end no brackets
{%use brackets
\iffieldundef{reportyear}%
{\iffieldundef{caseyear}%if no report year
{}%if no case year
{\iftoggle{caseyearasreportyear}{\printfield{caseyear}}{}}%
}%end if no reportyear
{\iffieldundef{volyearneeded}{%
\iffieldundef{reportvolume}{%
\printtext{\mkbibbrackets{\printfield{reportyear}}}%
}{\printtext{\mkbibparens{\printfield{reportyear}}}}%
}{%
\printtext{\mkbibbrackets{\printfield{reportyear}}}%
%
}}%
}%xx
}

%  reportvolume = {3},
%  volyearneeded = {true},


%
\newbibmacro{getreportvolume}{%
\iffieldundef{reportvolume}{}%
{%
\addspace\printfield{reportvolume}%
}}

%
\newbibmacro{getreportseries}{%
\addspace\printfield{reportseries}%
}

%
\newbibmacro{getreportpage}{%
\addspace\printfield{reportpage}%
}

%======== getreportref
\newbibmacro{getreportref}{%
%\iftoggle{scndrefbrackets}{scndrefbrackets}{}%
\iffieldundef{reportpage}{}%
{%
% \iffieldundef{casenumber}{}{\setunit*{\addcomma\addspace}}%
 \usebibmacro{getreportyear}%
 \usebibmacro{getreportvolume}%
 \usebibmacro{getreportseries}%
 \usebibmacro{getreportpage}%
 \setunit*{\addcomma\addspace}%
}}

%======== getnote
\newbibmacro{getnote}{%
\iffieldundef{note}%
{}%
{%false
%print note if not ibid:
 \ifboolexpr{%
  test {\ifcitation}
  and
  test {\ifciteseen}
  and
  test {\ifciteibid}
  }%
{}{%not an ibid
 \setunit*{\addspace}%
 \printtext[parens]{%
 \printfield{note}%
 }%
}}}

%======== getnote:plain
\newbibmacro{getnote:plain}{%
\iffieldundef{note}%
{}%
{%false
 \printtext[plain]{%
 \printfield{note}%
 }%
}}


%======== getnote:noparens, i.e. always (...(x)), not (...[x]).
\newbibmacro{getnote:noparens}{%
\iffieldundef{note}%
{}%
{%false
%print note if not ibid:
 \ifboolexpr{%
  test {\ifcitation}
  and
  test {\ifciteseen}
  and
  test {\ifciteibid}
  }%
{}{%not an ibid
 \setunit*{\addspace}%
 \printtext{(%
 \printfield{note}%
 )}%
}}}




%======= casexxx
\newbibmacro{casexxx}{%
xxx}%


%======== getcaseref
\newbibmacro{getcaseref}{%
\iffieldundef{mncurl}{%
\iffieldundef{casenumber}{}{%
 \usebibmacro{getcaseyear}%
 \usebibmacro{getcourtname}%
 \usebibmacro{getcasenumber}%
 }%
 }{%
  \ifhyperref
    {%
    \printtext{\addspace}%clear the puncuation buffer = no comma in link
    \iffieldundef{casenumber}{%
    \url{\thefield{mncurl}}
    }%
    {\href{\thefield{mncurl}}{%
 \usebibmacro{getcaseyear}%
 \usebibmacro{getcourtname}%
 \usebibmacro{getcasenumber}%
    }}%
    }%
    {\nolinkurl{\thefield{mncurl}}}%
}%
 \usebibmacro{mnc:postnote}%
%
%   \newunit
%    \newblock
%  YYY
%\usebibmacro{postnote}
   \iffieldundef{reportpage}{}{\iffieldundef{casenumber}{}{\setunit*{\addcomma\addspace}}\usebibmacro{getreportref}}%
   \iflistundef{parallel}{}{\setunit*{\addcomma\space}}%
%   \usebibmacro{getnote}%
%   \newunit
%   \newblock%
}

%======== getibid
\newbibmacro{getibid}{%
% text format
 \iftoggle{ibiditalic}%
  {\mkbibemph{\iftoggle{ibiduppercase}{\MakeCapital{\bibstring{ibid}}}{\bibstring{ibid}}}}%
  {\iftoggle{ibiduppercase}{\MakeCapital{\bibstring{ibid}}}{\bibstring{ibid}}}%
% if postnote different:
% delimiter
 \ifcase\theibiddelimmode \or%none
 \or%
% \textcolor{red}{CC}%
 \addcomma%
% \textcolor{red}{DD}%
 \or\addcolon%
 \or\adddot%
\fi
%
%\addspace
}


\newtoggle{lcibidtracking}
\toggletrue{lcibidtracking}


\newtoggle{supranoteused}
\togglefalse{supranoteused}

\newbibmacro{getibidsupra}{%
  \iftoggle{ibidsupraon}{%
%  supra
  \iftoggle{ibidsupraitalic}{%
%  italic
  \mkbibemph{\bibstring{ibidsupra}}}%
  {\bibstring{ibidsupra}}%
  \addspace%
}
{  \iftoggle{ibidsupraitalic}{%
%  italic
  \mkbibemph{\bibstring{ibidsupra}}}%
  {\bibstring{ibidsupra}}%
}%
}
%=========== getibidsupranote: 5 settings
\newbibmacro{getibidsupranote}{%
%,
%\togglefalse{supranoteused}
%\textcolor{red}{AA}%
\iftoggle{ibidsupracomma}{\addcomma}{}%
%\textcolor{red}{BB}%
%
 \addspace 
%()
 \iftoggle{ibidsuprabrackets}{%
  \mkbibparens{%
  \iftoggle{ibidsupraon}{\usebibmacro{getibidsupra}}{}%
%  note
  \iftoggle{ibidsupranotelong}{\bibstring{ibidsupranote}}%
  {\bibstring{ibidsupran}}%
\addspace\ref{cfn:\thefield{entrykey}}%
\toggletrue{supranoteused}%
  }%parens
  }%
{%
\iftoggle{ibidsupraon}{\usebibmacro{getibidsupra}}{}%
%  note
  \iftoggle{ibidsupranotelong}{\bibstring{ibidsupranote}}%
  {\bibstring{ibidsupran}}%
\addspace\ref{cfn:\thefield{entrykey}}%
\toggletrue{supranoteused}%
}%no parens
%%%  no ()
%%  {\iftoggle{ibidsupraon}{%
%%  \iftoggle{ibidsupraitalic}{%
%%  \mkbibemph{\iftoggle{ibidsupranotelong}{%
%%  \bibstring{ibidsupranote}}{\bibstring{ibidsupran}}}}{\iftoggle{ibidsupranotelong}{%
%%  \bibstring{ibidsupranote}}{\bibstring{ibidsupran}}}}{} \ref{cfn:\thefield{entrykey}}}%
%  
%===  
%  \addcomma\addspace\mkbibemph{\bibstring{ibidsupra}} \bibstring{ibidsupranote} \ref{cfn:\thefield{entrykey}}%
}


%====================================== annotation, noterup, commentary, qquotation
%%% built-in:
%%\newbibmacro*{annotation}{%
%%  \begingroup
%%  \togglefalse{blx@bibliography}%
%%  \iffieldundef{annotation}
%%    {\printfile[annotation]{\bibannotationprefix\thefield{entrykey}.tex}}
%%    {\printfield{annotation}}%
%%  \endgroup}
%%  
%%\newcommand*{\bibannotationprefix}{bibannotation-}
%---
\newbibmacro*{noterup}{%
  \begingroup
%  \togglefalse{blx@bibliography}%
  \iffieldundef{noterup}
    {\addspace\printfile[annotation]{\bibnoterupprefix\thefield{entrykey}.tex}}
    {\addspace\printfield{noterup}}%
  \endgroup}
  
\newcommand*{\bibnoterupprefix}{bibnoterup-}
%---
\newbibmacro*{commentary}{%
  \begingroup
%  \togglefalse{blx@bibliography}%
  \iffieldundef{commentary}
    {\addspace\printfile[annotation]{\bibcommentaryprefix\thefield{entrykey}.tex}}
    {\addspace\printfield{commentary}}%
  \endgroup}
  
\newcommand*{\bibcommentaryprefix}{bibcommentary-}
%---
\newbibmacro*{qquotation}{%
  \begingroup
  \togglefalse{blx@bibliography}%===
  \iffieldundef{qquotation}
    {\addspace\printfile[annotation]{\bibqquotationprefix\thefield{entrykey}.tex}}
    {\addspace\printfield{qquotation}}%
   \addspace -- \addspace \usebibmacro{getcasenamerefnofn}
  \endgroup}
  
\newcommand*{\bibqquotationprefix}{bibqquotation-}

%-----
\newbibmacro*{getann:noter:comm}{%
\iftoggle{useannotation}{\usebibmacro{annotation}}{}%
\iftoggle{usenoterup}{\usebibmacro{noterup}}{}%
\iftoggle{usecommentary}{\usebibmacro{commentary}}{}%
%\iftoggle{useqquotation}{\usebibmacro{qquotation}}{}%
}





%====================================== toggle commands
%\newcommand\lcnamerefdelim{\addcomma\addspace}
\newcommand\lcnamerefdelim{\addspace}
\newcommand\lcnamerefcommadelim{\addcomma\addspace}
\newcommand\lcparentchilddelim{\addcomma}

\newcommand\setcasenamecommaon{\toggletrue{casenamecomma}}
\newcommand\setcasenamecommaoff{\togglefalse{casenamecomma}}

\newcommand\setpartysepitalicon{\settoggle{partysepitalic}{true}}
\newcommand\setpartysepitalicoff{\settoggle{partysepitalic}{false}}

\newcommand\setpartysepdottedon{\settoggle{partysepdotted}{true}}
\newcommand\setpartysepdottedoff{\settoggle{partysepdotted}{false}}


\newcommand\setpartynamesitalicon{\settoggle{partynamesitalic}{true}}
\newcommand\setpartynamesitalicoff{\settoggle{partynamesitalic}{false}}

\newcommand\lcconstallabove{1}
\newcommand\lcconstabovebelow{2}
\newcommand\lcconstallbelow{3}
\newcommand\lcconsttitleonly{4}

\newcommand\setallabove{\setcounter{reftypemode}{\lcconstallabove}}
\newcommand\setabovebelow{\setcounter{reftypemode}{\lcconstabovebelow}}
\newcommand\setallbelow{\setcounter{reftypemode}{\lcconstallbelow}}
\newcommand\settitleonly{\setcounter{reftypemode}{\lcconsttitleonly}}




\newcommand\setmncbracketson{\settoggle{mncbrackets}{true}}
\newcommand\setmncbracketsoff{\settoggle{mncbrackets}{false}}


\newcommand\setprintlegtocon{\settoggle{printlegtoc}{true}}
\newcommand\setprintlegtocoff{\settoggle{printlegtoc}{false}}


\newcommand\setrefintocon{\settoggle{refintoc}{true}}
\newcommand\setrefintocoff{\settoggle{refintoc}{false}}

\newcommand\setstatjurison{\settoggle{statjurisdiction}{true}}
\newcommand\setstatjurisoff{\settoggle{statjurisdiction}{false}}

\newcommand\setmulticitecommaon{\toggletrue{multicitecomma}}
\newcommand\setmulticitecommaoff{\togglefalse{multicitecomma}}

\newcommand\lcsetdemoon{%
\setlcinlinecolour{red}
\setlcinlinerrcolour{brown}
\setlcinlinerrcoloursc{blue}
}
\newcommand\lcsetdemooff{%
\setlcinlinecolour{black}
\setlcinlinerrcolour{black}
\setlcinlinerrcoloursc{black}
}


%vvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvvv

%===== casenamereffull
\newbibmacro{getcasenamereffull}{%
 \usebibmacro{getcasenamefull}%
 \ifboolexpr{%
  not test {\iffieldundef{casenumber}}
  or
  not test {\iffieldundef{reportpage}}
  }%
% {\iftoggle{casenamecomma}{\lcnamerefcommadelim}{\lcnamerefdelim}}%
% {\lcparentchilddelim}%
 {\iftoggle{casenamecomma}{\setunit*{\addcomma\addspace}}{\setunit*{\addspace}}}%true
 {\setunit*{\addspace}}%false
 \usebibmacro{getcaseref}%
 \usebibmacro{getparallelreports}%
% \usebibmacro{getnote}%
%    \finentry
 }
 


%===== casenamerefnofn: no footnote  (i.e., no ibiding)
\newbibmacro{getcasenamerefnofn}{%
 \usebibmacro{getcasename}%
 \ifboolexpr{%
  not test {\iffieldundef{casenumber}}
  or
  not test {\iffieldundef{reportpage}}
  }%
% {\iftoggle{casenamecomma}{\lcnamerefcommadelim}{\lcnamerefdelim}}%
% {\lcparentchilddelim}%
 {\iftoggle{casenamecomma}{\setunit*{\addcomma\addspace}}{\setunit*{\addspace}}}%true
 {\setunit*{\addspace}}%false
 \usebibmacro{getcaseref}%
 \usebibmacro{getparallelreports}%
% \usebibmacro{getnote}%
%    \finentry
 }
 

\newtoggle{usedibid}
\togglefalse{usedibid}



\newcommand{\itemlabelset}[3]{%key+labeltag: if cs exists,, label has been created
%\expandafter\newcommand\csname #1#2\endcsname{#1#2#3}%
\global\csdef{#1#2}{#1#2#3}%
}




%===== casenameref
\newbibmacro{getcasenameref}{%
 \togglefalse{usedibid}%
 \togglefalse{supranoteused}%
 \ifboolexpr{%
 not test {\iffootnote}
% or
% test {\iftoggle{lcibidtracking}}
 }%
 {\usebibmacro{getcasenamerefnofn}}{%if it is a footnote
 \ifboolexpr{%
  test {\ifcitation}
  and
  test {\ifciteibid}
%  and
%  test {\iftoggle{lcibidtracking}}
  }%
  {%
%  \iftoggle{lcibidtracking}{%we're in a command that wants ibid:
  \toggletrue{usedibid}%
  \usebibmacro{getibid}%
%  }{}%
%  \textcolor{red}{AA}%
%%if current postnote = previous postnote, then nothing; else:
%%%\ifdefstrequal{\ibidprevpintemp}{\thefield{postnote}}%
%%%{}%do nothing extra
%%%{%otherwise:
\ifloccit{}%end loccit true
  {%start loccit false
  \iftoggle{ibidpostdelimcomma}%
  {\DeclareDelimFormat{postnotedelim}{\addcomma\space}}%
  {\DeclareDelimFormat{postnotedelim}{\space}}%
%\textcolor{red}{BB}%
  \usebibmacro{postnote}%actual ibid
%%%  \textcolor{red}{xx\ibidprevpintemp}%
  \DeclareDelimFormat{postnotedelim}{\addcomma\space}%restore
}%end loccit false
%%%  \renewcommand{\ibidprevpintemp}{\thefield{postnote}}%
%%%}%
%  \textcolor{red}{BB}%
  }{%
 \ifboolexpr{%
  test {\ifcitation}
  and
  test {\ifciteseen}
  and
  not test {\ifciteibid}
  and
  test {\ifcsdef{\thefield{entrykey}label}}
  }%
  {%\textcolor{red}{AA}%
  %if no shortname, use full name
%%  \iffieldundef{caseshortname}{%start no shortname
%%  \usebibmacro{getcasename}}{%
\usebibmacro{getcaseshortname}
%%}%end no shortname
%  \addspace\mkbibparens{n \ref{cfn:\thefield{entrykey}}%
%  }%
%  \addcomma\addspace\mkbibemph{supra} note \ref{cfn:\thefield{entrykey}}%
  \usebibmacro{getibidsupranote}\toggletrue{supranoteused}%
%  \textcolor{red}{AA}%
  \iftoggle{ibidpostdelimcomma}%
  {\DeclareDelimFormat{postnotedelim}{\addcomma\space}}%
  {\DeclareDelimFormat{postnotedelim}{\space}}%
  \usebibmacro{postnote}%
%  \textcolor{red}{BB}%
  \DeclareDelimFormat{postnotedelim}{\addcomma\space}%restore
  %
  }{%
 \usebibmacro{getcasename}%
% \iftoggle{casenamecomma}{\setunit*{\addcomma\addspace}}{\setunit*{\addspace}}%
 \ifboolexpr{%
  not test {\iffieldundef{casenumber}}
  or
  not test {\iffieldundef{reportpage}}
  }%
% {\iftoggle{casenamecomma}{\lcnamerefcommadelim}{\lcnamerefdelim}}%
% {\lcparentchilddelim}%
 {\iftoggle{casenamecomma}{\setunit*{\addcomma\addspace}}{\setunit*{\addspace}}}%true
 {\setunit*{\addspace}}%false
%%\iffieldundef{mncurl}{\usebibmacro{getcaseref}}{\addspace\printtext[angles]{\usebibmacro{getcaseref}}}%
\iffieldundef{casenumber}{}{\addcomma}%
 \usebibmacro{getcaseref}%
 \usebibmacro{getparallelreports}%
\iffieldundef{url}{}{\addspace\printtext[angles]{\usebibmacro{getcaseurl}}}% 
% \usebibmacro{getnote}%
%    \finentry
 }}%ifciteibid false
 % label
%% \ifcsdef{\thefield{entrykey}label}{\textcolor{red}{XX}}{}%
% \csname\thefield{entrykey}label\endcsname%
%% \thefield{entrykey}label%
 \ifboolexpr{%
  test {\ifcitation}
%  and
%  not test {\ifciteseen}
  and
  not test {\ifciteibid}
  and
  test {\iffootnote}
  and
  not test {\ifcsdef{\thefield{entrykey}label}}
  }%
{\label{cfn:\thefield{entrykey}}%
\itemlabelset{\thefield{entrykey}}{label}{\thefootnote}%tracking
%\textcolor{red}{AA}%
}{}%
%%\ifbibliography{x}{y}%
% \ifboolexpr{%
%  test {\iffootnote}
%  and
%  not test {\ifcsdef{\thefield{entrykey}label}}
%  }%
%{\label{cfn:\thefield{entrykey}}%
%\itemlabelset{\thefield{entrykey}}{label}{\thefootnote}%
%>>\textcolor{red}{AA\csname \thefield{entrykey}label\endcsname}<<%
%}{}%
}}


%bibmacros: statute  ========================
\newbibmacro{getstatutetitle}{%
\iffieldundef{statutetitle}{}%
{\printfield{statutetitle}{%
 \iffieldundef{statutetitleyear}{}{%
  \iftoggle{stattycomma}{\addcomma\addspace}{\addspace}%
  \usebibmacro{getstatutetitleyear}%
  }%
 }%
}%
}


\newbibmacro{getstatutelongtitle}{%
\iffieldundef{statutelongtitle}{}%
{\printfield{statutelongtitle}}%
}


\newbibmacro{getstatuteshorttitle}{%
\iffieldundef{statuteshorttitle}{}%
{\printfield{statuteshorttitle}}%
}


\newbibmacro{getstatutenickname}{%
\iffieldundef{statutenickname}{}%
{\printfield{statutenickname}}%
}


\newbibmacro{getstatutevolume}{%
\iffieldundef{statutevolume}{}%
{\printfield{statutevolume}}%
}


\newbibmacro{getstatutejurisdiction}{%
\iffieldundef{statutejurisdiction}{}%
{\statutejurisdictiondelim\printfield{statutejurisdiction}}%
}


\newbibmacro{getstatuteregnalyear}{%
\iffieldundef{statuteregnalyear}{}%
{\printfield{statuteregnalyear}}%
}


\newbibmacro{getstatutechapter}{%
\iffieldundef{statutechapter}{}%
{\printfield{statutechapter}}%
}


\newbibmacro{getstatuteyear}{%
\iffieldundef{statuteyear}{}%
{\printfield{statuteyear}}%
}


\newbibmacro{getstatutetitleyear}{%
\iffieldundef{statutetitleyear}{}%
{\printfield{statutetitleyear}}%
}

%\ifboolexpr{%
%test {\ifentrytype{statute}}%
%}%
%{\sindex[legislation]{\thefield{statutetitle} \thefield{statutetitleyear}}}%
%{}%

%======================= statutename
\newbibmacro{getstatutename}{%
 \usebibmacro{getstatutetitle}%
% \iffieldundef{statutetitleyear}{%
%  \iffieldundef{statuteyear}{}%
%  {\addcomma\addspace\usebibmacro{getstatuteyear}
%  }%
% }%
% {\statutetitleyeardelim\usebibmacro{getstatutetitleyear}}%
 \iftoggle{statjurisdiction}{\usebibmacro{getstatutejurisdiction}}{}%
}


%======================= statuteref
\newbibmacro{getstatuteref}{%
{%
\iffieldundef{statuteregnalyear}{}{%
\addcomma\addspace\usebibmacro{getstatuteregnalyear}}%
}%
}

%======================= statutenameref
\newbibmacro{getstatutenameref}{%
 \usebibmacro{getstatutename}%
 \usebibmacro{getstatuteref}%
}

\expandafter\newbibmacro{\csname lc/aglc/can/delleg/revfedreg/1\endcsname}{%
\printfield{statutetitle}\addcomma\addspace\printfield{statuteshorttitle}%
\printtext{\addspace}\addcomma\addspace\bibstring{canchapter}~\printfield{statutechapter}
%sindex{} not coded here
}%

%======================= canreg
\newbibmacro{getcanreg}{%
 \usebibmacro{\csname lc/aglc/can/delleg/revfedreg/1\endcsname}%
}




%======================= svjy
\newbibmacro{getsvjy}{%
\iffieldundef{svjy}{}{\printfield{svjy}}%
}
%======================= chapter
\newbibmacro{getchapter}{%
\iffieldundef{chapter}{}{\thefield{chapter}}%
}
%======================= title
\newbibmacro{gettitle}{%
\iffieldundef{title}{}{\printfield{title}}%
}
%======================= canleg
\newbibmacro{getcanleg}{%
%----
\iffieldequalstr{citeref}{canleg}{%
 \printfield{title}\addcomma\addspace\printfield{svjy}%
\addcomma\addspace\bibstring{canchapter}~\thefield{chapter}%
\renewcommand\lcindexaccum{}%empty
\xappto\lcindexaccum{%
\thefield{title}, \thefield{svjy}%
, c \thefield{chapter}%
}%
\ifkeyword{regulations}{\toggletrue{printxregulations}}{\togglefalse{printxregulations}}%
\iftoggle{lcindexing}{\sindex[\lctor]{\lcindexaccum\lcparnumrefsencap}}{}%
\togglefalse{printxregulations}%
\renewcommand\lcindexaccum{}%empty
 }{}%endif
}

%%%\ifkeyword{regulations}{\iftoggle{printregulations}{regulations}{legislation}}{legislation}
% \ifkeyword upsets sindex[] (timing of the loop?), but \iftoggle is OK.






%=============== cs helpers for citeref
\newcommand\lcregstring{Reg}
\newcommand\lcforwardslash{/}
\newcommand\lchyphen{-}

%num/year:
%\newcommand\altaregabbrevdiv{\lcforwardslash}
\newcommand\altaregabbrevjur{Alta}
\newcommand\altaregabbrevreg{\lcregstring}
\newcommand\bcregabbrevjur{BC}
\newcommand\bcregabbrevreg{\lcregstring}
\newcommand\manregabbrevjur{Man}
\newcommand\manregabbrevreg{\lcregstring}
\newcommand\nfldregabbrevjur{Nfld}
\newcommand\nfldregabbrevreg{\lcregstring}
\newcommand\nlrregabbrevjur{NLR}
\newcommand\nlrregabbrevreg{\lcregstring}
\newcommand\nsregabbrevjur{NS}
\newcommand\nsregabbrevreg{\lcregstring}
\newcommand\nwtregabbrevjur{NWT}
\newcommand\nwtregabbrevreg{\lcregstring}
\newcommand\oregabbrevjur{O}
\newcommand\oregabbrevreg{\lcregstring}
\newcommand\saskregabbrevjur{Sask}
\newcommand\saskregabbrevreg{\lcregstring}

%year/num
\newcommand\nbregabbrevjur{NB}
\newcommand\nbregabbrevreg{\lcregstring}
\newcommand\nuregabbrevjur{Nu}
\newcommand\nuregabbrevreg{\lcregstring}
\newcommand\peiregabbrevjur{PEI}
\newcommand\peiregabbrevreg{\lcregstring\ EC}
\newcommand\yoicregabbrevjur{YOIC}
\newcommand\yoicregabbrevreg{\lcregstring}


%bibmacros can take parameters

%Create the regulation's formatted definition: regnum-year:
\newbibmacro{make-reg-num-year-format}[2]{%1=abbrev, 2=num/year delimiter
%#1xxx#2%
%title
\csxdef{#1regfielddelim1}{\addcomma\addspace}%
\csxdef{#1regfield1}{\iffieldundef{title}{}{\printfield{title}\csuse{#1regfielddelim1}}}%
%jurisdiction
\csxdef{#1regfielddelim2}{\addspace}%
\csxdef{#1regfield2}{\csuse{#1regabbrevjur}\csuse{#1regfielddelim2}}%
%regulation label
\csxdef{#1regfielddelim3}{\addspace}%
\csxdef{#1regfield3}{\csuse{#1regabbrevreg}\csuse{#1regfielddelim3}}%
%regulation's format: num-div-...:
\csxdef{#1regabbrevdiv}{#2}%
\csxdef{#1regfielddelim4}{\csuse{#1regabbrevdiv}}%
\csxdef{#1regfield4}{\printfield{regnum}\csuse{#1regfielddelim4}}%
%regulation's format: ...-year:
\csxdef{#1regfielddelim5}{}%
\csxdef{#1regfield5}{\printfield{year}\csuse{#1regfielddelim5}}%
%assembled:
\csxdef{#1reg}{\csuse{#1regfield1}\csuse{#1regfield2}\csuse{#1regfield3}\csuse{#1regfield4}\csuse{#1regfield5}}%
}

%
\newbibmacro{use-regnum-year}[2]{%1=jurisdiction tag, 2=reg-year divider
 \usebibmacro{make-reg-num-year-format}{#1}{#2}%
   \csuse{#1reg}%
}

%---------------
%Create the regulation's formatted definition: year-regnum:
\newbibmacro{make-year-reg-num-format}[2]{%1=abbrev, 2=year/num delimiter
%#1xxx#2%
%title
\csxdef{#1regfielddelim1}{\addcomma\addspace}%
\csxdef{#1regfield1}{\iffieldundef{title}{}{\printfield{title}\csuse{#1regfielddelim1}}}%
%jurisdiction
\csxdef{#1regfielddelim2}{\addspace}%
\csxdef{#1regfield2}{\csuse{#1regabbrevjur}\csuse{#1regfielddelim2}}%
%regulation label
\csxdef{#1regfielddelim3}{\addspace}%
\csxdef{#1regfield3}{\csuse{#1regabbrevreg}\csuse{#1regfielddelim3}}%
%regulation's format: year-div-...:
\csxdef{#1regabbrevdiv}{#2}%
\csxdef{#1regfielddelim4}{\csuse{#1regabbrevdiv}}%
\csxdef{#1regfield4}{\printfield{year}\csuse{#1regfielddelim4}}%
%regulation's format: ...-num:
\csxdef{#1regfielddelim5}{}%
\csxdef{#1regfield5}{\printfield{regnum}\csuse{#1regfielddelim5}}%
%assembled:
\csxdef{#1reg}{\csuse{#1regfield1}\csuse{#1regfield2}\csuse{#1regfield3}\csuse{#1regfield4}\csuse{#1regfield5}}%
}

%
\newbibmacro{use-year-regnum}[2]{%1=jurisdiction tag, 2=reg-year divider
 \usebibmacro{make-year-reg-num-format}{#1}{#2}%
   \csuse{#1reg}%
}

\newbibmacro{use-verbreg}{%
 \printtext{\thefield{regnum}}%
}





%-------------- can-alta-reg
\newbibmacro{can-alta-reg}{%
\csxdef{altaregfielddelim1}{\addcomma\addspace}%
\csxdef{altaregfield1}{\iffieldundef{title}{}{\printfield{title}\csuse{\altaregfielddelim1}}}%
\csxdef{altaregfielddelim2}{\addspace}%
\csxdef{altaregfield2}{\altaregabbrevjur\csuse{altaregfielddelim2}}%
\csxdef{altaregfielddelim3}{\addspace}%
\csxdef{altaregfield3}{\altaregabbrevreg\csuse{altaregfielddelim3}}%
\csxdef{altaregfielddelim4}{\altaregabbrevdiv}%
%regulation's format:
\csxdef{altaregfield4}{\printfield{regnum}\csuse{altaregfielddelim4}}%
\csxdef{altaregfielddelim5}{}%
\csxdef{altaregfield5}{\printfield{year}\csuse{altaregfielddelim5}}%
\csxdef{altareg}{\csuse{altaregfield1}\csuse{altaregfield2}\csuse{altaregfield3}\csuse{altaregfield4}\csuse{altaregfield5}}%
\csuse{altareg}%
\usebibmacro{make-reg-num-year-format}{A}{B}
}







%======================= canreg2
\newbibmacro{getcanreg2}{%
%----
\iffieldequalstr{citeref}{crcreg}{%
 \printfield{title}\addcomma\addspace CRC%
\addcomma\addspace\bibstring{canchapter}\addspace\thefield{chapter}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\thefield{title}, CRC, c \thefield{chapter}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{sorreg}{%
 \printfield{title}\addcomma\addspace SOR%
/\printfield{year}-\printfield{regnum}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\thefield{title}, SOR/\thefield{year}-\thefield{regnum}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{altareg}{%
 \usebibmacro{use-regnum-year}{alta}{\lcforwardslash}%
% \usebibmacro{can-alta-reg}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% Alta Reg%
%\addspace\printfield{regnum}/\printfield{year}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }Alta Reg \thefield{regnum}/\thefield{year}\lcparnumrefsencap}}{} %
 }{}%endif
%----
\iffieldequalstr{citeref}{bcreg}{%
 \usebibmacro{use-regnum-year}{bc}{\lcforwardslash}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% BC Reg%
%\addspace\printfield{regnum}/\printfield{year}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }BC Reg \thefield{regnum}/\thefield{year}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{manreg}{%
 \usebibmacro{use-regnum-year}{man}{\lcforwardslash}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% Man Reg%
%\addspace\printfield{regnum}/\printfield{year}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }Man Reg \thefield{regnum}/\thefield{year}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{nbreg}{%
 \usebibmacro{use-year-regnum}{nb}{\lchyphen}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% NB Reg%
%\addspace\printfield{year}-\printfield{regnum}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }NB Reg \thefield{year}-\thefield{regnum}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{nfldreg}{%
 \usebibmacro{use-regnum-year}{nfld}{\lcforwardslash}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% Nfld Reg%
%\addspace\printfield{regnum}/\printfield{year}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }Nfld \thefield{regnum}/\thefield{year}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{nlrreg}{%
 \usebibmacro{use-regnum-year}{nlr}{\lcforwardslash}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% NLR%
%\addspace\printfield{regnum}/\printfield{year}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }NLR \thefield{regnum}/\thefield{year}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{nwtreg}{%
 \usebibmacro{use-regnum-year}{nwt}{\lchyphen}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% NWT Reg%
%\addspace\printfield{regnum}-\printfield{year}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }NWT Reg \thefield{regnum}-\thefield{year}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{nsreg}{%
 \usebibmacro{use-regnum-year}{ns}{\lcforwardslash}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% NS Reg%
%\addspace\printfield{regnum}/\printfield{year}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }NS Reg \thefield{regnum}/\thefield{year}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{nureg}{%
 \usebibmacro{use-year-regnum}{nu}{\lchyphen}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% Nu Reg%
%\addspace\printfield{regnum}-\printfield{year}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }Nu Reg \thefield{regnum}-\thefield{year}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{oreg}{%
 \usebibmacro{use-regnum-year}{o}{\lcforwardslash}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% O Reg%
%\addspace\printfield{regnum}/\printfield{year}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }O Reg \thefield{regnum}/\thefield{year}\lcparnumrefsencap}}{} %
 }{}%endif
%----
\iffieldequalstr{citeref}{peireg}{%
 \usebibmacro{use-year-regnum}{pei}{\lchyphen}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% PEI Reg%
%\addspace EC\printfield{year}-\printfield{regnum}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }PEI Reg \thefield{year}-\thefield{regnum}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{ocreg}{%
   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
 OC%
\addspace\printfield{regnum}-\printfield{year}%
\addcomma\addspace\printfield{fulldate}%
\addcomma\addspace GOQ\addspace\printfield{gazette}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }OC Reg \thefield{regnum}-\thefield{year}%
 , \thefield{fulldate}, GOQ \thefield{gazette}%
\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{saskreg}{%
 \usebibmacro{use-regnum-year}{sask}{\lcforwardslash}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% Sask Reg%
%\addspace\printfield{regnum}/\printfield{year}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }Sask Reg \thefield{regnum}/\thefield{year}\lcparnumrefsencap}}{}%
 }{}%endif
%----
\iffieldequalstr{citeref}{yoicreg}{%
 \usebibmacro{use-year-regnum}{yoic}{\lcforwardslash}%
%   \iffieldundef{title}{}{\printfield{title}\addcomma\addspace}%
% YOIC Reg%
%\addspace\printfield{year}/\printfield{regnum}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }YOIC Reg \thefield{year}/\thefield{regnum}\lcparnumrefsencap}}{}%
 }{}%endif
%----user-defined
\iffieldequalstr{citeref}{verbreg}{%
 \usebibmacro{use-verbreg}%
\iftoggle{lcindexing}{%
 \sindex[\iftoggle{printregulations}{regulations}{legislation}]{\iffieldundef{title}{}{\thefield{title}, }\thefield{regnum}\lcparnumrefsencap}}{}%
 }{}%endif
}


%\newbibmacro{assigncaseprenote}{%
% \ifcase\thereftypemode \or%
% \usebibmacro{prenote}%inline
% \or% prenote goes in the footnote for this variation, along with the case ref.
% \or% prenote is already in the footnote
% \fi%
%}

%\newbibmacro{assigncasepostnote}{%
% \ifcase\thereftypemode \or%
% \usebibmacro{postnote}% inline
% \or% postnote is already in the footnote
% \or% postnote is already in the footnote
% \fi%
%}


%\newbibmacro{assigncaseitem}{%
% \ifcase\thereftypemode%
% \or\usebibmacro{getcasenameref}%
% \or\usebibmacro{getcasename}\footnote{\usebibmacro{prenote}\usebibmacro{getcaseref}\usebibmacro{postnote}}%
% \or\unspace\footnote{\usebibmacro{prenote}\usebibmacro{getcasenameref}\usebibmacro{postnote}}%
% \fi%
%}


%% \ifboolexpr{%
%% test {\ifentrytype{@case}}%
%% }%
%% {%
%% \usebibmacro{assigncaseitem}
%% }%
%% {%
%%%%%%%  \autocite[\usebibmacro{prenote}][\usebibmacro{postnote}]{#1}%
%% }%






%%%======================= label the footnote
%%\newbibmacro{setfnlabel}{%
%%%%\iffootnote
%%%%    {%
%%%%%    \ifciteseen{xseenx}{\printtext{\thefield{entrykey}}\protect\label{f\thefield{entrykey}}}%
%%    \ifnumequal{\value{citecounter}}{1}{xfirstx}{\thecitecounter yyotheryy\protect\label{f\thefield{entrykey}}}
%%%%     }%
%%%%    {}%
%%}

%%%\iffootnote
%%%    {%
%%%    \ifciteseen{}{\csxdef{f\thefield{entrykey}}{\the\value{instcount}}%
%%%%     \label{f\the\value{instcount}}}%
%%%     \label{f\thefield{entrykey}}}%
%%%     }
%%%    {}%
%%%}




%==================

%index accumulator for related reports
\newcommand\lcindexaccum{}



%\sindex[legislation]{\thefield{statutetitle} \thefield{statutetitleyear}}%


\newbibmacro{mnc:postnote}{%
 \ifboolexpr{%
  not test {\iffieldundef{casenumber}}%if there is MNC
  and
  test {\iftoggle{pinpointaftermnc}}%and pinpoint after MNC
  }%
 % print the postnote after the MNC
 {\usebibmacro{postnote}}%
 % otherwise don't print anything after the MNC postion
 {}%
}


\newbibmacro{notmnc:postnote}{%
  \ifboolexpr{%
%  test {\ifcitation}
%  and
%  test {\ifciteibid}
%  and
%  test {\ifciteseen}
%  and
%  test {\iffootnote}
test {\iftoggle{usedibid}}
  }%
{}% ibid tracker works perfectly
{%
 \ifboolexpr{%
  not test {\iffieldundef{casenumber}}%if there is MNC
  and
  test {\iftoggle{pinpointaftermnc}}%and pinpoint after MNC
  }%
%  don't print anything in the postnote position
 {}%
 % otherwise print the postnote in the postnote postion
% if it is not an ibid/supra note reference
 {%
\iftoggle{supranoteused}{}{%
%\textcolor{red}{CC}%
%\printfield[emph]{postnote}%
\usebibmacro{postnote}%
%\textcolor{red}{DD}%
}%
}%
 }%
}

\newbibmacro*{nocomma:postnote}{%
  \iffieldundef{postnote}
    {}
    {\setunit{\printdelim{postnotedelim}}%
     \printfield{postnote}}}


\ExplSyntaxOn

\tl_new:N \l_myscriptname_tl
\NewDocumentCommand\getblcommand { m }
{
\tl_set:Nx \l_myscriptname_tl { #1 }

\regex_replace_all:nnN 
{ given\-family } 
{ 
\c{DeclareNameAlias} [book]
\cB\{ author\cE\}
\cB\{ given-family \cE\}
} 
\l_myscriptname_tl

%bibmacros - encapsulated:
\regex_replace_all:nnN { :getljarticlejournaltitle } { :get001 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticleyear:plain } { :get002 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatutejurisdiction } { :get003 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticleauthorsc } { :get004 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatuteregnalyear } { :get005 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatuteshorttitle } { :get006 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatutelongtitle } { :get007 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatutetitleyear } { :get008 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcasenamereffull } { :get009 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcasenamerefnofn } { :get010 } \l_myscriptname_tl
\regex_replace_all:nnN { :getparallelreports } { :get011 } \l_myscriptname_tl
\regex_replace_all:nnN { :lclgetlegalrefstat } { :get012 } \l_myscriptname_tl
\regex_replace_all:nnN { :lclgetlegalrefcase } { :get013 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticleauthor } { :get014 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticlequotes } { :get015 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticlevolume } { :get016 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatutenickname } { :get017 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticle:ibid } { :get018 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticletitle } { :get019 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljartshortname } { :get020 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatutechapter } { :get021 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatutenameref } { :get022 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcaseshortname } { :get023 } \l_myscriptname_tl
\regex_replace_all:nnN { :getibidsupranote } { :get024 } \l_myscriptname_tl
\regex_replace_all:nnN { :lclgetlegaltitle } { :get025 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticlepage } { :get026 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticleyear } { :get027 } \l_myscriptname_tl
\regex_replace_all:nnN { :getlcdacasefield } { :get028 } \l_myscriptname_tl
\regex_replace_all:nnN { :getnote:noparens } { :get029 } \l_myscriptname_tl
\regex_replace_all:nnN { :nocomma:postnote } { :get030 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatutevolume } { :get031 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcasenamefull } { :get032 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcasenickname } { :get033 } \l_myscriptname_tl
\regex_replace_all:nnN { :getreportseries } { :get034 } \l_myscriptname_tl
\regex_replace_all:nnN { :getreportvolume } { :get035 } \l_myscriptname_tl
\regex_replace_all:nnN { :lclgetlegalfull } { :get036 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticleurl } { :get037 } \l_myscriptname_tl
\regex_replace_all:nnN { :getlcdallfields } { :get038 } \l_myscriptname_tl
\regex_replace_all:nnN { :notmnc:postnote } { :get039 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatutetitle } { :get040 } \l_myscriptname_tl
\regex_replace_all:nnN { :getaonbedition } { :get041 } \l_myscriptname_tl
\regex_replace_all:nnN { :geteditionyear } { :get042 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcasenameref } { :get043 } \l_myscriptname_tl
\regex_replace_all:nnN { :getpartynamesa } { :get044 } \l_myscriptname_tl
\regex_replace_all:nnN { :getpartynamesb } { :get045 } \l_myscriptname_tl
\regex_replace_all:nnN { :lclgetlegalref } { :get046 } \l_myscriptname_tl
\regex_replace_all:nnN { :getlcepigraphp } { :get047 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatutename } { :get048 } \l_myscriptname_tl
\regex_replace_all:nnN { :getstatuteyear } { :get049 } \l_myscriptname_tl
\regex_replace_all:nnN { :getshorttitle } { :get050 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcasenumber } { :get051 } \l_myscriptname_tl
\regex_replace_all:nnN { :getreportpage } { :get052 } \l_myscriptname_tl
\regex_replace_all:nnN { :getreportyear } { :get053 } \l_myscriptname_tl
\regex_replace_all:nnN { :getnote:plain } { :get054 } \l_myscriptname_tl
\regex_replace_all:nnN { :getlcepigraph } { :get055 } \l_myscriptname_tl
\regex_replace_all:nnN { :getaonbtitle } { :get056 } \l_myscriptname_tl
\regex_replace_all:nnN { :getlastnames } { :get057 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcourtname } { :get058 } \l_myscriptname_tl
\regex_replace_all:nnN { :getibidsupra } { :get059 } \l_myscriptname_tl
\regex_replace_all:nnN { :getreportref } { :get060 } \l_myscriptname_tl
\regex_replace_all:nnN { :getljarticle } { :get061 } \l_myscriptname_tl
\regex_replace_all:nnN { :getlcdcasehl } { :get062 } \l_myscriptname_tl
\regex_replace_all:nnN { :mnc:postnote } { :get063 } \l_myscriptname_tl
\regex_replace_all:nnN { :delim:choice } { :get064 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcasename } { :get065 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcaseyear } { :get066 } \l_myscriptname_tl
\regex_replace_all:nnN { :getpartysep } { :get067 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcaseproc } { :get068 } \l_myscriptname_tl
\regex_replace_all:nnN { :getedition } { :get069 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcaseref } { :get070 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcaseurl } { :get071 } \l_myscriptname_tl
\regex_replace_all:nnN { :getlcdcase } { :get072 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcanreg2 } { :get073 } \l_myscriptname_tl
\regex_replace_all:nnN { :getciteref } { :get074 } \l_myscriptname_tl
\regex_replace_all:nnN { :getchapter } { :get075 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcasesn } { :get076 } \l_myscriptname_tl
\regex_replace_all:nnN { :qqcitebox } { :get077 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcanleg } { :get078 } \l_myscriptname_tl
\regex_replace_all:nnN { :getcanreg } { :get079 } \l_myscriptname_tl
\regex_replace_all:nnN { :gettitle } { :get080 } \l_myscriptname_tl
\regex_replace_all:nnN { :quotebox } { :get081 } \l_myscriptname_tl
\regex_replace_all:nnN { :getibid } { :get082 } \l_myscriptname_tl
\regex_replace_all:nnN { :getproc } { :get083 } \l_myscriptname_tl
\regex_replace_all:nnN { :getnote } { :get084 } \l_myscriptname_tl
\regex_replace_all:nnN { :getsvjy } { :get085 } \l_myscriptname_tl


%formatting
\regex_replace_all:nnN 
{ itcolon } 
{ 
\c{textit} \cB\{ \c{addcolon} \cE\}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ isubtitle } 
{ 
isubxxx
} 
\l_myscriptname_tl


\regex_replace_all:nnN 
{ subtitle } 
{ 
subxxx
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ emdash } 
{ 
\c{addspace}---\c{addspace}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ endash } 
{ 
\c{addspace}--\c{addspace}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ dot } 
{ 
\c{adddot}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ comma } 
{ 
\c{addcomma}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ colon } 
{ 
\c{addcolon}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ space } 
{ 
\c{addspace}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ lparen } 
{ 
(
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ rparen } 
{ 
)
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ lbrace } 
{ 
\{
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ rbrace } 
{ 
\}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ name } 
{ 
\c{printnames} \cB\{ author \cE\}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ title } 
{ 
\c{printfield} \cB\{ title \cE\}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ edition } 
{ 
\c{printfield} \cB\{ edition \cE\}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ location } 
{ 
\c{printlist} \cB\{ location \cE\}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ publisher } 
{ 
\c{printlist} \cB\{ publisher \cE\}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ year } 
{ 
\c{thefield} \cB\{ year \cE\}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ volume } 
{ 
\c{printfield} \cB\{ volume \cE\}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ note } 
{ 
\c{thefield} \cB\{ note \cE\}
} 
\l_myscriptname_tl


\regex_replace_all:nnN 
{ isubxxx } 
{ 
\c{printfield} [emph] \cB\{ subtitle \cE\}
} 
\l_myscriptname_tl

\regex_replace_all:nnN 
{ subxxx } 
{ 
\c{printfield} \cB\{ subtitle \cE\}
} 
\l_myscriptname_tl

%bibmacros - un-encapsulated:
\regex_replace_all:nnN { :get001 } { \c{usebibmacro} \cB\{ getljarticlejournaltitle \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get002 } { \c{usebibmacro} \cB\{ getljarticleyear:plain \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get003 } { \c{usebibmacro} \cB\{ getstatutejurisdiction \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get004 } { \c{usebibmacro} \cB\{ getljarticleauthorsc \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get005 } { \c{usebibmacro} \cB\{ getstatuteregnalyear \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get006 } { \c{usebibmacro} \cB\{ getstatuteshorttitle \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get007 } { \c{usebibmacro} \cB\{ getstatutelongtitle \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get008 } { \c{usebibmacro} \cB\{ getstatutetitleyear \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get009 } { \c{usebibmacro} \cB\{ getcasenamereffull \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get010 } { \c{usebibmacro} \cB\{ getcasenamerefnofn \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get011 } { \c{usebibmacro} \cB\{ getparallelreports \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get012 } { \c{usebibmacro} \cB\{ lclgetlegalrefstat \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get013 } { \c{usebibmacro} \cB\{ lclgetlegalrefcase \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get014 } { \c{usebibmacro} \cB\{ getljarticleauthor \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get015 } { \c{usebibmacro} \cB\{ getljarticlequotes \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get016 } { \c{usebibmacro} \cB\{ getljarticlevolume \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get017 } { \c{usebibmacro} \cB\{ getstatutenickname \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get018 } { \c{usebibmacro} \cB\{ getljarticle:ibid \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get019 } { \c{usebibmacro} \cB\{ getljarticletitle \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get020 } { \c{usebibmacro} \cB\{ getljartshortname \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get021 } { \c{usebibmacro} \cB\{ getstatutechapter \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get022 } { \c{usebibmacro} \cB\{ getstatutenameref \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get023 } { \c{usebibmacro} \cB\{ getcaseshortname \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get024 } { \c{usebibmacro} \cB\{ getibidsupranote \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get025 } { \c{usebibmacro} \cB\{ lclgetlegaltitle \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get026 } { \c{usebibmacro} \cB\{ getljarticlepage \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get027 } { \c{usebibmacro} \cB\{ getljarticleyear \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get028 } { \c{usebibmacro} \cB\{ getlcdacasefield \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get029 } { \c{usebibmacro} \cB\{ getnote:noparens \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get030 } { \c{usebibmacro} \cB\{ nocomma:postnote \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get031 } { \c{usebibmacro} \cB\{ getstatutevolume \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get032 } { \c{usebibmacro} \cB\{ getcasenamefull \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get033 } { \c{usebibmacro} \cB\{ getcasenickname \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get034 } { \c{usebibmacro} \cB\{ getreportseries \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get035 } { \c{usebibmacro} \cB\{ getreportvolume \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get036 } { \c{usebibmacro} \cB\{ lclgetlegalfull \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get037 } { \c{usebibmacro} \cB\{ getljarticleurl \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get038 } { \c{usebibmacro} \cB\{ getlcdallfields \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get039 } { \c{usebibmacro} \cB\{ notmnc:postnote \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get040 } { \c{usebibmacro} \cB\{ getstatutetitle \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get041 } { \c{usebibmacro} \cB\{ getaonbedition \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get042 } { \c{usebibmacro} \cB\{ geteditionyear \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get043 } { \c{usebibmacro} \cB\{ getcasenameref \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get044 } { \c{usebibmacro} \cB\{ getpartynamesa \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get045 } { \c{usebibmacro} \cB\{ getpartynamesb \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get046 } { \c{usebibmacro} \cB\{ lclgetlegalref \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get047 } { \c{usebibmacro} \cB\{ getlcepigraphp \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get048 } { \c{usebibmacro} \cB\{ getstatutename \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get049 } { \c{usebibmacro} \cB\{ getstatuteyear \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get050 } { \c{usebibmacro} \cB\{ getshorttitle \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get051 } { \c{usebibmacro} \cB\{ getcasenumber \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get052 } { \c{usebibmacro} \cB\{ getreportpage \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get053 } { \c{usebibmacro} \cB\{ getreportyear \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get054 } { \c{usebibmacro} \cB\{ getnote:plain \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get055 } { \c{usebibmacro} \cB\{ getlcepigraph \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get056 } { \c{usebibmacro} \cB\{ getaonbtitle \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get057 } { \c{usebibmacro} \cB\{ getlastnames \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get058 } { \c{usebibmacro} \cB\{ getcourtname \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get059 } { \c{usebibmacro} \cB\{ getibidsupra \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get060 } { \c{usebibmacro} \cB\{ getreportref \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get061 } { \c{usebibmacro} \cB\{ getljarticle \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get062 } { \c{usebibmacro} \cB\{ getlcdcasehl \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get063 } { \c{usebibmacro} \cB\{ mnc:postnote \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get064 } { \c{usebibmacro} \cB\{ delim:choice \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get065 } { \c{usebibmacro} \cB\{ getcasename \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get066 } { \c{usebibmacro} \cB\{ getcaseyear \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get067 } { \c{usebibmacro} \cB\{ getpartysep \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get068 } { \c{usebibmacro} \cB\{ getcaseproc \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get069 } { \c{usebibmacro} \cB\{ getedition \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get070 } { \c{usebibmacro} \cB\{ getcaseref \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get071 } { \c{usebibmacro} \cB\{ getcaseurl \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get072 } { \c{usebibmacro} \cB\{ getlcdcase \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get073 } { \c{usebibmacro} \cB\{ getcanreg2 \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get074 } { \c{usebibmacro} \cB\{ getciteref \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get075 } { \c{usebibmacro} \cB\{ getchapter \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get076 } { \c{usebibmacro} \cB\{ getcasesn \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get077 } { \c{usebibmacro} \cB\{ qqcitebox \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get078 } { \c{usebibmacro} \cB\{ getcanleg \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get079 } { \c{usebibmacro} \cB\{ getcanreg \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get080 } { \c{usebibmacro} \cB\{ gettitle \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get081 } { \c{usebibmacro} \cB\{ quotebox \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get082 } { \c{usebibmacro} \cB\{ getibid \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get083 } { \c{usebibmacro} \cB\{ getproc \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get084 } { \c{usebibmacro} \cB\{ getnote \cE\} } \l_myscriptname_tl
\regex_replace_all:nnN { :get085 } { \c{usebibmacro} \cB\{ getsvjy \cE\} } \l_myscriptname_tl



%output

\tl_use:N \l_myscriptname_tl
}

\NewDocumentCommand  { \lcqquotationmdf } { m } {

\begin{mdframed}
\lcqquotation{#1}
\end{mdframed}

}


\ExplSyntaxOff

\newcommand*{\lcsetseq}[1]{%
x#1;;
\ifstrequal{#1}{dot}{\adddot}{}
\ifstrequal{#1}{comma}{\addcomma}{}
\ifstrequal{#1}{colon}{\addcolon}{}
\ifstrequal{#1}{space}{\addspace}{}
\ifstrequal{#1}{lparen}{\{}{}
\ifstrequal{#1}{rparen}{\}}{}
\ifstrequal{#1}{name}{\printnames{author}}{}
\ifstrequal{#1}{title}{\printfield{title}}{}
\ifstrequal{#1}{location}{\printlist{location}}{}
\ifstrequal{#1}{publisher}{\printfield{publisher}}{}
}%


\DeclareFieldFormat{thumbnail}{\insertbibimage{#1}}

\DeclareCiteCommand{lcimage}%
{\usebibmacro{prenote}}%
{%
  \iffieldundef{thumbnail}{}%
  {\printfield{thumbnail}}%
}%
{}%
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%



\DeclareCiteCommand{qcitetextnoqq}%
{\usebibmacro{prenote}}%
{%
\printfield[plain]{quotetext}%
}%
{}%
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%


\DeclareCiteCommand{qcitetext}%
{\usebibmacro{prenote}}%
{%
\printfield{quotetext}%
}%
{}%
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%




\DeclareCiteCommand{qcite}%
{\usebibmacro{prenote}}%
{%
\printfield{quotetext}%
\addspace\textemdash\addspace{%
\DeclareNameAlias[quote]{author}{given-family}%
\printnames{author}%
}%
%\printnames{editor}%
\addcomma\addspace\printfield{title}%
}%
{%
\multicitedelim%
}%
{\iffieldundef{postnote}{}{\addcomma\addspace\usebibmacro{postnote}\adddot}%
 \usebibmacro{getann:noter:comm}%
 }


\newcommand\qqcitecasewidth{0.48}

\newbibmacro{quotebox}[1][]{%
\parbox{\iffieldundef{partya}{0.4}{\qqcitecasewidth}\textwidth}{\raggedright%
%\thefield{related}xxx
\printfield{quotetext}\par%
\smallskip\hrule\par%
\medskip{%
\DeclareNameAlias[quote]{author}{given-family}%
\iffieldundef{partya}{\hfill}{}\textemdash\addspace\printnames{author}%
}\ifnameundef{author}{}{\par}%
%\printnames{editor}%
\printfield{title}%if there is one
\iffieldundef{partya}{}{{\small\usebibmacro{getcasenameref}}}%if it's a case
\iffieldundef{casestatus}{}{\printtext{\addcomma\addspace\printfield{casestatus}}}%
\iffieldundef{courtfullname}{}{\printtext{\addcomma\addspace\printfield{courtfullname}}}%
\iffieldundef{postnote}{}{%
\iffieldundef{partya}{%
\addcomma\addspace\usebibmacro{postnote}}{}%
\adddot}%
\iffieldundef{related}{}{\addsemicolon\addspace\usebibmacro{lcrelated}}%
#1% possible footnotemark
}%end parbox
}
\newbibmacro{qqcitebox}{%
\hfill\colorbox{blue!12!green!8}{\usebibmacro{quotebox}}
}


%formatted epigraph quote:
\DeclareCiteCommand{qqcite}%
{\usebibmacro{prenote}}%
{%
\usebibmacro{qqcitebox}%
}%
{%
%\multicitedelim%
}%
{%
 \usebibmacro{getann:noter:comm}%
 }





%extensive quote:
\DeclareCiteCommand{lcqquotation}%
{\usebibmacro{prenote}}%
{%
\iftoggle{useqquotation}{\usebibmacro{qquotation}}{}%
%\usebibmacro{qquotation}%
}%
{%
%\multicitedelim%
}%
{%
 \usebibmacro{getann:noter:comm}%
 }




%formatted epigraph quote: with footnote mark
\DeclareCiteCommand{qqcitefn}%
{\usebibmacro{prenote}}%
{%
\hfill\colorbox{blue!12!green!8}{\usebibmacro{quotebox}[\footnotemark]}
}%
{%
%\multicitedelim%
}%
{%
 \usebibmacro{getann:noter:comm}%
 }

\DeclareCiteCommand{ycite}%
{\usebibmacro{prenote}}%
{%
\iffieldundef{yoptions}{}{\forcsvfield{\getblcommand}{yoptions}}%
}%
{%
\multicitedelim%
}%
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }



\DeclareCiteCommand{lcycite}%
{}%
{%
\iffieldundef{prenote}{}{\forcsvfield{\getblcommand}{prenote}}%
}%
{%
%\multicitedelim%
}%
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }



%aglc -------------------
\DeclareFieldFormat[case]{aglc:case:item:titlepart:partya:format}{\mkbibitalic{#1}}
\DeclareFieldFormat[case]{aglc:case:item:titlepart:partya:delim}{\addspace}
\DeclareFieldFormat[case]{aglc:case:item:titlepart:partysep:format}{\mkbibitalic{#1}}
\DeclareFieldFormat[case]{aglc:case:item:titlepart:partysep:delim}{\addspace}
\DeclareFieldFormat[case]{aglc:case:item:titlepart:partyb:format}{\mkbibitalic{#1}}
\DeclareFieldFormat[case]{aglc:case:item:titlepart:partyb:delim}{\addspace}
%-
\DeclareFieldFormat[case]{aglc:case:item:refmnc:year:format}{\mkbibbrackets{#1}}
\DeclareFieldFormat[case]{aglc:case:item:refmnc:year:delim}{\addspace}
\DeclareFieldFormat[case]{aglc:case:item:refmnc:courtname:format}{#1}
\DeclareFieldFormat[case]{aglc:case:item:refmnc:courtname:delim}{\addspace}
\DeclareFieldFormat[case]{aglc:case:item:refmnc:casenumber:format}{#1}
\DeclareFieldFormat[case]{aglc:case:item:refmnc:casenumber:delim}{}
%
\DeclareFieldFormat[case]{aglc:case:item:report:reportyear:format}{\iffieldundef{volyearneeded}{\mkbibparens{#1}}{\mkbibbrackets{#1}}}
\DeclareFieldFormat[case]{aglc:case:item:report:reportyear:delim}{\addspace}
\DeclareFieldFormat[case]{aglc:case:item:report:reportvolume:format}{#1}
\DeclareFieldFormat[case]{aglc:case:item:report:reportvolume:delim}{\addspace}
\DeclareFieldFormat[case]{aglc:case:item:report:reportseries:format}{#1}
\DeclareFieldFormat[case]{aglc:case:item:report:reportseries:delim}{\addspace}
\DeclareFieldFormat[case]{aglc:case:item:report:reportpage:format}{#1}
\DeclareFieldFormat[case]{aglc:case:item:report:reportpage:delim}{}
\DeclareFieldFormat[case]{aglc:case:item:postnoteprelim}{\addcomma}%


%mcgill -------------------
\DeclareFieldFormat[case]{mcgill:case:item:titlepart:partya:format}{\mkbibitalic{#1}}
\DeclareFieldFormat[case]{mcgill:case:item:titlepart:partya:delim}{\addspace}
\DeclareFieldFormat[case]{mcgill:case:item:titlepart:partysep:format}{\mkbibitalic{#1}}
\DeclareFieldFormat[case]{mcgill:case:item:titlepart:partysep:delim}{\addspace}
\DeclareFieldFormat[case]{mcgill:case:item:titlepart:partyb:format}{\mkbibitalic{#1}}
\DeclareFieldFormat[case]{mcgill:case:item:titlepart:partyb:delim}{\addcomma\addspace}
%-
\DeclareFieldFormat[case]{mcgill:case:item:refmnc:year:format}{#1}
\DeclareFieldFormat[case]{mcgill:case:item:refmnc:year:delim}{\addspace}
\DeclareFieldFormat[case]{mcgill:case:item:refmnc:courtname:format}{#1}
\DeclareFieldFormat[case]{mcgill:case:item:refmnc:courtname:delim}{\addspace}
\DeclareFieldFormat[case]{mcgill:case:item:refmnc:casenumber:format}{#1}
\DeclareFieldFormat[case]{mcgill:case:item:refmnc:casenumber:delim}{}
%
\DeclareFieldFormat[case]{mcgill:case:item:report:reportyear:format}{#1}
\DeclareFieldFormat[case]{mcgill:case:item:report:reportyear:delim}{\addspace}
\DeclareFieldFormat[case]{mcgill:case:item:report:reportvolume:format}{#1}
\DeclareFieldFormat[case]{mcgill:case:item:report:reportvolume:delim}{\addspace}
\DeclareFieldFormat[case]{mcgill:case:item:report:reportseries:format}{#1}
\DeclareFieldFormat[case]{mcgill:case:item:report:reportseries:delim}{\addspace}
\DeclareFieldFormat[case]{mcgill:case:item:report:reportpage:format}{#1}
\DeclareFieldFormat[case]{mcgill:case:item:report:reportpage:delim}{}
\DeclareFieldFormat[case]{mcgill:case:item:postnoteprelim}{}%




%=============
\newcommand\mcdelim{}

\newbibmacro{set:multidelim}{%
 \ifboolexpr{%
  not test {\iffirstcitekey}%if 2nd+ cite
  and
  not test {\iffieldundef{prenote}}%and a prenote
  }%
{%
%\renewcommand\mcdelim{\multicitedelim}
%\renewcommand{\multicitedelim}{\adddot\addspace}%
\adddot\addspace
}%
{%
%\renewcommand{\multicitedelim}{\addsemicolon\addspace}%
}%
}


\newbibmacro{yy:case:partya}{%
%if new sentence in multicites:
\iffieldundef{partya}{}{%
\printfield[\lguide :case:item:titlepart:partya:format]{partya}%
\printfield[\lguide :case:item:titlepart:partya:delim]{partya}%
}%
}

\newbibmacro{yy:case:partyb}{%
\iffieldundef{partyb}{}{%
\iffieldundef{partysep}{%default partysep
\printtext[\lguide :case:item:titlepart:partysep:format]{\bibstring{versus}\addspace}%
}{%
\printfield[\lguide :case:item:titlepart:partysep:format]{partysep}%
\printfield[\lguide :case:item:titlepart:partysep:delim]{partysep}%
}%end partysep
\printfield[\lguide :case:item:titlepart:partyb:format]{partyb}%
\printfield[\lguide :case:item:titlepart:partyb:delim]{partyb}%
}%end partyb
}


\newbibmacro{yycore:mnc:caseyear}{%
\printfield[\lguide :case:item:refmnc:year:format]{caseyear}%
\printfield[\lguide :case:item:refmnc:year:delim]{caseyear}%
}

\newbibmacro{yycore:mnc:courtname}{%
\printfield[\lguide :case:item:refmnc:courtname:format]{
courtname}%
\printfield[\lguide :case:item:refmnc:courtname:delim]{courtname}%}%
}

\newbibmacro{yycore:mnc:casenumber}{%
\printfield[\lguide :case:item:refmnc:casenumber:format]{casenumber}%
\printfield[\lguide :case:item:refmnc:casenumber:delim]{casenumber}%
}




\newbibmacro{yy:case:mnc}{%
\iffieldundef{casenumber}{}{%
\usebibmacro{yycore:mnc:seq}%
}%end mnc
}


\newbibmacro{yy:case:report}{%
\iffieldundef{reportpage}{}{%
\usebibmacro{yycore:report:seq}%
}%end report
}


\newbibmacro{yycore:report:reportyear}{%
\printfield[\lguide :case:item:report:reportyear:format]{reportyear}%
\printfield[\lguide :case:item:report:reportyear:delim]{reportyear}%
}
\newbibmacro{yycore:report:reportvolume}{%
\printfield[\lguide :case:item:report:reportvolume:format]{reportvolume}%
\printfield[\lguide :case:item:report:reportvolume:delim]{reportvolume}%
}
\newbibmacro{yycore:report:reportseries}{%
\printfield[\lguide :case:item:report:reportseries:format]{reportseries}%
\printfield[\lguide :case:item:report:reportseries:delim]{reportseries}%
}
\newbibmacro{yycore:report:reportpage}{%
\printfield[\lguide :case:item:report:reportpage:format]{reportpage}%
\printfield[\lguide :case:item:report:reportpage:delim]{reportpage}%
}


\newbibmacro{yycore:report:seq}{%
\usebibmacro{yycore:report:reportyear}%
\usebibmacro{yycore:report:reportvolume}%
\usebibmacro{yycore:report:reportseries}%
\usebibmacro{yycore:report:reportpage}%
}



\newbibmacro{yycore:mnc:seq}{%
\usebibmacro{yycore:mnc:caseyear}%
\usebibmacro{yycore:mnc:courtname}%
\usebibmacro{yycore:mnc:casenumber}%
}

\newbibmacro{yycore:seq}{%
\usebibmacro{yy:case:partya}%
\usebibmacro{yy:case:partyb}%
\usebibmacro{yy:case:mnc}%
\usebibmacro{yy:case:report}%
}

\newbibmacro{yycore:postnoteprelim}{%
\iffieldundef{postnote}{}{%
\iflastcitekey{%
\printtext[\lguide :case:item:postnoteprelim]{\usebibmacro{postnote}}%
}{}%
}%
}

\newbibmacro{yycore}{%
%\usebibmacro{set:multidelim}%
\usebibmacro{yycore:seq}%
\usebibmacro{yycore:postnoteprelim}%
}


\newcommand\lguide{}

\DeclareCiteCommand{yycite}%
{\usebibmacro{prenote}}%
{%
\usebibmacro{yycore}%
}%
{%
\multicitedelim%
}%
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }



\DeclareCiteCommand{yyfootcite}[\mkbibfootnote]%
{\usebibmacro{prenote}}%
{%
\usebibmacro{yycore}%
}%
{%
\multicitedelim%
}%
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }


\DeclareCiteCommand{yyparencite}[\mkbibparens]%
{\usebibmacro{prenote}}%
{%
\usebibmacro{yycore}%
}%
{%
\multicitedelim%
}%
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }



%============= lawcite
\DeclareCiteCommand{lawcite}%
%%caseallabove      reftypemode}{1}}{}
%%caseabovebelow  reftypemode}{2}}{}
%%caseallbelow      reftypemode}{3}}{}
%%casetitleonly     reftypemode}{4}}{}
%%caserefonly       reftypemode}{5}}{}
%@@@@@@@@@@@@@@@@ prenote
{%
\ifboolexpr{%
test {\ifentrytype{statute}}%
}%
{%start statute true
\usebibmacro{prenote}%
}% end statute true
{%
 \ifcase\thereftypemode \or%
 \usebibmacro{prenote}%inline
 \or% prenote goes inline for this variation, footnote has the case ref.
 \or% prenote is already in the footnote
 \or\usebibmacro{prenote}%
  \fi%
}%end statute false
}%
%@@@@@@@@@@@@@@@@ item
{%
%% \ifentrytype{case}{xxx}{zyyy}%does not work
% \iffieldequalstr{entrytype}{case}{xxx}{zyyy}%works
\ifboolexpr{%
test {\ifentrytype{statute}}%
}%
{%start statute true
\iffieldundef{citeref}{%
  \iffieldundef{statutechapter}{%
  \usebibmacro{getstatutenameref}%
  \usebibmacro{getnote}%
  \ifkeyword{regulations}{\toggletrue{printxregulations}}{\togglefalse{printxregulations}}%
\iftoggle{lcindexing}{%
  \sindex[\lctor]{\thefield{statutetitle}\iftoggle{stattycomma}{,}{} \thefield{statutetitleyear}\iftoggle{statjurisdiction}{\iffieldundef{statutejurisdiction}{}{ (\thefield{statutejurisdiction})}}{}%\usebibmacro{getnote}%
\iffieldundef{note}{}{ (\thefield{note})}%
\lcparnumrefsencap}}{}%
  \togglefalse{printxregulations}
   }{\usebibmacro{getcanreg}}%end canreg
}%end: no citeref
{%start false: citeref exists
\usebibmacro{getcanleg}%
\usebibmacro{getcanreg2}%
}%end citeref
\iffieldundef{postnote}{}{\usebibmacro{notmnc:postnote}}%
\iffieldundef{url}{}{\addspace\printtext[angles]{\usebibmacro{getcaseurl}}}% 
}%end statute true
{%
%\thefield{entrykey}\the\value{citecounter}::
%\ifnumequal{\value{citecounter}}{1}{FIRST}{xxx}%
%\iffirstcitekey{>>\thefield{entrykey}\the\value{instcount}<<}{}
%\ifciteseen{\ifciteibid{SEENIBID}{SEEN}}{}%
 \ifcase\thereftypemode%
 \or\usebibmacro{getcasenameref}\usebibmacro{getnote}%
 \or\usebibmacro{prenote}\usebibmacro{getcasename}\mkbibfootnote{\usebibmacro{getcaseref}\usebibmacro{getnote}\usebibmacro{notmnc:postnote}}%
 \or\mkbibfootnote{\usebibmacro{prenote}\usebibmacro{getcasenameref}\usebibmacro{getnote}\usebibmacro{notmnc:postnote}}%
 \or\usebibmacro{getcasename}%
 \fi%
\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
%
%\usebibmacro{fullstepindex}% ???
}% end statute false
}%end item
%@@@@@@@@@@@@@@@@ delim
{%
 \multicitedelim%
%% \ifcase\thereftypemode \or%
%% \multicitedelim%
%% \or\addcomma%
%% \or\multicitedelim%
%% \or\addcomma\addspace%
%%  \fi%
}%
%@@@@@@@@@@@@@@@@ postnote
{%
%%: general setup:
%\iftoggle{ibidpostdelimcomma}{\setpostnotedelimon}{\setpostnotedelimoff}
%
\ifboolexpr{%
test {\ifentrytype{statute}}%
}%
{\iffieldundef{postnote}{}{\usebibmacro{mnc:postnote}}}%statute true
{%case
%%if ibid, use postnote
% \ifboolexpr{%
%  test {\ifcitation}
%  and
%  test {\ifciteibid}
%  }%
%{\usebibmacro{postnote}}{%
%%    otherwise if mnc:pn then {}
%\iftoggle{pinpointaftermnc}{PPAMNC}{%
%%    otherwise:
%%\iftoggle{usedibid}{\textcolor{red}{AA}}{%
 \ifcase\thereftypemode \or%
 \usebibmacro{postnote}% inline
 \or% prenote goes inline for this variation, footnote has the case ref.
 \or% postnote is already in the footnote
 \or \usebibmacro{postnote}
 \fi%
%% }%end: ibid used
%% \togglefalse{usedibid}%\textcolor{red}{AA}
% }%end: not mnc:pn
% }%end: not ibid
}%not statute
 \usebibmacro{getann:noter:comm}%
 }



%============= lawcite head foot: only for cases
\DeclareCiteCommand{lawcitehf}%
{%
\usebibmacro{prenote}%
}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getcasename}%
\mkbibfootnote{%
    \usebibmacro{getcaseref}\usebibmacro{getnote}%\usebibmacro{postnote}%
    }%
\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\usebibmacro{fullstepindex}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{%
 \multicitedelim%
}%
%@@@@@@@@@@@@@@@@ postnote
{%
\usebibmacro{postnote}
 \usebibmacro{getann:noter:comm}%
}%

%============= lawcite head foot with name: only for cases
\DeclareCiteCommand{lawcitehfn}%
{%
\usebibmacro{prenote}%
}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getcasename}%
\mkbibfootnote{%
    \usebibmacro{getcasenameref}\usebibmacro{getnote}%\usebibmacro{postnote}%
    }%
\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\usebibmacro{fullstepindex}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{%
 \multicitedelim%
}%
%@@@@@@@@@@@@@@@@ postnote
{%
\usebibmacro{postnote}
 \usebibmacro{getann:noter:comm}%
 }%







%============= lawciterr
\DeclareCiteCommand{lawciterr}%[\mkbibfootnote]%
%%caseallabove      reftypemode}{1}}{}
%%caseabovebelow  reftypemode}{2}}{}
%%caseallbelow      reftypemode}{3}}{}
%%casetitleonly     reftypemode}{4}}{}
%%caserefonly       reftypemode}{5}}{}
%@@@@@@@@@@@@@@@@ prenote
{%
 \ifcase\thereftypemode \or%
 \usebibmacro{prenote}%inline
 \or% prenote goes inline for this variation, footnote has the case ref.
 \or% prenote is already in the footnote
 \or\usebibmacro{prenote}%
  \fi%
}%
%@@@@@@@@@@@@@@@@ item
{%
%% \ifentrytype{case}{xxx}{zyyy}%does not work
% \iffieldequalstr{entrytype}{case}{xxx}{zyyy}%works
 \ifcase\thereftypemode%
 \or\iffirstcitekey{\usebibmacro{getcasenameref}}{\usebibmacro{getcaseref}}%
 \or\usebibmacro{prenote}\iffirstcitekey{\usebibmacro{getcasename}}{}\mkbibfootnote{\usebibmacro{getcaseref}\usebibmacro{postnote}}%
 \or\mkbibfootnote{\usebibmacro{prenote}\iffirstcitekey{\usebibmacro{getcasenameref}}{\usebibmacro{getcaseref}}\usebibmacro{postnote}}%
 \or\usebibmacro{getcasename}%
 \fi%
\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
%
\usebibmacro{fullstepindex}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\usebibmacro{delim:choice}}%
%@@@@@@@@@@@@@@@@ postnote
{%
 \ifcase\thereftypemode \or%
 \usebibmacro{postnote}% inline
 \or% prenote goes inline for this variation, footnote has the case ref.
 \or% postnote is already in the footnote
 \or\usebibmacro{postnote}
 \fi%
}






%%%============= lawciterr
%%\DeclareCiteCommand{lawciterr}%
%%%%caseallabove      reftypemode}{1}}{}
%%%%caseabovebelow  reftypemode}{2}}{}
%%%%caseallbelow      reftypemode}{3}}{}
%%%%casetitleonly     reftypemode}{4}}{}
%%%%caserefonly       reftypemode}{5}}{}
%%%@@@@@@@@@@@@@@@@ prenote
%%{%
%% \ifcase\thereftypemode \or%
%% \usebibmacro{prenote}%inline
%% \or% prenote goes inline for this variation, footnote has the case ref.
%% \or% prenote is already in the footnote
%% \or\usebibmacro{prenote}%
%%  \fi%
%%}%
%%%@@@@@@@@@@@@@@@@ item
%%{%
%%%% \ifentrytype{case}{xxx}{zyyy}%does not work
%%% \iffieldequalstr{entrytype}{case}{xxx}{zyyy}%works
%% \ifcase\thereftypemode%
%% \or\usebibmacro{getcasenameref}%
%% \or\usebibmacro{prenote}\usebibmacro{getcasename}\mkbibfootnote{\usebibmacro{getcaseref}\usebibmacro{postnote}}%
%% \or\mkbibfootnote{\usebibmacro{prenote}\usebibmacro{getcasenameref}\usebibmacro{postnote}}%
%% \or\usebibmacro{getcasename}%
%% \fi%
%%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
%%%
%%\usebibmacro{rrindex}%
%%}%end item
%%%@@@@@@@@@@@@@@@@ delim
%%{\multicitedelim}%
%%%@@@@@@@@@@@@@@@@ postnote
%%{%
%% \ifcase\thereftypemode \or%
%% \usebibmacro{postnote}% inline
%% \or% prenote goes inline for this variation, footnote has the case ref.
%% \or% postnote is already in the footnote
%% \or\usebibmacro{postnote}
%% \fi%
%%}







%============= lawcitetitle
\DeclareCiteCommand{lawcitetitle}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\usebibmacro{fullstepindex}%
\usebibmacro{getcasename}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }


%============= lawcitetitlerr
\DeclareCiteCommand{lawcitetitlerr}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\usebibmacro{rrindex}%
\iffirstcitekey{\usebibmacro{getcasename}}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }


%============= lawciteref
\DeclareCiteCommand{lawciteref}%
%@@@@@@@@@@@@@@@@ prenote
{}%
%@@@@@@@@@@@@@@@@ item
{%
%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\usebibmacro{fullstepindex}%
\usebibmacro{prenote}%
\usebibmacro{getcaseref}%
\usebibmacro{getparallelreports}%
\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{}



%============= lcrefnn  %no note
\DeclareCiteCommand{lcrefnn}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\usebibmacro{fullstepindex}%
\usebibmacro{getcaseref}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }


\newtoggle{infirstcite}

\newcommand\multicitedelimrr{\addcomma\addspace}


%============= lawciterefrr
\DeclareCiteCommand{lawciterefrr}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
%\usebibmacro{fullstepindex}%
\usebibmacro{rrindex}%
 \ifboolexpr{%
  not test {\iffirstcitekey}%if 2nd+ cite
  }%
{%
%\renewcommand{\multicitedelim}{\addsemicolon\addspace}
%\renewcommand{\multicitedelim}{y}
%\ifthenelse{\value{citecount}=2}{x}{y}
\usebibmacro{getcaseref}%
}{%false
}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelimrr}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }






%============= lcrefnnrr  %no note
\DeclareCiteCommand{lcrefnnrr}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\usebibmacro{rrindex}%
%\printtext{\addspace}
\usebibmacro{getcaseref}%
%\iffirstcitekey{\printtext{y\addspace}}{x}
%\iffirstcitekey{\renewcommand{\multicitedelimrr}{\printtext{x\addspace}}}{\renewcommand{\multicitedelimrr}{\printtext{y\addcomma\addspace}}}
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelimrr}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }




%============= lcnote
\DeclareCiteCommand{lcnote}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{fullstepindex}%
\usebibmacro{getnote:plain}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }



%============= lcnoterr
\DeclareCiteCommand{lcnoterr}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{rrindex}%
\iffirstcitekey{\usebibmacro{getnote:plain}}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }




%============= lcshorttitle
\DeclareCiteCommand{lcshorttitle}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\usebibmacro{sendtocaseindex}%
\usebibmacro{fullstepindex}%
\usebibmacro{getcaseshortname}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }



%============= lcshorttitlerr
\DeclareCiteCommand{lcshorttitlerr}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\usebibmacro{sendtocaseindex}%
\usebibmacro{rrindex}%
\iffirstcitekey{\usebibmacro{getcaseshortname}}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }



%============= lccasesn
\DeclareCiteCommand{lccasesn}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\usebibmacro{sendtocaseindex}%
\usebibmacro{fullstepindex}%
\usebibmacro{getcasesn}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }




%============= lcyear
\DeclareCiteCommand{lcyear}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\usebibmacro{sendtocaseindex}%
\usebibmacro{fullstepindex}%
\ifboolexpr{%
test {\ifentrytype{case}}%
}%
{%true
\usebibmacro{getcaseyear}%
}{}%end
\ifboolexpr{%
test {\ifentrytype{statute}}%
}%
{%true
\usebibmacro{getstatuteyear}%
}{}%end
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }


%============= lcnickname
\DeclareCiteCommand{lcnickname}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\usebibmacro{sendtocaseindex}%
\usebibmacro{fullstepindex}%
\usebibmacro{getcasenickname}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }



%============= lcnicknamerr
\DeclareCiteCommand{lcnicknamerr}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\usebibmacro{sendtocaseindex}%
%%\usebibmacro{fullstepindex}%
\usebibmacro{rrindex}%
\iffirstcitekey{\usebibmacro{getcasenickname}}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }



%\newtoggle{notecolour}
%\togglefalse{notecolour}
%\newcommand\nn{\toggletrue{notecolour}}
%\iftoggle{notecolour}{\bfseries xx}{yy}

%%%\thefield{courtname} \thefield{mncnumber}} %
%%%\iffieldundef{rptseries}{}{, \iffieldundef{rptyear}{}{\iffieldundef{rptvolume}{[}{(}\thefield{rptyear}\iffieldundef{rptvolume}{]}{)}} \iffieldundef{rptvolume}{}{\thefield{rptvolume}} \thefield{rptseries} \thefield{rptpage}


\newbibmacro{sendtocaseindex}{%
\ifboolexpr{%
test {\ifentrytype{case}}%
}%
{%true
\usebibmacro{indexcaseparm}%
%\iffirstcitekey{%
%%%%%\iftoggle{lcindexing}{%
%%%%%\sindex[cases]{\iffieldundef{shipname}{\thefield{partya}\iffieldundef{partyajur}{}{ (\thefield{partyajur})}%no space, for one party only; space if partyb (before v)
%%%%%\iffieldundef{partyb}{}{ \iffieldundef{partysep}{v}{\thefield{partysep}} \thefield{partyb}\iffieldundef{partybjur}{}{ (\thefield{partybjur})}}}{\thefield{shipname}, The}%
%%%%%\iftoggle{refintoc}{% 1st character is a space
%%%%%\iftoggle{commainindex}{,}{}\addspace\iffieldundef{casenumber}{}{\iftoggle{mncbrackets}{[}{}\thefield{caseyear}\iftoggle{mncbrackets}{]}{} \thefield{courtname} \thefield{casenumber}}%
%%%%%%\iffieldundef{reportpage}{}{\thefield{reportyear} \thefield{reportvolume} \thefield{reportseries} \thefield{reportpage}} %
%%%%%\iffieldundef{reportpage}{}{%
%%%%%\iffieldundef{casenumber}{}{;}%
%%%%%\iffieldundef{reportyear}{}{%
%%%%%\iffieldundef{reportvolume}{ [}{%
%%%%%\iffieldundef{volyearneeded}{ (}{ [}}%
%%%%%\thefield{reportyear}%
%%%%%\iffieldundef{reportvolume}{]}{%
%%%%%\iffieldundef{volyearneeded}{)}{]}} }%
%%%%%\thefield{reportvolume} %
%%%%%\thefield{reportseries} %  use \mkbibordinal{}?
%%%%%\thefield{reportpage}%
%%%%%}%end if reportpage
%%%%%}%end refintoc true
%%%%%{%start reefintoc false
%%%%%\iffieldundef{icaseyear}{\iffieldundef{caseyear}{\iffieldundef{reportyear}{}{ (\thefield{reportyear})}}{ (\thefield{caseyear})}}{ (\thefield{icaseyear})}%
%%%%%}%end refintoc false
%%%%%\lcparnumrefsencap}}{}%end sindex
%}%end \iffirstcitekey
}%end true
{%false
\ifboolexpr{%
test {\ifentrytype{statute}}%
}%
{%
\ifkeyword{regulations}{\toggletrue{printxregulations}}{\togglefalse{printxregulations}}%
\iftoggle{lcindexing}{%
\sindex[\lctor]{\thefield{statutetitle} \thefield{statutetitleyear}\lcparnumrefsencap}}{}%
\togglefalse{printxregulations}%
}%
{}%
}%end false
}






\newbibmacro{getindexcasename}{%
\ifboolexpr{%
test {\ifentrytype{case}}%
}%
{%true
\renewcommand\lcindexaccum{}%empty
\xappto\lcindexaccum{%
%partynames = casename
\iffieldundef{shipname}{\thefield{partya}\iffieldundef{partyajur}{}{ (\thefield{partyajur})}%no space, for one party only; space if partyb (before v)
\iffieldundef{partyb}{}{ \iffieldundef{partysep}{v}{\thefield{partysep}} \thefield{partyb}\iffieldundef{partybjur}{}{ (\thefield{partybjur})}}}{\thefield{shipname}, The}%
}%end accum
}%end true
{%false
}%end case false
}


%-----------------
\newbibmacro{getindexcaseref}{%
\xappto\lcindexaccum{%
%\thefield{courtname}; \thefield{reportseries}
%caseref
%\iftoggle{refintoc}{%   space 1st character of line below
\iftoggle{commainindex}{,}{}\addspace\iffieldundef{casenumber}{}{\iftoggle{mncbrackets}{[}{}\thefield{caseyear}\iftoggle{mncbrackets}{]}{} \thefield{courtname} \thefield{casenumber}}%
%\iffieldundef{reportpage}{}{\thefield{reportyear} \thefield{reportvolume} \thefield{reportseries} \thefield{reportpage}} %
\iffieldundef{reportpage}{}{%
\iffieldundef{casenumber}{}{;}%
\iffieldundef{reportyear}{}{%
\iffieldundef{reportvolume}{ [}{%
\iffieldundef{volyearneeded}{ (}{ [}}%
\thefield{reportyear}%
\iffieldundef{reportvolume}{]}{%
\iffieldundef{volyearneeded}{)}{]}} }%
\thefield{reportvolume} %
\thefield{reportseries} %  use \mkbibordinal{}?
\thefield{reportpage}%
}%end if reportpage
%}%end refintoc true
%{%start reefintoc false
%\iffieldundef{icaseyear}{\iffieldundef{caseyear}{\iffieldundef{reportyear}{}{ (\thefield{reportyear})}}{ (\thefield{caseyear})}}{ (\thefield{icaseyear})}%
%}%end refintoc false
}%caseref accum
}

\DeclareFieldFormat{doublequotes}{^^^^201c#1^^^^201d}
%\DeclareFieldFormat{dblquoteslig}{``#1''}
\DeclareFieldFormat{quotes}{\mkbibquote{#1}}
\DeclareFieldFormat{parens}{\mkbibparens{#1}}
\DeclareFieldFormat{emph}{\mkbibemph{#1}}
\DeclareFieldFormat{angles}{<#1>}
\DeclareFieldFormat{plain}{#1}

\DeclareNameFormat{authorinbib}{%
   \ifthenelse{\value{listcount}=1}{%true
    \namepartfamily%
    \ifdefvoid{\namepartgiven}{}{\addcomma\space\namepartgiven}}%end true
    {%false
    \ifdefvoid{\namepartgiven}{}{\namepartgiven\space}%
    \namepartfamily}%end false
   \ifthenelse{\value{listcount}<\value{liststop}}{\addcomma\space}{}%
}

\DeclareNameFormat{authorplain}{%
%\ifthenelse{\value{listcount}=1}
%{\namepartfamily%
%\ifdefvoid{\namepartgiven}{}{
%,! \addcomma\space\namepartgiven}}
{%
\ifdefvoid{\namepartgiven}{}{\namepartgiven\space}%
\namepartfamily}%
\ifthenelse{\value{listcount}<\value{liststop}}
{\addcomma\space}
{}}


\DeclareNameFormat{authorplainlast}{%
\mkbibemph{%
\ifthenelse{\value{listcount}=1}%
  {}%add nothing
  {%otherwise
 \ifthenelse{\value{listcount}<\value{liststop}}%
    {\addcomma}%
    {\addspace\bibstring{and}}%
  \addspace%
  }%
  \namepartfamily%
}}


%\DeclareNameFormat{authorplainlast}{%
%\mkbibemph{\namepartfamily%
%\ifboolexpr{%
%  test {\value{liststop}=1}
%  }%
%  {}%nothing
%  {%otherwise
% \ifboolexpr{%
%   test {\value{listcount}<\value{liststop}}
%   }%
%    {\addcomma}%
%    {\addspace\bibstring{and}}
%  \addspace}%
%  }%
%}

%\DeclareNameFormat{authorplainlast}{%
%\mkbibemph{\namepartfamily%
%\ifthenelse{\value{listcount}<\value{liststop}}%
%{\ifthenelse{\value{listcount}=\value{liststop}}%
%{\bibstring{and}}{\addcomma}%
%\space}%
%{}}}

\DeclareNameFormat{authorsc}{%
\textsc{\namepartfamily}%
}
%\ifthenelse{\value{listcount}=1}
%{\namepartfamily%
%\ifdefvoid{\namepartgiven}{}{
%,! \addcomma\space\namepartgiven}}
%{%
%\ifdefvoid{\namepartgiven}{}{\namepartgiven\space}%
%\namepartfamily}%
%\ifthenelse{\value{listcount}=1}
%{\textsc{\namepartfamily}}
%{}}


\DeclareListFormat[case]{parallel}{%
#1%
\ifthenelse{\value{listcount}<\value{listtotal}}
{\addcomma\space}
{}}


\newbibmacro{getparallelreports}{%
\iflistundef{parallel}{}{\setunit*{\addcomma\space}\printlist[][-\value{listtotal}]{parallel}\newunit\newblock}%
}





%\newcommand*{\begrelateddelimmultivolume}{\newunitpunct\par\nobreak}
%\renewcommand*{\begrelateddelimmultivolume}{\newunitpunct\addspace}
%\newcommand*{\relateddelim}{\adddot\par\nobreak}
\renewcommand*{\relateddelim}{\adddot\addspace}

\newbibmacro{getljarticleauthor}{%
 \ifbibliography{%inbib true
  \ifnameundef{author}{}%no author true
  %no author details to get; end no author true
  {% no author false: there is an author field
   \printnames[authorinbib]{author}%
  }%end no author false
 }%end inbib true
 {%inbib false
 \printnames[authorplain][-\value{listtotal}]{author}%
 }
}

\newbibmacro{getljarticleauthorsc}{%
\printnames[authorsc][-1]{author}%
}


\newbibmacro{getljarticletitle}{%
\iftoggle{ljarttitleitalic}{%
\printtext[emph]{\thefield{title}}\iffieldundef{subtitle}{}{\addcolon\addspace\printtext[emph]{\thefield{subtitle}}}%
}%end italic
{%not italic
\printfield[plain]{title}\iffieldundef{subtitle}{}{\addcolon\addspace\printfield[plain]{subtitle}}%
}%end not italic
}
%%%\newbibmacro{getljarticletitle}{%
%%%\printfield{title}\iffieldundef{subtitle}{}{\addcolon\addspace\printfield{subtitle}}%
%%%}




%\newbibmacro{getljarticlesubtitle}{%
%}
\newbibmacro{getljarticleyear}{%
\printtext[parens]{\thefield{year}}%
}
\newbibmacro{getljarticleyear:plain}{%
\printtext[plain]{\thefield{year}}%
}
\newbibmacro{getljarticlevolume}{%
\printfield[plain]{volume}%
}
\newbibmacro{getljarticlejournaltitle}{%
\iftoggle{ljjnltitleitalic}{%
\printfield[emph]{journaltitle}%
}%
{%
\printfield[plain]{journaltitle}%
}%
}
\newbibmacro{getljarticlepage}{%
\printfield[plain]{pages}%
}



\newbibmacro{getljarticlequotes}{%
\iftoggle{ljarttitledoublequotes}{\iftoggle{ljarttitlequotes}{%
%double-single
\printtext[doublequotes]{\printtext[quotes]{\usebibmacro{getljarticletitle}}}}{%
%double
\printtext[doublequotes]{\usebibmacro{getljarticletitle}}}}{\iftoggle{ljarttitlequotes}{%
%single
\printtext[quotes]{\usebibmacro{getljarticletitle}}}{%
%none
\usebibmacro{getljarticletitle}}}
}
%\iftoggle{ljarttitledoublequoteslig}%
%{\iftoggle{ljarttitledoublequotes}%
%{\iftoggle{ljarttitlequotes}{\printtext[doublequoteslig]{\printtext[doublequotes]{\printtext[quotes]{\usebibmacro{getljarticletitle}}}}}
%{\usebibmacro{getljarticletitle}}
%}%
%{\iftoggle{ljarttitlequotes}{\printtext[quotes]{\usebibmacro{getljarticletitle}}}{\usebibmacro{getljarticletitle}}
%}%no q lig
%}%
%{\iftoggle{ljarttitledoublequotes}%
%{\iftoggle{ljarttitlequotes}{\printtext[quotes]{\usebibmacro{getljarticletitle}}}{\usebibmacro{getljarticletitle}}
%}%
%{\iftoggle{ljarttitlequotes}{\printtext[quotes]{\usebibmacro{getljarticletitle}}}{\usebibmacro{getljarticletitle}}
%}%no q lig
%}%no q lig
%}


%\newbibmacro{make:url:linkname}%
%{%
%}


\newbibmacro{getcaseurl}%
{%
\iffieldundef{url}{}{%
  \ifhyperref
    {%
    \iffieldundef{linkname}{%
    \url{\thefield{url}}
    }%
    {\href{\thefield{url}}{%
    \thefield{linkname}%
    }}%
    }%
    {\nolinkurl{\thefield{url}}}%
}%
}


\newbibmacro{getljarticleurl}%
{%
\iffieldundef{url}{}{%
  \ifhyperref
    {%
    \iffieldundef{mncnumber}{%
    \iffieldundef{linkname}{%
    \url{\thefield{url}}
    }%
    {\href{\thefield{url}}{%
    \thefield{linkname}%
    }}%
    }%
    {\href{\thefield{url}}{%
    \thefield{mncyear}\addspace%
    \thefield{mncname}\addspace%
    \thefield{mncnumber}%
    }}%
    }%
    {\nolinkurl{\thefield{url}}}%
}%
}




\DeclareFieldFormat{shortname}{#1}




\newbibmacro{getljartshortname}{%
\iffieldundef{shortname}{}{\printfield{shortname}}%
}



\newtoggle{artibidtemp}
\togglefalse{artibidtemp}

\newcommand{\ibidprevpintemp}{}




\newbibmacro{getljarticle:ibid}{%
  \togglefalse{artibidtemp}%
 \togglefalse{usedibid}%
 \togglefalse{supranoteused}%
 \ifboolexpr{%
 not test {\iffootnote}
 }%
 {\usebibmacro{getljartshortname}}{%
 \ifboolexpr{%
  test {\ifcitation}
  and
  test {\ifciteibid}
  }%
  {%
  \toggletrue{usedibid}%
  \usebibmacro{getibid}%
%  \textcolor{red}{AA}%
  \iftoggle{ibidpostdelimcomma}%
  {\DeclareDelimFormat{postnotedelim}{\addcomma\space}}%
  {\DeclareDelimFormat{postnotedelim}{\space}}%
%%  \textcolor{red}{AA}%
  \toggletrue{artibidtemp}%
  \usebibmacro{postnote}%actual ibid
%%  \textcolor{red}{BB}%
  \DeclareDelimFormat{postnotedelim}{\addcomma\space}%restore
%  \textcolor{red}{BB}%
  }{%
 \ifboolexpr{%
  test {\ifcitation}
  and
  test {\ifciteseen}
  and
  not test {\ifciteibid}
  }%
  {\usebibmacro{getljartshortname}%
  \usebibmacro{getibidsupranote}\toggletrue{supranoteused}%
%  \textcolor{red}{AA}%
  \iftoggle{ibidpostdelimcomma}%
  {\DeclareDelimFormat{postnotedelim}{\addcomma\space}}%
  {\DeclareDelimFormat{postnotedelim}{\space}}%
  \usebibmacro{postnote}%
%  \textcolor{red}{BB}%
  \DeclareDelimFormat{postnotedelim}{\addcomma\space}%restore
  %
  }{%
 \usebibmacro{getljarticle}%
 %
 %true
 %false
 }}%ifciteibid false
 % label
 \ifboolexpr{%
  test {\ifcitation}
  and
  not test {\ifciteseen}
  and
  not test {\ifciteibid}
  }%
{\label{cfn:\thefield{entrykey}}}{}%
}}

\newbibmacro{getljarticle}{%
\usebibmacro{getljarticleauthor}%
\ifbibliography{\adddot\space}{\addcomma\addspace}%
\usebibmacro{getljarticlequotes}%
\addcomma\addspace%
\usebibmacro{getljarticleyear}%
\addspace%
\usebibmacro{getljarticlevolume}%
\addspace%
\usebibmacro{getljarticlejournaltitle}%
\addspace%
\usebibmacro{getljarticlepage}%
\iffieldundef{related}{}{\addspace\usebibmacro{related}}%
\iffieldundef{url}{}{%
%put postnote before url:
\iffieldundef{postnote}{\addspace\printtext[angles]{\usebibmacro{getljarticleurl}}}{%
\DeclareDelimFormat{postnotedelim}{\addcomma\space}%restore
\usebibmacro{postnote}%
\addspace\printtext[angles]{\usebibmacro{getljarticleurl}}}}%
%\newunit\newblock%
}


\newbibmacro{sendtoindexrr}{%
\iftoggle{lcindexing}{%
\sindex[cases]{%
%{%
%\color{red}%
\lcindexaccum%
%}%
\lcparnumrefsencap}}{}%
}



\newbibmacro{fullstepindex}{%name-ref for all keys: cases only
\ifboolexpr{%
test {\ifentrytype{case}}%
}%
{%true: is a case
\iftoggle{lcindexing}{%
\usebibmacro{getindexcasename}%
\usebibmacro{getindexcaseref}%
\usebibmacro{sendtoindexrr}%
}%end true
{}%false=is not case
}{}%
}




%indexer
\newbibmacro{rrindex}{%name for first key; refs for the rest
\iftoggle{lcindexing}{%
\iffirstcitekey{%
\usebibmacro{getindexcasename}%
}{}%firstcite
{%loopcite
\usebibmacro{getindexcaseref}%
}%end loopcite
\iflastcitekey{\usebibmacro{sendtoindexrr}}{}%
}{}%
}


%%%\newbibmacro{sendtocaseindex:nameref}{%
%%%\ifboolexpr{%
%%%test {\ifentrytype{case}}%
%%%}%
%%%{%true
%%%\thefield{partya}%no space, for one party only; space if partyb (before v)
%%%\iffieldundef{partyb}{}{ \iffieldundef{partysep}{v}{\thefield{partysep}} \thefield{partyb}}, %
%%%\iffieldundef{casenumber}{}{\iftoggle{mncbrackets}{[}{}\thefield{caseyear}\iftoggle{mncbrackets}{]}{} \thefield{courtname} \thefield{casenumber}}%
%%%\iffieldundef{reportpage}{}{%
%%%\iffieldundef{casenumber}{}{;}%
%%%\iffieldundef{reportyear}{}{%
%%%\iffieldundef{reportvolume}{ [}{%
%%%\iffieldundef{volyearneeded}{ (}{ [}}%
%%%\thefield{reportyear}%
%%%\iffieldundef{reportvolume}{]}{%
%%%\iffieldundef{volyearneeded}{)}{]}} }%
%%%\thefield{reportvolume} %
%%%\thefield{reportseries} %
%%%\thefield{reportpage}%
%%%}%end if reportpage
%%%}%end true
%%%{%false
%%%\ifboolexpr{%
%%%test {\ifentrytype{statute}}%
%%%}%
%%%{\sindex[legislation]{\thefield{statutetitle} \thefield{statutetitleyear}}}%
%%%{}%
%%%}%end false
%%%}
%%%
%%%
%%%
%%%\newbibmacro{sendtocaseindex:ref}{%
%%%\ifboolexpr{%
%%%test {\ifentrytype{case}}%
%%%}%
%%%{%true
%%%\multicitedelim%
%%%\iffieldundef{casenumber}{}{\iftoggle{mncbrackets}{[}{}\thefield{caseyear}\iftoggle{mncbrackets}{]}{} \thefield{courtname} \thefield{casenumber}}%
%%%\iffieldundef{reportpage}{}{%
%%%\iffieldundef{casenumber}{}{;}%
%%%\iffieldundef{reportyear}{}{%
%%%\iffieldundef{reportvolume}{ [}{%
%%%\iffieldundef{volyearneeded}{ (}{ [}}%
%%%\thefield{reportyear}%
%%%\iffieldundef{reportvolume}{]}{%
%%%\iffieldundef{volyearneeded}{)}{]}} }%
%%%\thefield{reportvolume} %
%%%\thefield{reportseries} %
%%%\thefield{reportpage}%
%%%}%end if reportpage
%%%}%end true
%%%{%false
%%%\ifboolexpr{%
%%%test {\ifentrytype{statute}}%
%%%}%
%%%{\sindex[legislation]{\thefield{statutetitle} \thefield{statutetitleyear}}}%
%%%{}%
%%%}%end false
%%%}





%%%\newcommand\lcindexaccum{}
%%%\newcommand\lcindexclear{\renewcommand\lcindexaccum{}}
%%%\newcommand\lcindexadd[1]{\renewcommand\lcindexaccum{#1}}
%%%
%%%
%%%\newbibmacro{sendtocaseindex:test}{%
%%%\ifboolexpr{%
%%%test {\ifentrytype{case}}%
%%%}%
%%%{%true
%%%\iffirstcitekey{\lcindexclear\xappto\lcindexaccum{%\usebibmacro{sendtocaseindex:nameref}
%%%\thefield{partya}%no space, for one party only; space if partyb (before v)
%%%\iffieldundef{partyb}{}{ \iffieldundef{partysep}{v}{\thefield{partysep}} \thefield{partyb}}, %
%%%\iffieldundef{casenumber}{}{\iftoggle{mncbrackets}{[}{}\thefield{caseyear}\iftoggle{mncbrackets}{]}{} \thefield{courtname} \thefield{casenumber}}%
%%%\iffieldundef{reportpage}{}{%
%%%\iffieldundef{casenumber}{}{;}%
%%%\iffieldundef{reportyear}{}{%
%%%\iffieldundef{reportvolume}{ [}{%
%%%\iffieldundef{volyearneeded}{ (}{ [}}%
%%%\thefield{reportyear}%
%%%\iffieldundef{reportvolume}{]}{%
%%%\iffieldundef{volyearneeded}{)}{]}} }%
%%%\thefield{reportvolume} %
%%%\thefield{reportseries} %
%%%\thefield{reportpage}%
%%%}%end if reportpage
%%%}}%true
%%%{\xappto\lcindexaccum{\usebibmacro{sendtocaseindex:ref}}}%false
%%%%\lcindexadd{y}
%%%%\gappto\lcindexaccum{y}
%%%\iflastcitekey{\edef\lcx{\lcindexaccum}\sindex[cases]{\lcx}}{}%
%%%}%end true
%%%{}}


%:
\newcommand\lcinlinecolour{red}
\newcommand\setlcinlinecolour[1]{\renewcommand\lcinlinecolour{#1}}

%first child:
\newcommand\lcinlinerrcolour{brown}
\newcommand\setlcinlinerrcolour[1]{\renewcommand\lcinlinerrcolour{#1}}

%subsequent children:
\newcommand\lcinlinerrcoloursc{blue}
\newcommand\setlcinlinerrcoloursc[1]{\renewcommand\lcinlinerrcoloursc{#1}}

\lcsetdemooff



%============= lcljauthorfn
\DeclareCiteCommand{lcljauthorfn}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getljarticleauthorsc}%
\usebibmacro{fullstepindex}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}}






%============= lcinline: only for cases
\DeclareCiteCommand{lcinline}%
%@@@@@@@@@@@@@@@@ prenote
{%
%\let\blx@ibidtracker\relax
%\textcolor{red}{AA}%
%\togglefalse{lcibidtracking}%
%\blx@opt@ibidtracker@false
%\ExecuteBibliographyOptions{ibidtracker=false}%
%\boolfalse{citetracker}%
%\boolfalse{pagetracker}%
%\boolfalse{citerequest}%
\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\ifboolexpr{%
test {\ifentrytype{case}}%
}%
{%true: is a case
%\togglefalse{lcibidtracking}%
\textcolor{\lcinlinecolour}{\usebibmacro{getcasenamerefnofn}}%no ibiding
\usebibmacro{fullstepindex}%
}%end true: is a case
{}%false = is not a case
}%end item
%@@@@@@@@@@@@@@@@ delim
{\iftoggle{multicitecomma}{\multicitecommadelim}{\multicitedelim}}%
%@@@@@@@@@@@@@@@@ postnote
%{\usebibmacro{postnote}\iflastcitekey{\addspace\usebibmacro{getnote}}{}}
{\usebibmacro{notmnc:postnote}\usebibmacro{getnote}%
 \usebibmacro{getann:noter:comm}%
 }%{\iflastcitekey{\usebibmacro{postnote}\addspace\usebibmacro{getnote}}{\usebibmacro{postnote}}}



%============= lcinlinefull: only for cases
\DeclareCiteCommand{lcinlinefull}%
%@@@@@@@@@@@@@@@@ prenote
{%
%\let\blx@ibidtracker\relax
%\textcolor{red}{AA}%
%\togglefalse{lcibidtracking}%
%\blx@opt@ibidtracker@false
%\ExecuteBibliographyOptions{ibidtracker=false}%
%\boolfalse{citetracker}%
%\boolfalse{pagetracker}%
%\boolfalse{citerequest}%
\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\ifboolexpr{%
test {\ifentrytype{case}}%
}%
{%true: is a case
%\togglefalse{lcibidtracking}%
\textcolor{\lcinlinecolour}{\usebibmacro{getcasenamereffull}}%no ibiding
\usebibmacro{fullstepindex}%
}%end true: is a case
{}%false = is not a case
}%end item
%@@@@@@@@@@@@@@@@ delim
{\iftoggle{multicitecomma}{\multicitecommadelim}{\multicitedelim}}%
%@@@@@@@@@@@@@@@@ postnote
%{\usebibmacro{postnote}\iflastcitekey{\addspace\usebibmacro{getnote}}{}}
{\usebibmacro{notmnc:postnote}\usebibmacro{getnote}%
 \usebibmacro{getann:noter:comm}%
 }%{\iflastcitekey{\usebibmacro{postnote}\addspace\usebibmacro{getnote}}{\usebibmacro{postnote}}}







%============= lcinlineparens: only for cases
\DeclareCiteCommand{lcinlineparens}[\mkbibparens]%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\ifboolexpr{%
test {\ifentrytype{case}}%
}%
{%true: is a case
\textcolor{\lcinlinecolour}{\usebibmacro{getcasenameref}}%
\usebibmacro{fullstepindex}%
}%end true: is a case
{}%false = is not a case
}%end item
%@@@@@@@@@@@@@@@@ delim
{\iftoggle{multicitecomma}{\multicitecommadelim}{\multicitedelim}}%
%@@@@@@@@@@@@@@@@ postnote
%{\usebibmacro{postnote}\iflastcitekey{\addspace\usebibmacro{getnote}}{}}
{\usebibmacro{notmnc:postnote}\usebibmacro{getnote:noparens}%
 \usebibmacro{getann:noter:comm}%
 }%{\iflastcitekey{\usebibmacro{postnote}\addspace\usebibmacro{getnote}}{\usebibmacro{postnote}}}

\newbibmacro{delim:choice}{%
\iftoggle{multicitecomma}{\multicitecommadelim}{\multicitedelim}%
}
%============= lcinlinerr
\DeclareCiteCommand{lcinlinerr}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%\ifentryseen{\thefield{crossref}}{\usebibmacro{getcaseref}}{\usebibmacro{getcasenameref}}%
%\iffieldxref{partya}{\usebibmacro{getcaseref}}{\usebibmacro{getcasenameref}}%
%\usebibmacro{sendtocaseindex:test}%
%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\ifboolexpr{
test {\ifkeyword{nobib}}
and
not test {\ifkeyword{showbib}}
}
{\addtocategory{nobib}{\thefield{entrykey}}}%true
{}%false 
\iffirstcitekey{\textcolor{\lcinlinerrcolour}{\usebibmacro{getcasenameref}}}{\textcolor{\lcinlinerrcoloursc}{\usebibmacro{getcaseref}}}%
%%%indexer
%%\iffirstcitekey{%
%%\usebibmacro{getindexcasename}%
%%}{}%firstcite
%%{%loopcite
%%\usebibmacro{getindexcaseref}%
%%}%end loopcite
%%\iflastcitekey{\usebibmacro{sendtoindexrr}}{}%
\usebibmacro{rrindex}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelimrr}%
%@@@@@@@@@@@@@@@@ postnote
{\iflastcitekey{\usebibmacro{postnote}\iffieldundef{note}{}{\addspace\usebibmacro{getnote}}}{\usebibmacro{postnote}}%
 \usebibmacro{getann:noter:comm}%
 }


%============= lcinlinenn  %no note
\DeclareCiteCommand{lcinlinenn}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%\ifentryseen{\thefield{crossref}}{\usebibmacro{getcaseref}}{\usebibmacro{getcasenameref}}%
%\iffieldxref{partya}{\usebibmacro{getcaseref}}{\usebibmacro{getcasenameref}}%
%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}% ??
\usebibmacro{fullstepindex}%
\usebibmacro{getcasenameref}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\usebibmacro{delim:choice}}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }



%============= lcinlinennrr  %no note
\DeclareCiteCommand{lcinlinennrr}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%\ifentryseen{\thefield{crossref}}{\usebibmacro{getcaseref}}{\usebibmacro{getcasenameref}}%
%\iffieldxref{partya}{\usebibmacro{getcaseref}}{\usebibmacro{getcasenameref}}%
%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}% ??
\usebibmacro{rrindex}%
\iffirstcitekey{\usebibmacro{getcasenameref}}{\usebibmacro{getcaseref}}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelimrr}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }








%%%%============= lawcitefoot
%%%\DeclareCiteCommand{lawcitefoot}%
%%%%@@@@@@@@@@@@@@@@ prenote
%%%{}%
%%%%@@@@@@@@@@@@@@@@ item
%%%{%
%%%%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
%%%\usebibmacro{fullstepindex}%
%%%\mkbibfootnote{\usebibmacro{prenote}\usebibmacro{getcasenameref}\usebibmacro{postnote}}%
%%%}%end item
%%%%@@@@@@@@@@@@@@@@ delim
%%%{\multicitedelim}%
%%%%@@@@@@@@@@@@@@@@ postnote
%%%{}
%%%

%============= lcfoot
\DeclareCiteCommand{lcfoot}[\mkbibfootnote]%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\usebibmacro{fullstepindex}%
\usebibmacro{getcasenameref}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{notmnc:postnote}%
 \usebibmacro{getann:noter:comm}%
 }





%============= lcfootfull
\DeclareCiteCommand{lcfootfull}[\mkbibfootnote]%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\usebibmacro{fullstepindex}%
\usebibmacro{getcasenamereffull}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{notmnc:postnote}%
 \usebibmacro{getann:noter:comm}%
 }

%============= lcfootrr
\DeclareCiteCommand{lcfootrr}[\mkbibfootnote]%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
%%\iffirstcitekey{\usebibmacro{sendtocaseindex}}{}%
\iffirstcitekey{\usebibmacro{getcasenameref}}{\usebibmacro{getcaseref}}%
%%%indexer
%%\iffirstcitekey{%
%%\usebibmacro{getindexcasename}
%%}{}%firstcite
%%{%loopcite
%%\usebibmacro{getindexcaseref}
%%}%end loopcite
%%\iflastcitekey{\usebibmacro{sendtoindexrr}}{}
\usebibmacro{rrindex}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\addcomma\addspace}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{getnote}\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }


\newbibmacro{getciteref}{%
\iffieldundef{citeref}{}{\printtext{<\thefield{citeref}>}}
}


%============= lcciteref
\DeclareCiteCommand{lcciteref}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\ifboolexpr{%
test {\ifentrytype{statute}}%
}%
{%start statute true
\usebibmacro{getciteref}
}%end statute true
{}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\ifboolexpr{%
test {\ifentrytype{statute}}%
}%
{%start statute true
\usebibmacro{postnote}\iffieldundef{note}{}{\addspace\printfield[parens]{note}}%
}%end statute true
{}%
 \usebibmacro{getann:noter:comm}%
}







%============= ljcite
\DeclareCiteCommand{ljcite}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getljarticle}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{mnc:postnote}\iffieldundef{note}{}{\addspace\printfield[parens]{note}}%
 \usebibmacro{getann:noter:comm}%
 }


%============= ljfootcite
\DeclareCiteCommand{ljfootcite}[\mkbibfootnote]%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getljarticle:ibid}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{%
 \ifboolexpr{%
    test {\iftoggle{artibidtemp}}
%  test {\ifcitation}
%  and
%  test {\ifciteibid}
  }%
  {}%nothing
  {%if not ibid, then:
%%  \textcolor{red}{CC}%
%if url, then postnote has already been printed
\iffieldundef{url}{%
  \usebibmacro{postnote}%
  }{}%
%%  \textcolor{red}{DD}%
  \iffieldundef{note}{}{\addspace\printfield[parens]{note}}%
}%
 \usebibmacro{getann:noter:comm}%
 }



%============= lcpostnote
\DeclareCiteCommand{lcpostnote}%
%@@@@@@@@@@@@@@@@ prenote
{}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%end item
%@@@@@@@@@@@@@@@@ delim
{}%
%@@@@@@@@@@@@@@@@ postnote
{}%


%============= lcljauthor
\DeclareCiteCommand{lcljauthor}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getljarticleauthor}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%


%============= lcljtitle
\DeclareCiteCommand{lcljtitle}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getljarticlequotes}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%


%============= lcljyear
\DeclareCiteCommand{lcljyear}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getljarticleyear:plain}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%


%============= lcljjournaltitle
\DeclareCiteCommand{lcljjournaltitle}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getljarticlejournaltitle}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%


%============= lcljvolume
\DeclareCiteCommand{lcljvolume}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getljarticlevolume}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%


%============= lcljpage
\DeclareCiteCommand{lcljpage}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getljarticlepage}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%





\DeclareCiteCommand{lcbook}[\mkbibfootnote]%
{\usebibmacro{prenote}}%
{%
%  \usebibmacro{publisher+location+date}%
%  book bib driver from ext-standard.bbx:
\iftoggle{bookauthorgiven}{\DeclareNameAlias[book]{author}{given-family}}{}%
  \usebibmacro{author/editor+others/translator+others}%
%%%  \printnames{author}
%%\usebibmacro{name:given-family}
%%         {\namepartfamily}
%%         {\namepartgiveni}
%%         {\namepartprefix}
%%         {\namepartsuffix}
%  \setunit{\printdelim{nametitledelim}}\newblock
\addcomma\addspace%
%====== dotless title
  \usebibmacro{maintitle+title}%
%  \setunit{\addspace}
\nopunct
%%%  \iffieldsequal{maintitle}{title}
%%%    {\clearfield{maintitle}%
%%%     \clearfield{mainsubtitle}%
%%%     \clearfield{maintitleaddon}}
%%%    {\iffieldundef{maintitle}
%%%       {}
%%%       {\usebibmacro{maintitle}%
%%%%        \newunit\newblock
%%%        \iffieldundef{volume}
%%%          {}
%%%          {\printfield{volume}%
%%%           \printfield{part}%
%%%           \setunit{\addcolon\space}}}}%
%%%  \usebibmacro{title}%
%%%%  \newunit  
%  
%  
%  
%  
%  \newunit
  \usebibmacro{language}%
%  \newunit\newblock
  \usebibmacro{byauthor}%
%  \newunit\newblock
  \usebibmacro{byeditor+others}%
%  \newunit\newblock
  \usebibmacro{edition}%
%  \newunit
  \usebibmacro{barevolume+volumes}%
%  \newunit\newblock
  \usebibmacro{series+number}%
%  \newunit\newblock
  \usebibmacro{note}%
%  \newunit\newblock
%\addspace%
  \printtext{\mkbibparens{\usebibmacro{publisher+location+date}}}%
%  \newunit\newblock
  \usebibmacro{chapter+pages}%
%  \newunit
  \usebibmacro{pagetotal}%
%  \newunit\newblock
  \usebibmacro{isbn}%
%  \newunit\newblock
  \usebibmacro{doi+eprint+url}%
%  \newunit\newblock
  \usebibmacro{addendum+pubstate}%
  \setunit{\bibpagerefpunct}
%  \newblock
  \usebibmacro{pageref}%
%  \newunit\newblock
  \iftoggle{bbx:related}
    {\usebibmacro{related:init}%
     \usebibmacro{related}}
    {}%
}%
{\multicitedelim}%
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%


%----------------------------------- Epigraph
\newbibmacro{getlastnames}{%
 \printnames[authorplainlast][-\value{listtotal}]{author}%
 }


\newbibmacro{gettitle}{%
\iffieldundef{shorttitle}{%
\printfield{title}}%
{\printfield[emph]{shorttitle}%
}
}

\newbibmacro{getactualtitle}{%
\printfield[emph]{title}%
}


\newbibmacro{getshorttitle}{%
\iffieldundef{shorttitle}{%
}%
{\printfield[emph]{shorttitle}%
}
}

\newbibmacro{getedition}{%
\iffieldundef{edition}{}{%
\printfield{edition}%
}%end true
{}%false
}




\newbibmacro{geteditionyear}{%
 \ifboolexpr{%
  not test {\iffieldundef{edition}}%if there is an edition
  or
  not test {\iffieldundef{year}}%or a year
  }%
{%true
\addspace%
\mkbibparens{%
\iffieldundef{edition}{}{%
\printfield{edition}%\textsuperscript{\bibstring{legaled}}%
\iffieldundef{year}{}{\addspace}}%end edition
\iffieldundef{year}{}{\printfield{year}}%
}%end psrens
}%end true
{}%false
}


%--------------------- for bib ``Clerk and Lindsall on Torts 4th ed''-type items
\newbibmacro{getaonbtitle}{%
%\ifbibliography{}{%otherwise
\ifnameundef{author}{}{%otherwise
\usebibmacro{getlastnames}%
\addspace%
\mkbibemph{\bibstring{legalon}}
\addspace%
}%end name defined
\usebibmacro{getshorttitle}%
%\usebibmacro{geteditionyear}%
%}%end inbib=false
}

\newbibmacro{getaonbedition}{%
\ifbibliography{}{%otherwise
%\ifnameundef{author}{}{%otherwise
%\usebibmacro{getlastnames}%
%\addspace%
%\mkbibemph{\bibstring{legalon}}
%\addspace%
%}%end name defined
%\usebibmacro{getshorttitle}%
\usebibmacro{getedition}%
}%end inbib=false
}


%--------------------- for non-bib ``Clerk and Lindsall on Torts 4th ed''-type attribution
\newbibmacro{getlcepigraph}{%
\ifbibliography{}{%otherwise
\ifnameundef{author}{}{%otherwise
\usebibmacro{getlastnames}%
\addspace%
\mkbibemph{\bibstring{legalon}}
\addspace%
}%end name defined
\usebibmacro{gettitle}%
\usebibmacro{geteditionyear}%
}%end inbib=false
}


\newbibmacro{getlcepigraphp}{%
\ifbibliography{}{%otherwise
\ifnameundef{author}{}{%otherwise
\usebibmacro{getlastnames}%
\mkbibemph{\bibstring{possessive}}
\addspace%
}%end name defined
\usebibmacro{gettitle}%
}%end inbib=false
}



%============= lcaonbtitle
\DeclareCiteCommand{lcaonbtitle}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getaonbtitle}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%

%============= lcaonbedition
\DeclareCiteCommand{lcaonbedition}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getaonbedition}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%




%============= lcepigraph
\DeclareCiteCommand{lcepigraph}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getlcepigraph}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%


%============= lcepigraphp: possessive x's y
\DeclareCiteCommand{lcepigraphp}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getlcepigraphp}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
 }%



\newcommand\multicitecommadelim{\addcomma\addspace}

%\DeclareMultiCiteCommand{lawcites}{lawcite}{\multicitedelim}
\DeclareMultiCiteCommand{\lawcitesinline}{lcinline}{\iftoggle{multicitecomma}{\multicitecommadelim}{\multicitedelim}}%different cases
\DeclareMultiCiteCommand{\lawcitesinlinerr}{lcinlinerr}{\iftoggle{multicitecomma}{\multicitecommadelim}{\multicitedelim}}%same case, different reports
\DeclareMultiCiteCommand{\lawcitesfoot}[\mkbibfootnote]{lcfoot}{\multicitedelim}
\DeclareMultiCiteCommand{\lawcitesfootrr}[\mkbibfootnote]{lcfootrr}{\multicitedelim}
%
\DeclareMultiCiteCommand{\yycites}{yycite}{\multicitedelim}
%
%%\DeclareMultiCiteCommand{\lawcitesinline}{lcinline}{\multicitedelim}%different cases


\newcommand{\lcidfield}[1]{%
#1 :: \iffieldundef{#1}{%not a field
\ifnameundef{#1}{%not a name list
\iflistundef{#1}{%not a list
\iffieldnum{#1}{%is numeric
existsnumeric}{notinentry}}{existslist}}{existsname}}{existsfield}
}

\DeclareCiteCommand{\lctestid}%
{}%
{%
%#1
\lcidfield{date}%
\lcidfield{year}%
}%
{}%
{}

\newcommand\lcffieldformat{\bfseries\color{blue}}
\newcommand\lcffield[1]{%
\noindent\iffieldundef{#1}{}{{\lcffieldformat#1} =  \{\thefield{#1}\},\par}%
}

\newbibmacro{getlcdcase}[1][x]{%
{%
\defaultparskip
\small\ttfamily\ \par
\noindent @\thefield{entrytype}\{\thefield{entrykey},\par%
\noindent\iffieldundef{attribution}{}{attribution =  \{\thefield{attribution}\},\par}%
\noindent\ifnameundef{author}{}{author =  \{\printnames[authorplain][-\value{listtotal}]{author}\},\par}%
\noindent\iffieldundef{casename}{}{casename =  \{\thefield{casename}\},\par}%
\noindent\iffieldundef{casenickname}{}{casenickname =  \{\thefield{casenickname}\},\par}%
\noindent\iffieldundef{casenumber}{}{casenumber =  \{\thefield{casenumber}\},\par}%
\noindent\iffieldundef{caseshortname}{}{caseshortname =  \{\thefield{caseshortname}\},\par}%
\noindent\iffieldundef{casestatus}{}{casestatus =  \{\thefield{casestatus}\},\par}%
\noindent\iffieldundef{caseyear}{}{caseyear =  \{\thefield{caseyear}\},\par}%
\noindent\iffieldundef{chapter}{}{chapter =  \{\thefield{chapter}\},\par}%
\noindent\iffieldundef{citeref}{}{citeref =  \{\thefield{citeref}\},\par}%
\noindent\iffieldundef{courtcasenumber}{}{courtcasenumber =  \{\thefield{courtcasenumber}\},\par}%
\noindent\iffieldundef{courtdivision}{}{courtdivision =  \{\thefield{courtdivision}\},\par}%
\noindent\iffieldundef{courtfullname}{}{courtfullname =  \{\thefield{courtfullname}\},\par}%
\noindent\iffieldundef{courtjurisdiction}{}{courtjurisdiction =  \{\thefield{courtjurisdiction}\},\par}%
\noindent\iffieldundef{courtlist}{}{courtlist =  \{\thefield{courtlist}\},\par}%
\noindent\iffieldundef{courtname}{}{courtname =  \{\thefield{courtname}\},\par}%
\noindent\iffieldundef{date}{}{date =  \{\thefield{date}\},\par}%
\noindent\iffieldundef{decisionyear}{}{decisionyear =  \{\thefield{decisionyear}\},\par}%
\noindent\iffieldundef{fulldate}{}{fulldate =  \{\thefield{fulldate}\},\par}%
\noindent\iffieldundef{gazette}{}{gazette =  \{\thefield{gazette}\},\par}%
\noindent\iffieldundef{icaseyear}{}{icaseyear =  \{\thefield{icaseyear}\},\par}%
\noindent\iffieldundef{journaltitle}{}{journaltitle =  \{\thefield{journaltitle}\},\par}%
\noindent\iffieldundef{keywords}{}{keywords =  \{\thefield{keywords}\},\par}%
\noindent\iffieldundef{linkname}{}{linkname =  \{\thefield{linkname}\},\par}%
\noindent\iffieldundef{mncname}{}{mncname =  \{\thefield{mncname}\},\par}%
\noindent\iffieldundef{mncnumber}{}{mncnumber =  \{\thefield{mncnumber}\},\par}%
\noindent\iffieldundef{mncurl}{}{mncurl =  \{\thefield{mncurl}\},\par}%
\noindent\iffieldundef{mncyear}{}{mncyear =  \{\thefield{mncyear}\},\par}%
\noindent\iffieldundef{note}{}{note =  \{\thefield{note}\},\par}%
\noindent\iffieldundef{options}{}{options =  \{\thefield{options}\},\par}%\noindent\iffieldundef{number}{}{number =  \{\thefield{number}\},\par}%
\noindent\iffieldundef{pages}{}{pages =  \{\thefield{pages}\},\par}%
\noindent\iffieldundef{pagination}{}{pagination =  \{\thefield{pagination}\},\par}%
\noindent\iflistundef{parallel}{}{parallel =  \{\thelist{parallel}\},\par}%
\noindent\iffieldundef{partya}{}{partya =  \{\thefield{partya}\},\par}%
\noindent\iffieldundef{partyajur}{}{partyajur =  \{\thefield{partyajur}\},\par}%
\noindent\iffieldundef{partyasn}{}{partyasn =  \{\thefield{partyasn}\},\par}%
\noindent\iffieldundef{partyb}{}{partyb =  \{\thefield{partyb}\},\par}%
\noindent\iffieldundef{partybjur}{}{partybjur =  \{\thefield{partybjur}\},\par}%
\noindent\iffieldundef{partybsn}{}{partybsn =  \{\thefield{partybsn}\},\par}%
\noindent\iffieldundef{partysep}{}{partysep =  \{\thefield{partysep}\},\par}%
\noindent\iffieldundef{partysepx}{}{partysepx =  \{\thefield{partysepx}\},\par}%
\noindent\iffieldundef{quotetext}{}{quotetext =  \{\thefield{quotetext}\},\par}%
\noindent\iffieldundef{regnum}{}{regnum =  \{\thefield{regnum}\},\par}%
\noindent\iffieldundef{related}{}{related =  \{\thefield{related}\},\par}%
\noindent\iffieldundef{relatedtype}{}{relatedtype =  \{\thefield{relatedtype}\},\par}%
\noindent\iffieldundef{relatedstring}{}{relatedstring =  \{\thefield{relatedstring}\},\par}%
\noindent\iffieldundef{relatedoptions}{}{relatedoptions =  \{\thefield{relatedoptions}\},\par}%
\noindent\iffieldundef{reportpage}{}{reportpage =  \{\thefield{reportpage}\},\par}%
\noindent\iffieldundef{reportseries}{}{reportseries =  \{\thefield{reportseries}\},\par}%
\noindent\iffieldundef{reportvolume}{}{reportvolume =  \{\thefield{reportvolume}\},\par}%
\noindent\iffieldundef{reportyear}{}{reportyear =  \{\thefield{reportyear}\},\par}%
\noindent\iffieldundef{shipname}{}{shipname =  \{\thefield{shipname}\},\par}%
\noindent\iffieldundef{shortname}{}{shortname =  \{\thefield{shortname}\},\par}%
\noindent\iffieldundef{statutechapter}{}{statutechapter =  \{\thefield{statutechapter}\},\par}%
\noindent\iffieldundef{statutejurisdiction}{}{statutejurisdiction =  \{\thefield{statutejurisdiction}\},\par}%
\noindent\iffieldundef{statutelongtitle}{}{statutelongtitle =  \{\thefield{statutelongtitle}\},\par}%
\noindent\iffieldundef{statutenickname}{}{statutenickname =  \{\thefield{statutenickname}\},\par}%
\noindent\iffieldundef{statuteregnalyear}{}{statuteregnalyear =  \{\thefield{statuteregnalyear}\},\par}%
\noindent\iffieldundef{statuteshorttitle}{}{statuteshorttitle =  \{\thefield{statuteshorttitle}\},\par}%
\noindent\iffieldundef{statutetitle}{}{statutetitle =  \{\thefield{statutetitle}\},\par}%
\noindent\iffieldundef{statutetitleyear}{}{statutetitleyear =  \{\thefield{statutetitleyear}\},\par}%
\noindent\iffieldundef{statutevolume}{}{statutevolume =  \{\thefield{statutevolume}\},\par}%
\noindent\iffieldundef{statuteyear}{}{statuteyear =  \{\thefield{statuteyear}\},\par}%
\noindent\iffieldundef{svjy}{}{svjy =  \{\thefield{svjy}\},\par}%
\noindent\iffieldundef{title}{}{title =  \{\thefield{title}\},\par}%
\noindent\iffieldundef{url}{}{url =  \{\thefield{url}\},\par}%
\noindent\iffieldundef{volume}{}{volume =  \{\thefield{volume}\},\par}%
\noindent\iffieldundef{volyearneeded}{}{volyearneeded =  \{\thefield{volyearneeded}\},\par}%
\noindent\iffieldundef{year}{}{year =  \{\thefield{year}\},\par}%
\noindent\iffieldundef{crossref}{}{crossref =  \{\thefield{crossref}\},\par}%
\noindent\iffieldundef{xdata}{}{xdata =  \{\thefield{xdata}\},\par}%
%\noindent\iffieldundef{related}{}{related =  \{\thefield{related}\},\par}%
\}\par%
\normalparskip
}}

\ExplSyntaxOn
\NewDocumentCommand { \mystrcomp } { m } {
\str_case:on { #1 }
{
{ parallel } { xxx }
{ x } { yyy }
}
}
\cs_new_eq:NN \strcompare \str_if_eq:onTF
\ExplSyntaxOff

\DeclareListFormat[case,ljarticle]{wand}{%
#1%
\ifthenelse{\value{listcount}<\value{liststop}}
{\space and\space}
{}}

\newcommand\docompfield[1]{%
\strcompare{\myparm}{#1}{%
\iffieldundef{#1}{}{\noindent#1 =  \{\thefield{#1}\},\par}%
}{}%
}
\newcommand\docomplist[2]{%1=list,2=list format
\strcompare{\myparm}{#1}{%
\iflistundef{#1}{}{\noindent#1 =  \{\printlist[#2][-\value{listtotal}]{#1}\},\par}%
}{}%
}
\newcommand\lcgetabibfield[2]{%1=key,2=fieldname
\citetrackerfalse
\lcdacasefield[#2][]{#1}
\citetrackertrue
}


\newcommand\docompfieldhl[1]{%
\iffieldundef{#1}{}{%
\strcompare{\myparmhl}{#1}{%
\noindent\colorbox{green!50}{\parbox{0.85\textwidth}{#1 =  \{\thefield{#1}\},}}\par%
}{%
\noindent#1 =  \{\thefield{#1}\},\par%
}%
}%
}

\newbibmacro{getlcdcasehl}[1]{%
{%
\edef\myparmhl{#1}
\color{blue}\small\ttfamily\ \par
\begin{myquotation}
\noindent @\thefield{entrytype}\{\thefield{entrykey},\par%
%\noindent ...\par%
%\noindent\iffieldundef{attribution}{}{attribution =  \{\thefield{attribution}\},\par}%
%\noindent\iffieldundef{author}{}{author =  \{\thefield{author}\},\par}%
%\noindent\iffieldundef{casename}{}{casename =  \{\thefield{casename}\},\par}%
%\noindent\iffieldundef{casenickname}{}{casenickname =  \{\thefield{casenickname}\},\par}%
%\noindent\iffieldundef{casenumber}{}{casenumber =  \{\thefield{casenumber}\},\par}%
%\noindent\iffieldundef{caseshortname}{}{caseshortname =  \{\thefield{caseshortname}\},\par}%
%\noindent\iffieldundef{casestatus}{}{casestatus =  \{\thefield{casestatus}\},\par}%
%\noindent\iffieldundef{caseyear}{}{caseyear =  \{\thefield{caseyear}\},\par}%
%\noindent\iffieldundef{chapter}{}{chapter =  \{\thefield{chapter}\},\par}%
%\noindent\iffieldundef{citeref}{}{citeref =  \{\thefield{citeref}\},\par}%
%\noindent\iffieldundef{courtcasenumber}{}{courtcasenumber =  \{\thefield{courtcasenumber}\},\par}%
%\noindent\iffieldundef{courtdivision}{}{courtdivision =  \{\thefield{courtdivision}\},\par}%
%\noindent\iffieldundef{courtfullname}{}{courtfullname =  \{\thefield{courtfullname}\},\par}%
%\noindent\iffieldundef{courtjurisdiction}{}{courtjurisdiction =  \{\thefield{courtjurisdiction}\},\par}%
%\noindent\iffieldundef{courtlist}{}{courtlist =  \{\thefield{courtlist}\},\par}%
%\noindent\iffieldundef{courtname}{}{courtname =  \{\thefield{courtname}\},\par}%
%\noindent\iffieldundef{date}{}{date =  \{\thefield{date}\},\par}%
%\noindent\iffieldundef{decisionyear}{}{decisionyear =  \{\thefield{decisionyear}\},\par}%
%\noindent\iffieldundef{fulldate}{}{fulldate =  \{\thefield{fulldate}\},\par}%
%\noindent\iffieldundef{gazette}{}{gazette =  \{\thefield{gazette}\},\par}%
%\noindent\iffieldundef{icaseyear}{}{icaseyear =  \{\thefield{icaseyear}\},\par}%
\docompfieldhl{journaltitle}
%\noindent\iffieldundef{journaltitle}{}{journaltitle =  \{\thefield{journaltitle}\},\par}%
\docompfieldhl{keywords}
%\noindent\iffieldundef{keywords}{}{keywords =  \{\thefield{keywords}\},\par}%
\docompfieldhl{linkname}
\docompfieldhl{mncname}
\docompfieldhl{mncnumber}
\docompfieldhl{mncurl}
\docompfieldhl{mncyear}
%\noindent\iffieldundef{note}{}{note =  \{\thefield{note}\},\par}%
%\noindent\iffieldundef{number}{}{number =  \{\thefield{number}\},\par}%
\docompfieldhl{options}
\docompfieldhl{pages}
\docompfieldhl{pagination}
%%\docomplist{parallel}{wand}
\docompfieldhl{partya}
\docompfieldhl{partyajur}
\docompfieldhl{partyasn}
\docompfieldhl{partyb}
\docompfieldhl{partybjur}
\docompfieldhl{partybsn}
\docompfieldhl{partysep}
\docompfieldhl{partysepx}
\docompfieldhl{quotetext}
\docompfieldhl{regnum}
\docompfieldhl{reportpage}
\docompfieldhl{reportseries}
\docompfieldhl{reportvolume}
\docompfieldhl{reportyear}
\docompfieldhl{shipname}
\docompfieldhl{shortname}
%\noindent\iffieldundef{statutechapter}{}{statutechapter =  \{\thefield{statutechapter}\},\par}%
%\noindent\iffieldundef{statutejurisdiction}{}{statutejurisdiction =  \{\thefield{statutejurisdiction}\},\par}%
%\noindent\iffieldundef{statutelongtitle}{}{statutelongtitle =  \{\thefield{statutelongtitle}\},\par}%
%\noindent\iffieldundef{statutenickname}{}{statutenickname =  \{\thefield{statutenickname}\},\par}%
%\noindent\iffieldundef{statuteregnalyear}{}{statuteregnalyear =  \{\thefield{statuteregnalyear}\},\par}%
%\noindent\iffieldundef{statuteshorttitle}{}{statuteshorttitle =  \{\thefield{statuteshorttitle}\},\par}%
%\noindent\iffieldundef{statutetitle}{}{statutetitle =  \{\thefield{statutetitle}\},\par}%
%\noindent\iffieldundef{statutetitleyear}{}{statutetitleyear =  \{\thefield{statutetitleyear}\},\par}%
%\noindent\iffieldundef{statutevolume}{}{statutevolume =  \{\thefield{statutevolume}\},\par}%
%\noindent\iffieldundef{statuteyear}{}{statuteyear =  \{\thefield{statuteyear}\},\par}%
%\noindent\iffieldundef{svjy}{}{svjy =  \{\thefield{svjy}\},\par}%
\docompfieldhl{title}
\docompfieldhl{url}
\docompfieldhl{volume}
%\noindent\iffieldundef{volyearneeded}{}{volyearneeded =  \{\thefield{volyearneeded}\},\par}%
\docompfieldhl{year}
\docompfieldhl{yoptions}
\docompfieldhl{annotation}
\docompfieldhl{noterup}
\docompfieldhl{commentary}
\docompfieldhl{qquotation}
%\noindent\iffieldundef{crossref}{}{crossref =  \{\thefield{crossref}\},\par}%
%\noindent\iffieldundef{xdata}{}{xdata =  \{\thefield{xdata}\},\par}%
%\noindent\iffieldundef{related}{}{related =  \{\thefield{related}\},\par}%
%\noindent ...\par%
\}\par%
\end{myquotation}
}}


\newbibmacro{getlcdacasefield}[1]{%
{%
\edef\myparm{#1}
\color{blue}\small\ttfamily\ \par
\begin{myquotation}
\noindent @\thefield{entrytype}\{\thefield{entrykey},\par%
\noindent ...\par%
%\noindent\iffieldundef{attribution}{}{attribution =  \{\thefield{attribution}\},\par}%
%\noindent\iffieldundef{author}{}{author =  \{\thefield{author}\},\par}%
%\noindent\iffieldundef{casename}{}{casename =  \{\thefield{casename}\},\par}%
%\noindent\iffieldundef{casenickname}{}{casenickname =  \{\thefield{casenickname}\},\par}%
%\noindent\iffieldundef{casenumber}{}{casenumber =  \{\thefield{casenumber}\},\par}%
%\noindent\iffieldundef{caseshortname}{}{caseshortname =  \{\thefield{caseshortname}\},\par}%
%\noindent\iffieldundef{casestatus}{}{casestatus =  \{\thefield{casestatus}\},\par}%
%\noindent\iffieldundef{caseyear}{}{caseyear =  \{\thefield{caseyear}\},\par}%
%\noindent\iffieldundef{chapter}{}{chapter =  \{\thefield{chapter}\},\par}%
%\noindent\iffieldundef{citeref}{}{citeref =  \{\thefield{citeref}\},\par}%
%\noindent\iffieldundef{courtcasenumber}{}{courtcasenumber =  \{\thefield{courtcasenumber}\},\par}%
%\noindent\iffieldundef{courtdivision}{}{courtdivision =  \{\thefield{courtdivision}\},\par}%
%\noindent\iffieldundef{courtfullname}{}{courtfullname =  \{\thefield{courtfullname}\},\par}%
%\noindent\iffieldundef{courtjurisdiction}{}{courtjurisdiction =  \{\thefield{courtjurisdiction}\},\par}%
%\noindent\iffieldundef{courtlist}{}{courtlist =  \{\thefield{courtlist}\},\par}%
%\noindent\iffieldundef{courtname}{}{courtname =  \{\thefield{courtname}\},\par}%
%\noindent\iffieldundef{date}{}{date =  \{\thefield{date}\},\par}%
%\noindent\iffieldundef{decisionyear}{}{decisionyear =  \{\thefield{decisionyear}\},\par}%
%\noindent\iffieldundef{fulldate}{}{fulldate =  \{\thefield{fulldate}\},\par}%
%\noindent\iffieldundef{gazette}{}{gazette =  \{\thefield{gazette}\},\par}%
%\noindent\iffieldundef{icaseyear}{}{icaseyear =  \{\thefield{icaseyear}\},\par}%
%\noindent\iffieldundef{journaltitle}{}{journaltitle =  \{\thefield{journaltitle}\},\par}%
\docompfield{keywords}
%\noindent\iffieldundef{keywords}{}{keywords =  \{\thefield{keywords}\},\par}%
%\noindent\iffieldundef{linkname}{}{linkname =  \{\thefield{linkname}\},\par}%
%\noindent\iffieldundef{mncname}{}{mncname =  \{\thefield{mncname}\},\par}%
%\noindent\iffieldundef{mncnumber}{}{mncnumber =  \{\thefield{mncnumber}\},\par}%
%\noindent\iffieldundef{mncurl}{}{mncurl =  \{\thefield{mncurl}\},\par}%
%\noindent\iffieldundef{mncyear}{}{mncyear =  \{\thefield{mncyear}\},\par}%
%\noindent\iffieldundef{note}{}{note =  \{\thefield{note}\},\par}%
%\noindent\iffieldundef{number}{}{number =  \{\thefield{number}\},\par}%
\docompfield{options}
%\noindent\iffieldundef{pages}{}{pages =  \{\thefield{pages}\},\par}%
%\noindent\iffieldundef{pagination}{}{pagination =  \{\thefield{pagination}\},\par}%
\docomplist{parallel}{wand}
\docompfield{partya}
\docompfield{partyajur}
\docompfield{partyasn}
\docompfield{partyb}
\docompfield{partybjur}
\docompfield{partybsn}
\docompfield{partysep}
\docompfield{partysepx}
\docompfield{quotetext}
\docompfield{regnum}
\docompfield{reportpage}
\docompfield{reportseries}
\docompfield{reportvolume}
\docompfield{reportyear}
\docompfield{shipname}
\docompfield{shortname}
%\noindent\iffieldundef{statutechapter}{}{statutechapter =  \{\thefield{statutechapter}\},\par}%
%\noindent\iffieldundef{statutejurisdiction}{}{statutejurisdiction =  \{\thefield{statutejurisdiction}\},\par}%
%\noindent\iffieldundef{statutelongtitle}{}{statutelongtitle =  \{\thefield{statutelongtitle}\},\par}%
%\noindent\iffieldundef{statutenickname}{}{statutenickname =  \{\thefield{statutenickname}\},\par}%
%\noindent\iffieldundef{statuteregnalyear}{}{statuteregnalyear =  \{\thefield{statuteregnalyear}\},\par}%
%\noindent\iffieldundef{statuteshorttitle}{}{statuteshorttitle =  \{\thefield{statuteshorttitle}\},\par}%
%\noindent\iffieldundef{statutetitle}{}{statutetitle =  \{\thefield{statutetitle}\},\par}%
%\noindent\iffieldundef{statutetitleyear}{}{statutetitleyear =  \{\thefield{statutetitleyear}\},\par}%
%\noindent\iffieldundef{statutevolume}{}{statutevolume =  \{\thefield{statutevolume}\},\par}%
%\noindent\iffieldundef{statuteyear}{}{statuteyear =  \{\thefield{statuteyear}\},\par}%
%\noindent\iffieldundef{svjy}{}{svjy =  \{\thefield{svjy}\},\par}%
%\noindent\iffieldundef{title}{}{title =  \{\thefield{title}\},\par}%
%\noindent\iffieldundef{url}{}{url =  \{\thefield{url}\},\par}%
%\noindent\iffieldundef{volume}{}{volume =  \{\thefield{volume}\},\par}%
%\noindent\iffieldundef{volyearneeded}{}{volyearneeded =  \{\thefield{volyearneeded}\},\par}%
%\noindent\iffieldundef{year}{}{year =  \{\thefield{year}\},\par}%
%\noindent\iffieldundef{crossref}{}{crossref =  \{\thefield{crossref}\},\par}%
%\noindent\iffieldundef{xdata}{}{xdata =  \{\thefield{xdata}\},\par}%
%\noindent\iffieldundef{related}{}{related =  \{\thefield{related}\},\par}%
\docompfield{annotation}
\docompfield{noterup}
\docompfield{commentary}
\docompfield{qquotation}
\noindent ...\par%
\}\par%
\end{myquotation}
}}



\newbibmacro{getlcdallfields}{%
{%
\ttfamily\ \par
@\thefield{entrytype}\{\thefield{entrykey},\par%
\noindent\iffieldundef{abstract}{}{abstract =  \{\thefield{abstract}\},\par}%
\noindent\iffieldundef{addendum}{}{addendum =  \{\thefield{addendum}\},\par}%
\noindent\iffieldundef{afterword}{}{afterword =  \{\thefield{afterword}\},\par}%
\noindent\iffieldundef{annotation}{}{annotation =  \{\thefield{annotation}\},\par}%
\noindent\iffieldundef{annotator}{}{annotator =  \{\thefield{annotator}\},\par}%
\noindent\iffieldundef{article}{}{article =  \{\thefield{article}\},\par}%
\noindent\ifnameundef{author}{}{author =  \{\printnames[authorplain][-\value{listtotal}]{author}\},\par}%
\noindent\iffieldundef{authortype}{}{authortype =  \{\thefield{authortype}\},\par}%
\noindent\iffieldundef{book}{}{book =  \{\thefield{book}\},\par}%
\noindent\iffieldundef{bookauthor}{}{bookauthor =  \{\thefield{bookauthor}\},\par}%
\noindent\iffieldundef{bookinbook}{}{bookinbook =  \{\thefield{bookinbook}\},\par}%
\noindent\iffieldundef{booklet}{}{booklet =  \{\thefield{booklet}\},\par}%
\noindent\iffieldundef{bookpagination}{}{bookpagination =  \{\thefield{bookpagination}\},\par}%
\noindent\iffieldundef{booksubtitle}{}{booksubtitle =  \{\thefield{booksubtitle}\},\par}%
\noindent\iffieldundef{booktitle}{}{booktitle =  \{\thefield{booktitle}\},\par}%
\noindent\iffieldundef{booktitleaddon}{}{booktitleaddon =  \{\thefield{booktitleaddon}\},\par}%
\noindent\iffieldundef{chapter}{}{chapter =  \{\thefield{chapter}\},\par}%
\noindent\iffieldundef{collection}{}{collection =  \{\thefield{collection}\},\par}%
\noindent\iffieldundef{commentator}{}{commentator =  \{\thefield{commentator}\},\par}%
\noindent\iffieldundef{crossref}{}{crossref =  \{\thefield{crossref}\},\par}%
\noindent\iffieldundef{day}{}{day =  \{\thefield{day}\},\par}%
\noindent\iffieldundef{doi}{}{doi =  \{\thefield{doi}\},\par}%
\noindent\iffieldundef{edition}{}{edition =  \{\thefield{edition}\},\par}%
\noindent\iffieldundef{editor}{}{editor =  \{\thefield{editor}\},\par}%
\noindent\iffieldundef{editora}{}{editora =  \{\thefield{editora}\},\par}%
\noindent\iffieldundef{editoratype}{}{editoratype =  \{\thefield{editoratype}\},\par}%
\noindent\iffieldundef{editorb}{}{editorb =  \{\thefield{editorb}\},\par}%
\noindent\iffieldundef{editorbtype}{}{editorbtype =  \{\thefield{editorbtype}\},\par}%
\noindent\iffieldundef{editorc}{}{editorc =  \{\thefield{editorc}\},\par}%
\noindent\iffieldundef{editorctype}{}{editorctype =  \{\thefield{editorctype}\},\par}%
\noindent\iffieldundef{editortype}{}{editortype =  \{\thefield{editortype}\},\par}%
\noindent\iffieldundef{eid}{}{eid =  \{\thefield{eid}\},\par}%
\noindent\iffieldundef{endday}{}{endday =  \{\thefield{endday}\},\par}%
\noindent\iffieldundef{endhour}{}{endhour =  \{\thefield{endhour}\},\par}%
\noindent\iffieldundef{endminute}{}{endminute =  \{\thefield{endminute}\},\par}%
\noindent\iffieldundef{endmonth}{}{endmonth =  \{\thefield{endmonth}\},\par}%
\noindent\iffieldundef{endseason}{}{endseason =  \{\thefield{endseason}\},\par}%
\noindent\iffieldundef{endsecond}{}{endsecond =  \{\thefield{endsecond}\},\par}%
\noindent\iffieldundef{endtimezone}{}{endtimezone =  \{\thefield{endtimezone}\},\par}%
\noindent\iffieldundef{endyear}{}{endyear =  \{\thefield{endyear}\},\par}%
\noindent\iffieldundef{entryset}{}{entryset =  \{\thefield{entryset}\},\par}%
\noindent\iffieldundef{entrysubtype}{}{entrysubtype =  \{\thefield{entrysubtype}\},\par}%
\noindent\iffieldundef{eprint}{}{eprint =  \{\thefield{eprint}\},\par}%
\noindent\iffieldundef{eprintclass}{}{eprintclass =  \{\thefield{eprintclass}\},\par}%
\noindent\iffieldundef{eprinttype}{}{eprinttype =  \{\thefield{eprinttype}\},\par}%
\noindent\iffieldundef{eventday}{}{eventday =  \{\thefield{eventday}\},\par}%
\noindent\iffieldundef{eventendday}{}{eventendday =  \{\thefield{eventendday}\},\par}%
\noindent\iffieldundef{eventendhour}{}{eventendhour =  \{\thefield{eventendhour}\},\par}%
\noindent\iffieldundef{eventendminute}{}{eventendminute =  \{\thefield{eventendminute}\},\par}%
\noindent\iffieldundef{eventendmonth}{}{eventendmonth =  \{\thefield{eventendmonth}\},\par}%
\noindent\iffieldundef{eventendseason}{}{eventendseason =  \{\thefield{eventendseason}\},\par}%
\noindent\iffieldundef{eventendsecond}{}{eventendsecond =  \{\thefield{eventendsecond}\},\par}%
\noindent\iffieldundef{eventendtimezone}{}{eventendtimezone =  \{\thefield{eventendtimezone}\},\par}%
\noindent\iffieldundef{eventendyear}{}{eventendyear =  \{\thefield{eventendyear}\},\par}%
\noindent\iffieldundef{eventhour}{}{eventhour =  \{\thefield{eventhour}\},\par}%
\noindent\iffieldundef{eventminute}{}{eventminute =  \{\thefield{eventminute}\},\par}%
\noindent\iffieldundef{eventmonth}{}{eventmonth =  \{\thefield{eventmonth}\},\par}%
\noindent\iffieldundef{eventseason}{}{eventseason =  \{\thefield{eventseason}\},\par}%
\noindent\iffieldundef{eventsecond}{}{eventsecond =  \{\thefield{eventsecond}\},\par}%
\noindent\iffieldundef{eventtimezone}{}{eventtimezone =  \{\thefield{eventtimezone}\},\par}%
\noindent\iffieldundef{eventtitle}{}{eventtitle =  \{\thefield{eventtitle}\},\par}%
\noindent\iffieldundef{eventtitleaddon}{}{eventtitleaddon =  \{\thefield{eventtitleaddon}\},\par}%
\noindent\iffieldundef{eventyear}{}{eventyear =  \{\thefield{eventyear}\},\par}%
\noindent\iffieldundef{execute}{}{execute =  \{\thefield{execute}\},\par}%
\noindent\iffieldundef{file}{}{file =  \{\thefield{file}\},\par}%
\noindent\iffieldundef{foreword}{}{foreword =  \{\thefield{foreword}\},\par}%
\noindent\iffieldundef{gender}{}{gender =  \{\thefield{gender}\},\par}%
\noindent\iffieldundef{holder}{}{holder =  \{\thefield{holder}\},\par}%
\noindent\iffieldundef{hour}{}{hour =  \{\thefield{hour}\},\par}%
\noindent\iffieldundef{howpublished}{}{howpublished =  \{\thefield{howpublished}\},\par}%
\noindent\iffieldundef{ids}{}{ids =  \{\thefield{ids}\},\par}%
\noindent\iffieldundef{inbook}{}{inbook =  \{\thefield{inbook}\},\par}%
\noindent\iffieldundef{incollection}{}{incollection =  \{\thefield{incollection}\},\par}%
\noindent\iffieldundef{indexsorttitle}{}{indexsorttitle =  \{\thefield{indexsorttitle}\},\par}%
\noindent\iffieldundef{indextitle}{}{indextitle =  \{\thefield{indextitle}\},\par}%
\noindent\iffieldundef{inproceedings}{}{inproceedings =  \{\thefield{inproceedings}\},\par}%
\noindent\iffieldundef{inreference}{}{inreference =  \{\thefield{inreference}\},\par}%
\noindent\iffieldundef{institution}{}{institution =  \{\thefield{institution}\},\par}%
\noindent\iffieldundef{introduction}{}{introduction =  \{\thefield{introduction}\},\par}%
\noindent\iffieldundef{isan}{}{isan =  \{\thefield{isan}\},\par}%
\noindent\iffieldundef{isbn}{}{isbn =  \{\thefield{isbn}\},\par}%
\noindent\iffieldundef{ismn}{}{ismn =  \{\thefield{ismn}\},\par}%
\noindent\iffieldundef{isrn}{}{isrn =  \{\thefield{isrn}\},\par}%
\noindent\iffieldundef{issn}{}{issn =  \{\thefield{issn}\},\par}%
\noindent\iffieldundef{issue}{}{issue =  \{\thefield{issue}\},\par}%
\noindent\iffieldundef{issuesubtitle}{}{issuesubtitle =  \{\thefield{issuesubtitle}\},\par}%
\noindent\iffieldundef{issuetitle}{}{issuetitle =  \{\thefield{issuetitle}\},\par}%
\noindent\iffieldundef{issuetitleaddon}{}{issuetitleaddon =  \{\thefield{issuetitleaddon}\},\par}%
\noindent\iffieldundef{iswc}{}{iswc =  \{\thefield{iswc}\},\par}%
\noindent\iffieldundef{journalsubtitle}{}{journalsubtitle =  \{\thefield{journalsubtitle}\},\par}%
\noindent\iffieldundef{journaltitle}{}{journaltitle =  \{\thefield{journaltitle}\},\par}%
\noindent\iffieldundef{journaltitleaddon}{}{journaltitleaddon =  \{\thefield{journaltitleaddon}\},\par}%
\noindent\iffieldundef{keywords}{}{keywords =  \{\thefield{keywords}\},\par}%
\noindent\iffieldundef{label}{}{label =  \{\thefield{label}\},\par}%
\noindent\iffieldundef{langid}{}{langid =  \{\thefield{langid}\},\par}%
\noindent\iffieldundef{langidopts}{}{langidopts =  \{\thefield{langidopts}\},\par}%
\noindent\iffieldundef{language}{}{language =  \{\thefield{language}\},\par}%
\noindent\iffieldundef{library}{}{library =  \{\thefield{library}\},\par}%
%%\noindent\iffieldundef{lista}{}{lista =  \{\thefield{lista}\},\par}%
%%\noindent\iffieldundef{listb}{}{listb =  \{\thefield{listb}\},\par}%
%%\noindent\iffieldundef{listc}{}{listc =  \{\thefield{listc}\},\par}%
%%\noindent\iffieldundef{listd}{}{listd =  \{\thefield{listd}\},\par}%
%%\noindent\iffieldundef{liste}{}{liste =  \{\thefield{liste}\},\par}%
%%\noindent\iffieldundef{listf}{}{listf =  \{\thefield{listf}\},\par}%
%%\noindent\iffieldundef{location}{}{location =  \{\thefield{location}\},\par}%
%%\noindent\iffieldundef{mainsubtitle}{}{mainsubtitle =  \{\thefield{mainsubtitle}\},\par}%
%%\noindent\iffieldundef{maintitle}{}{maintitle =  \{\thefield{maintitle}\},\par}%
%%\noindent\iffieldundef{maintitleaddon}{}{maintitleaddon =  \{\thefield{maintitleaddon}\},\par}%
%%\noindent\iffieldundef{manual}{}{manual =  \{\thefield{manual}\},\par}%
%%\noindent\iffieldundef{minute}{}{minute =  \{\thefield{minute}\},\par}%
%%\noindent\iffieldundef{misc}{}{misc =  \{\thefield{misc}\},\par}%
%%\noindent\iffieldundef{month}{}{month =  \{\thefield{month}\},\par}%
%%\noindent\iffieldundef{mvbook}{}{mvbook =  \{\thefield{mvbook}\},\par}%
%%\noindent\iffieldundef{mvcollection}{}{mvcollection =  \{\thefield{mvcollection}\},\par}%
%%\noindent\iffieldundef{namea}{}{namea =  \{\thefield{namea}\},\par}%
%%\noindent\iffieldundef{nameaddon}{}{nameaddon =  \{\thefield{nameaddon}\},\par}%
%%\noindent\iffieldundef{nameatype}{}{nameatype =  \{\thefield{nameatype}\},\par}%
%%\noindent\iffieldundef{nameb}{}{nameb =  \{\thefield{nameb}\},\par}%
%%\noindent\iffieldundef{namebtype}{}{namebtype =  \{\thefield{namebtype}\},\par}%
%%\noindent\iffieldundef{namec}{}{namec =  \{\thefield{namec}\},\par}%
%%\noindent\iffieldundef{namectype}{}{namectype =  \{\thefield{namectype}\},\par}%
%%\noindent\iffieldundef{note}{}{note =  \{\thefield{note}\},\par}%
%%\noindent\iffieldundef{number}{}{number =  \{\thefield{number}\},\par}%
%%\noindent\iffieldundef{online}{}{online =  \{\thefield{online}\},\par}%
%%\noindent\iffieldundef{options}{}{options =  \{\thefield{options}\},\par}%
%%\noindent\iffieldundef{organization}{}{organization =  \{\thefield{organization}\},\par}%
%%\noindent\iffieldundef{origday}{}{origday =  \{\thefield{origday}\},\par}%
%%\noindent\iffieldundef{origendday}{}{origendday =  \{\thefield{origendday}\},\par}%
%%\noindent\iffieldundef{origendhour}{}{origendhour =  \{\thefield{origendhour}\},\par}%
%%\noindent\iffieldundef{origendminute}{}{origendminute =  \{\thefield{origendminute}\},\par}%
%%\noindent\iffieldundef{origendmonth}{}{origendmonth =  \{\thefield{origendmonth}\},\par}%
%%\noindent\iffieldundef{origendseason}{}{origendseason =  \{\thefield{origendseason}\},\par}%
%%\noindent\iffieldundef{origendsecond}{}{origendsecond =  \{\thefield{origendsecond}\},\par}%
%%\noindent\iffieldundef{origendtimezone}{}{origendtimezone =  \{\thefield{origendtimezone}\},\par}%
%%\noindent\iffieldundef{origendyear}{}{origendyear =  \{\thefield{origendyear}\},\par}%
%%\noindent\iffieldundef{orighour}{}{orighour =  \{\thefield{orighour}\},\par}%
%%\noindent\iffieldundef{origlanguage}{}{origlanguage =  \{\thefield{origlanguage}\},\par}%
%%\noindent\iffieldundef{origlocation}{}{origlocation =  \{\thefield{origlocation}\},\par}%
%%\noindent\iffieldundef{origminute}{}{origminute =  \{\thefield{origminute}\},\par}%
%%\noindent\iffieldundef{origmonth}{}{origmonth =  \{\thefield{origmonth}\},\par}%
%%\noindent\iffieldundef{origpublisher}{}{origpublisher =  \{\thefield{origpublisher}\},\par}%
%%\noindent\iffieldundef{origseason}{}{origseason =  \{\thefield{origseason}\},\par}%
%%\noindent\iffieldundef{origsecond}{}{origsecond =  \{\thefield{origsecond}\},\par}%
%%\noindent\iffieldundef{origtimezone}{}{origtimezone =  \{\thefield{origtimezone}\},\par}%
%%\noindent\iffieldundef{origtitle}{}{origtitle =  \{\thefield{origtitle}\},\par}%
%%\noindent\iffieldundef{origyear}{}{origyear =  \{\thefield{origyear}\},\par}%
%%\noindent\iffieldundef{pages}{}{pages =  \{\thefield{pages}\},\par}%
%%\noindent\iffieldundef{pagetotal}{}{pagetotal =  \{\thefield{pagetotal}\},\par}%
%%\noindent\iffieldundef{pagination}{}{pagination =  \{\thefield{pagination}\},\par}%
%%\noindent\iffieldundef{part}{}{part =  \{\thefield{part}\},\par}%
%%\noindent\iffieldundef{patent}{}{patent =  \{\thefield{patent}\},\par}%
%%\noindent\iffieldundef{periodical}{}{periodical =  \{\thefield{periodical}\},\par}%
%%\noindent\iffieldundef{presort}{}{presort =  \{\thefield{presort}\},\par}%
%%\noindent\iffieldundef{proceedings}{}{proceedings =  \{\thefield{proceedings}\},\par}%
\noindent\ifnameundef{publisher}{}{publisher =  \{\thename{publisher}\},\par}%
%%\noindent\iffieldundef{pubstate}{}{pubstate =  \{\thefield{pubstate}\},\par}%
%%\noindent\iffieldundef{reference}{}{reference =  \{\thefield{reference}\},\par}%
%%\noindent\iffieldundef{related}{}{related =  \{\thefield{related}\},\par}%
%%\noindent\iffieldundef{relatedoptions}{}{relatedoptions =  \{\thefield{relatedoptions}\},\par}%
%%\noindent\iffieldundef{relatedstring}{}{relatedstring =  \{\thefield{relatedstring}\},\par}%
%%\noindent\iffieldundef{relatedtype}{}{relatedtype =  \{\thefield{relatedtype}\},\par}%
%%\noindent\iffieldundef{report}{}{report =  \{\thefield{report}\},\par}%
%%\noindent\iffieldundef{reprinttitle}{}{reprinttitle =  \{\thefield{reprinttitle}\},\par}%
%%\noindent\iffieldundef{season}{}{season =  \{\thefield{season}\},\par}%
%%\noindent\iffieldundef{second}{}{second =  \{\thefield{second}\},\par}%
%%\noindent\iffieldundef{series}{}{series =  \{\thefield{series}\},\par}%
%%\noindent\iffieldundef{set}{}{set =  \{\thefield{set}\},\par}%
%%\noindent\iffieldundef{shortauthor}{}{shortauthor =  \{\thefield{shortauthor}\},\par}%
%%\noindent\iffieldundef{shorteditor}{}{shorteditor =  \{\thefield{shorteditor}\},\par}%
%%\noindent\iffieldundef{shorthand}{}{shorthand =  \{\thefield{shorthand}\},\par}%
%%\noindent\iffieldundef{shorthandintro}{}{shorthandintro =  \{\thefield{shorthandintro}\},\par}%
%%\noindent\iffieldundef{shortjournal}{}{shortjournal =  \{\thefield{shortjournal}\},\par}%
%%\noindent\iffieldundef{shortseries}{}{shortseries =  \{\thefield{shortseries}\},\par}%
%%\noindent\iffieldundef{shorttitle}{}{shorttitle =  \{\thefield{shorttitle}\},\par}%
%%\noindent\iffieldundef{sortkey}{}{sortkey =  \{\thefield{sortkey}\},\par}%
%%\noindent\iffieldundef{sortname}{}{sortname =  \{\thefield{sortname}\},\par}%
%%\noindent\iffieldundef{sortshorthand}{}{sortshorthand =  \{\thefield{sortshorthand}\},\par}%
%%\noindent\iffieldundef{sorttitle}{}{sorttitle =  \{\thefield{sorttitle}\},\par}%
%%\noindent\iffieldundef{sortyear}{}{sortyear =  \{\thefield{sortyear}\},\par}%
%%\noindent\iffieldundef{subtitle}{}{subtitle =  \{\thefield{subtitle}\},\par}%
%%\noindent\iffieldundef{suppbook}{}{suppbook =  \{\thefield{suppbook}\},\par}%
%%\noindent\iffieldundef{suppcollection}{}{suppcollection =  \{\thefield{suppcollection}\},\par}%
%%\noindent\iffieldundef{suppperiodical}{}{suppperiodical =  \{\thefield{suppperiodical}\},\par}%
%%\noindent\iffieldundef{thesis}{}{thesis =  \{\thefield{thesis}\},\par}%
%%\noindent\iffieldundef{timezone}{}{timezone =  \{\thefield{timezone}\},\par}%
%%\noindent\iffieldundef{title}{}{title =  \{\thefield{title}\},\par}%
%%\noindent\iffieldundef{titleaddon}{}{titleaddon =  \{\thefield{titleaddon}\},\par}%
%%\noindent\iffieldundef{translator}{}{translator =  \{\thefield{translator}\},\par}%
%%\noindent\iffieldundef{type}{}{type =  \{\thefield{type}\},\par}%
%%\noindent\iffieldundef{unpublished]{}{}{unpublished]{ =  \{\thefield{unpublished]{}\},\par}%
%%\noindent\iffieldundef{url}{}{url =  \{\thefield{url}\},\par}%
%%\noindent\iffieldundef{urlday}{}{urlday =  \{\thefield{urlday}\},\par}%
%%\noindent\iffieldundef{urlendday}{}{urlendday =  \{\thefield{urlendday}\},\par}%
%%\noindent\iffieldundef{urlendhour}{}{urlendhour =  \{\thefield{urlendhour}\},\par}%
%%\noindent\iffieldundef{urlendminute}{}{urlendminute =  \{\thefield{urlendminute}\},\par}%
%%\noindent\iffieldundef{urlendmonth}{}{urlendmonth =  \{\thefield{urlendmonth}\},\par}%
%%\noindent\iffieldundef{urlendsecond}{}{urlendsecond =  \{\thefield{urlendsecond}\},\par}%
%%\noindent\iffieldundef{urlendtimezone}{}{urlendtimezone =  \{\thefield{urlendtimezone}\},\par}%
%%\noindent\iffieldundef{urlendyear}{}{urlendyear =  \{\thefield{urlendyear}\},\par}%
%%\noindent\iffieldundef{urlhour}{}{urlhour =  \{\thefield{urlhour}\},\par}%
%%\noindent\iffieldundef{urlminute}{}{urlminute =  \{\thefield{urlminute}\},\par}%
%%\noindent\iffieldundef{urlmonth}{}{urlmonth =  \{\thefield{urlmonth}\},\par}%
%%\noindent\iffieldundef{urlsecond}{}{urlsecond =  \{\thefield{urlsecond}\},\par}%
%%\noindent\iffieldundef{urltimezone}{}{urltimezone =  \{\thefield{urltimezone}\},\par}%
%%\noindent\iffieldundef{urlyear}{}{urlyear =  \{\thefield{urlyear}\},\par}%
%%\noindent\iffieldundef{usera}{}{usera =  \{\thefield{usera}\},\par}%
%%\noindent\iffieldundef{userb}{}{userb =  \{\thefield{userb}\},\par}%
%%\noindent\iffieldundef{userc}{}{userc =  \{\thefield{userc}\},\par}%
%%\noindent\iffieldundef{userd}{}{userd =  \{\thefield{userd}\},\par}%
%%\noindent\iffieldundef{usere}{}{usere =  \{\thefield{usere}\},\par}%
%%\noindent\iffieldundef{userf}{}{userf =  \{\thefield{userf}\},\par}%
%%\noindent\iffieldundef{venue}{}{venue =  \{\thefield{venue}\},\par}%
%%\noindent\iffieldundef{verba}{}{verba =  \{\thefield{verba}\},\par}%
%%\noindent\iffieldundef{verbb}{}{verbb =  \{\thefield{verbb}\},\par}%
%%\noindent\iffieldundef{verbc}{}{verbc =  \{\thefield{verbc}\},\par}%
%%\noindent\iffieldundef{version}{}{version =  \{\thefield{version}\},\par}%
%%\noindent\iffieldundef{volume}{}{volume =  \{\thefield{volume}\},\par}%
%%\noindent\iffieldundef{volumes}{}{volumes =  \{\thefield{volumes}\},\par}%
%%\noindent\iffieldundef{xdata}{}{xdata =  \{\thefield{xdata}\},\par}%
%%\noindent\iffieldundef{xref}{}{xref =  \{\thefield{xref}\},\par}%
%%\noindent\iffieldundef{year}{}{year =  \{\thefield{year}\},\par}%
}}




%============= lcdcase
\DeclareCiteCommand{lcdcase}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getlcdcase}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}}%

%============= lcdacasefield
\DeclareCiteCommand{lcdacasefield}%
%@@@@@@@@@@@@@@@@ prenote
{}%{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getlcdacasefield}{\thefield{prenote}}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{}%{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{}%{\usebibmacro{postnote}}%

%============= lcdcasehl
\DeclareCiteCommand{lcdcasehl}%
%@@@@@@@@@@@@@@@@ prenote
{}%{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getlcdcasehl}{\thefield{prenote}}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{}%{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{}%{\usebibmacro{postnote}}%


%============= lcdallfields
\DeclareCiteCommand{lcdallfields}%
%@@@@@@@@@@@@@@@@ prenote
{\usebibmacro{prenote}}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getlcdallfields}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{\multicitedelim}%
%@@@@@@@@@@@@@@@@ postnote
{\usebibmacro{postnote}}%


% sundry commands
%index
%%\newcommand\printlcindexes{%
%%\iftoggle{printlegtoc}{%
%%\let\oldtwocolumn\twocolumn
%%\renewcommand{\twocolumn}[1][]{#1}
%%\let\oldclearpage\clearpage
%%\renewcommand\clearpage{\relax}
%%\printindex[cases]
%%\printindex[legislation]
%%\renewcommand{\twocolumn}[1][]{\oldtwocolumn}
%%\renewcommand\clearpage{\oldclearpage}
%%}{}
%%\bigskip
%%\hrule%{0.8\linewidth}
%%\bigskip
%%}

%https://tex.stackexchange.com/questions/166414/including-cover-pictures-in-bibliography

\renewbibmacro*{finentry}{\finentry
  \iffieldundef{thumbnail}
    {}
    {\marginpar{\usefield{\insertbibimage}{thumbnail}}}}

%===================
\newcommand\lcsetindexingoff{\togglefalse{lcindexing}}
\newcommand\lcsetindexingon{\toggletrue{lcindexing}}


%=================== utility macros: display the bibentry using all cite commands
%----------------------
\newcommand\sdfs[1]{{\ttfamily\small\color{blue} \textbackslash #1\space\dotfill\space}}
\newcommand\sdft[1]{{\ttfamily\small\color{blue}\textbackslash #1}}
\newcommand\sdfg[1]{{\ttfamily\small\color{blue} #1\space\dotfill\space}}
\newcommand\boxsdfg[1]{%
\noindent\makebox[\lcdemolabelw][l]{\sdfg{#1}}
}

%\lcsetdemooff
\newcommand\lcdemolabelw{6cm}
\newcommand\lccitedemowidth{6cm}
%===============================================
\newcommand\lccitedemo[2]{%
\renewcommand\lcdemolabelw{\lccitedemowidth}

\noindent\fbox{#1}\vspace{2pt}

\lcsetstyledefault\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (default)}}Text\lawcite[#2]{#1}

\lcsetstylemlr\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (MLR)}}\lawcite[#2]{#1}

\lcsetstylemcgill\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (McGill)}}Text\lawcite[#2]{#1}

\lcsetstyleindigo\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (Indigo)}}\lawcite[#2]{#1}

\lcsetstyleaglc\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (AGLC)}}Text\lawcite[#2]{#1}

\lcsetstyledefault\setallabove\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (all above)}}\lawcite[#2]{#1}

\settitleonly\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (name only)}}\lawcite[#2]{#1}
\lcsetstyledefault%\medskip

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcinline}}\lcinline[#2]{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcinlinenn}}\lcinlinenn[#2]{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcfoot}}Text\lcfoot[#2]{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcnickname}}\lcnickname{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcitetitle}}\lawcitetitle{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawciteref}}\lawciteref{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcrefnn}}\lcrefnn{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcnote}}\lcnote{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcpostnote}}\lcpostnote[#2]{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcshorttitle}}\lcshorttitle{#1}

}


\newcommand\lccitedemowidthrr{5cm}
%===============================================
\newcommand\lccitedemorr[1]{%
\renewcommand\lcdemolabelw{\lccitedemowidthrr}

\noindent\fbox{#1}\vspace{2pt}

%\lcsetstyledefault\noindent\makebox[\lcdemolabelw][l]{lawcite (default)}Text\lawcite{#1}
%
%\lcsetstylemlr\noindent\makebox[\lcdemolabelw][l]{lawcite (MLR)}\lawcite{#1}
%
%\lcsetstylemcgill\noindent\makebox[\lcdemolabelw][l]{lawcite (McGill)}Text\lawcite{#1}
%
%\lcsetstyledefault\setallabove\noindent\makebox[\lcdemolabelw][l]{lawcite (all above)}\lawcite{#1}
%
%\settitleonly\noindent\makebox[\lcdemolabelw][l]{lawcite (name only)}\lawcite{#1}
%\lcsetstyledefault\medskip

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcinlinerr}}\lcinlinerr{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcinlinennrr}}\lcinlinennrr{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcfootrr}}Text\lcfootrr{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcnicknamerr}}\lcnicknamerr{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcitetitlerr}}\lawcitetitlerr{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawciterefrr}}\lawciterefrr{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcrefnnrr}}\lcrefnnrr{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcnoterr}}\lcnoterr{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcshorttitlerr}}\lcshorttitlerr{#1}

}




%===============================================





\newcommand\lccitedemowidthstat{5.5cm}
%===============================================
\newcommand\lccitedemostat[1]{%
\renewcommand\lcdemolabelw{\lccitedemowidthstat}

\noindent\fbox{#1}\vspace{2pt}

\lcsetstyledefault\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (default)}}\lawcite{#1}

\lcsetstylemlr\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (MLR)}}\lawcite{#1}

\lcsetstylemcgill\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (McGill)}}\lawcite{#1}

\lcsetstyledefault\setallabove\noindent\makebox[\lcdemolabelw][l]{\sdfs{lawcite (all above)}}\lawcite{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcciteref}}\lcciteref{#1}

}


\newcommand\lccitedemowidthlj{5cm}
%===============================================
\newcommand\lccitedemolj[1]{%
\renewcommand\lcdemolabelw{\lccitedemowidthlj}

\noindent\fbox{#1}\vspace{2pt}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{ljcite}}\ljcite{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcljauthor}}\lcljauthor{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcljauthorfn}}\lcljauthorfn{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcljtitle}}\lcljtitle{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcljyear}}\lcljyear{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcljvolume}}\lcljvolume{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcljjournaltitle}}\lcljjournaltitle{#1}

\noindent\makebox[\lcdemolabelw][l]{\sdfs{lcljpage}}\lcljpage{#1}
}


%=================== print the index
\newcommand\printlawciteindexes{%
\iftoggle{printlegtoc}{%
\let\oldtwocolumn\twocolumn
\renewcommand{\twocolumn}[1][]{##1}
\let\oldclearpage\clearpage
\renewcommand\clearpage{\relax}
\printindex[cases]
\printindex[legislation]
\iftoggle{printregulations}{\printindex[regulations]}{}
\renewcommand{\twocolumn}[1][]{\oldtwocolumn}
\renewcommand\clearpage{\oldclearpage}
}{}
}
%========================================== `lite' cite
\DeclareRefcontext{legalcase}{sorting=casesort}
\DeclareRefcontext{legalstat}{sorting=statsort}
\DeclareRefcontext{legalcasestat}{sorting=casestat}

\defbibheading{lm}{%
\section*{Legal Material}}

%============= legal
\DeclareFieldFormat[jurisdiction]{title}{\mkbibemph{#1}}
\DeclareFieldFormat[jurisdiction]{number}{#1}
\DeclareListFormat[jurisdiction]{location}{%
\mkbibparens{#1%
\ifthenelse{\value{listcount}<\value{liststop}}%
{\addcomma\space}%
{}}}

\newbibmacro{lclgetlegaltitle}{%
\printfield{title}%
}
\newbibmacro{lclgetlegalrefcase}{%
\iffieldundef{number}{}{\printfield{number}}%
}

\newbibmacro{lclgetlegalrefstat}{%
\iflistundef{location}{}{\printlist{location}}%
}

\newbibmacro{lclgetlegalref}{%
\usebibmacro{lclgetlegalrefstat}%
\usebibmacro{lclgetlegalrefcase}%
}




\newbibmacro{lclgetlegalfull}{%
\ifboolexpr{%
test {\ifentrytype{jurisdiction}}%
}%
{%true: jurisdiction entrytype
\usebibmacro{lclgetlegaltitle}%
\addspace%
\usebibmacro{lclgetlegalref}%
}%
{%false = not jurisdiction entrytype
\mkbibemph{\thefield{title}}%
\iffieldundef{number}{}{\addspace\thefield{number}}%case
\iflistundef{location}{}{\addspace\mkbibparens{\printlist{location}}}%statute
}%
}

\DeclareCiteCommand{legal}%
{%
\usebibmacro{prenote}%
}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{lclgetlegalfull}%
}%end item
%@@@@@@@@@@@@@@@@ delim
{%
\multicitedelim%
}%
%@@@@@@@@@@@@@@@@ postnote
{%
\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
}

%
\DeclareBibliographyDriver{jurisdiction}{%
 \usebibmacro{begentry}%
   \usebibmacro{lclgetlegalfull}%
 \usebibmacro{finentry}
}




%-------------------------
%\DeclareFieldFormat{courtname}{#1}%already defined
\DeclareFieldFormat{courtdivision}{#1}
\DeclareFieldFormat{courtlist}{#1}
\DeclareFieldFormat{courtjurisdiction}{#1}
\DeclareFieldFormat{courtcasenumber}{#1}


\newbibmacro{getcaseproc}{%
\iffieldundef{courtname}{}{\addcomma\addspace\printfield{courtname}}%
\iffieldundef{courtdivision}{}{\addcomma\addspace\printfield{courtdivision}}%
\iffieldundef{courtlist}{}{\addcomma\addspace\printfield{courtlist}}%
\iffieldundef{courtjurisdiction}{}{\addcomma\addspace\printfield{courtjurisdiction}}%
\iffieldundef{courtcasenumber}{}{\addcomma\addspace\printfield{courtcasenumber}}%
}



\newbibmacro{getproc}{%
\ifciteseen{\usebibmacro{getcasename}}{%
 \usebibmacro{getcasename}%
  \usebibmacro{getcaseproc}}%
}

\newbibmacro{indexcaseparm}{%
\sindex[cases]{%
\thefield{partya}\thefield{partyb}@%for sorting
%partynames = casename
\iftoggle{partynamesitalic}{%start italic
\textit{%
\iffieldundef{shipname}{\thefield{partya}\iffieldundef{partyajur}{}{ (\thefield{partyajur})}%no space, for one party only; space if partyb (before v)
\iffieldundef{partyb}{}{ \iffieldundef{partysep}{\iftoggle{partysepitalic}{\textit{v}}{\textup{v}}}{\iftoggle{partysepitalic}{\textit{\thefield{partysep}}}{\textup{\thefield{partysep}}}}\iftoggle{partysepdotted}{.}{} \thefield{partyb}\iffieldundef{partybjur}{}{ (\thefield{partybjur})}}}{\thefield{shipname}, The}}}%end italic
{%
\iffieldundef{shipname}{\thefield{partya}\iffieldundef{partyajur}{}{ (\thefield{partyajur})}%no space, for one party only; space if partyb (before v)
\iffieldundef{partyb}{}{ \iffieldundef{partysep}{\iftoggle{partysepitalic}{\textit{v}}{\textup{v}}}{\iftoggle{partysepitalic}{\textit{\thefield{partysep}}}{\textup{\thefield{partysep}}}}\iftoggle{partysepdotted}{.}{} \thefield{partyb}\iffieldundef{partybjur}{}{ (\thefield{partybjur})}}}{\thefield{shipname}, The}}%
%proceedings reference, if any
\iffieldundef{courtcasenumber}{}{%
\iffieldundef{courtname}{}{, \thefield{courtname}}%
\iffieldundef{courtdivision}{}{, \thefield{courtdivision}}%
\iffieldundef{courtlist}{}{, \thefield{courtlist}}%
\iffieldundef{courtjurisdiction}{}{, \thefield{courtjurisdiction}}%
, \thefield{courtcasenumber}}%
%caseref
\iftoggle{refintoc}{% 1st character is a space
\iftoggle{commainindex}{,}{}\addspace\iffieldundef{casenumber}{}{\iftoggle{mncbrackets}{[}{}\thefield{caseyear}\iftoggle{mncbrackets}{]}{} \thefield{courtname} \thefield{casenumber}}%
%\iffieldundef{reportpage}{}{\thefield{reportyear} \thefield{reportvolume} \thefield{reportseries} \thefield{reportpage}} %
\iffieldundef{reportpage}{}{%
\iffieldundef{casenumber}{}{, }% s/b delimiter ***
\iffieldundef{reportyear}{}{%
\iffieldundef{reportvolume}{ [}{%
\iffieldundef{volyearneeded}{ (}{ [}}%
\thefield{reportyear}%
\iffieldundef{reportvolume}{]}{%
\iffieldundef{volyearneeded}{)}{]}} }%
\thefield{reportvolume} %
\thefield{reportseries} %  use \mkbibordinal{}?
\thefield{reportpage}%
}%end if reportpage
}%end refintoc true
{%start refintoc false
\iffieldundef{icaseyear}{\iffieldundef{caseyear}{\iffieldundef{reportyear}{}{ (\thefield{reportyear})}}{ (\thefield{caseyear})}}{ (\thefield{icaseyear})}%
}%end refintoc false
\lcparnumrefsencap}%end sindex
}

\newbibmacro{getprocindex}{%
\usebibmacro{indexcaseparm}%
}%



%------------------------- (in-progress) proceedings
\DeclareCiteCommand{lcproc}%
{%
\usebibmacro{prenote}%
}%
%@@@@@@@@@@@@@@@@ item
{%
\usebibmacro{getproc}%
\usebibmacro{getprocindex}
}%end item
%@@@@@@@@@@@@@@@@ delim
{%
\multicitedelim%
}%
%@@@@@@@@@@@@@@@@ postnote
{%
\usebibmacro{postnote}%
 \usebibmacro{getann:noter:comm}%
}







%==========================================
%Numbered paragraphs: pre-formatting
\newcommand\numpardelimpre{}
\newcommand\numparshiftleft{}
\newcommand\numparfillright{}
\newcommand\numparindent{}
\newcommand\numparformat{}
\newcommand\numpardelimleft{[}
\newcommand\numpardelimright{]}
\newcommand\numpardelimpost{\ }
\newsavebox{\mybox}


%Numbered paragraphs
\newcounter{parno}%[paragraph]%% numbered paragraph
\renewcommand{\theparno}{\arabic{parno}}
\newcommand{\p}{\refstepcounter{parno}\numpardelimpre\noindent\numparshiftleft{\savebox{\mybox}{\mbox{\numparformat\numpardelimleft\theparno\numpardelimright}}\usebox{\mybox}}\label{para.\theparno}\numparfillright\numparindent\numpardelimpost}
\setcounter{secnumdepth}{4}
\setcounter{parno}{0}

%Numbered paragraphs: formatting
\newcommand\setnumparshiftleft[1]{\renewcommand\numparshiftleft{#1}}
\newcommand\setnumparfillright[1]{\renewcommand\numparfillright{#1}}
\newcommand\setnumparindent[1]{\renewcommand\numparindent{#1}}
\newcommand\setnumparformat[1]{\renewcommand\numparformat{#1}}
\newcommand\setnumpardelimleft[1]{\renewcommand\numpardelimleft{#1}}
\newcommand\setnumpardelimright[1]{\renewcommand\numpardelimright{#1}}
\newcommand\setnumpardelimpost[1]{\renewcommand\numpardelimpost{#1}}



%numbered paragraphs cross-referencing method
\newcommand\definname{para}
\newcommand{\paradef}[1]{\label{#1}}
%\newcommand\pararef[1]{\definname\ [\ref{#1}]}
\newcommand\pararef[1]{\definname\ \iftoggle{parabrackets}{[\ref{#1}]}{\ref{#1}}}

%user bib commands
\newcommand\lcat[1]{\bibstring{onlyat}~#1}
\newcommand\lcsec[1]{\bibstring{section}~#1}
\newcommand\lcsecyr[2]{\bibstring{section}~#1\addspace\mkbibparens{#2}}
\newcommand\lcssec[1]{\bibstring{sections}~#1}
\newcommand\lcssecyr[2]{\bibstring{sections}~#1\addspace\mkbibparens{#2}}
\newcommand\lcpara[1]{\mkbibbrackets{#1}}
\newcommand\lcparas[2]{\mkbibbrackets{#1}--\mkbibbrackets{#2}}
\newcommand\lcatpara[1]{\bibstring{atparagraph}\addspace\mkbibbrackets{#1}}
\newcommand\lcatparas[2]{\bibstring{atparagraph}\addspace\mkbibbrackets{#1}--\mkbibbrackets{#2}}

%===================
%misc general commands
\newcommand\setindexhyperlinks{%
\iftoggle{lcparnumrefs}{%
\renewcommand\myhyperref[1]{\ref{para.##1}}%
\renewcommand\lcparnumrefsencap{|myhyperref}%
}%end true
{%false
\renewcommand\myhyperref[1]{\hyperpage{##1}}%
\renewcommand\lcparnumrefsencap{|myhyperref}%
}%end false
}

\newcommand\setpostnotedelimoff{%
\DeclareFieldFormat{postnote}{##1}%
}
\newcommand\setpostnotedelimon{%
\DeclareFieldFormat{postnote}{\mkpageprefix[pagination][\mknormrange]{##1}}%
}
%

%===============================================
%===================
\endinput
\end{filecontents*}

\begin{filecontents*}[overwrite]{english-lawcitemini.lbx}
  \ProvidesFile{english-lawcitemini.lbx}[2019/04/09 english with additions for legal citations]
  \InheritBibliographyExtras{english}
  \NewBibliographyString{versus,case,act,
  %singular
  appendix,
article,
chapter,
clause,
division,
paragraph,
part,
schedule,
section,
sub-clause,
subdivision,
sub-paragraph,
subsection,
%plural
appendixes,
articles,
chapters,
clauses,
divisions,
paragraphs,
parts,
schedules,
sections,
sub-clauses,
subdivisions,
sub-paragraphs,
subsections,
%canadian
canchapter,
%delleg - singular
order,
regulation,
rule,
sub-regulation,
sub-rule,
%delleg - plural
orders,
regulations,
rules,
sub-regulations,
sub-rules,
atparagraph,
atparagraphs,
legaled,
legalon,
possessive,
%helper texts
ibid,
ibidsupra,
ibidsupran,
ibidsupranote,
onlyat,
quotedin,
}
  \DeclareBibliographyStrings{%
    inherit   = {english},
    versus = {{versus}{v}},
    case = {{case}{case}},
    act = {{Act}{Act}},
    % singular
appendix = {{appendix}{app}},
article = {{article}{art}},
chapter = {{chapter}{ch}},
clause = {{clause}{cl}},
division = {{division}{div}},
paragraph = {{paragraph}{para}},
part = {{part}{pt}},
schedule = {{schedule}{sch}},
section = {{section}{s}},
sub-clause = {{sub-clause}{sub-cl}},
subdivision = {{subdivision}{sub-div}},
sub-paragraph = {{sub-paragraph}{sub-para}},
subsection = {{subsection}{sub-s}},
ibid = {{ibid}{ibid}},
%plural
appendixes = {{appendixes}{apps}},
articles = {{articles}{arts}},
chapters = {{chapters}{chs}},
clauses = {{clauses}{cls}},
divisions = {{divisions}{divs}},
paragraphs = {{paragraphs}{paras}},
parts = {{parts}{pts}},
schedules = {{schedules}{schs}},
sections = {{sections}{ss}},
sub-clauses = {{sub-clauses}{sub-cls}},
subdivisions = {{subdivisions}{sub-divs}},
sub-paragraphs = {{sub-paragraphs}{sub-paras}},
subsections = {{subsections}{sub-ss}},
%can
canchapter = {{chapter}{c}},
%delleg - singular
order = {{Order}{O}},
regulation = {{Regulation}{reg}},
rule = {{Rule}{r}},
sub-regulation = {{Sub-regulation}{sub-reg}},
sub-rule = {{Sub-rule}{sub-r}},
%delleg - plural
orders = {{Orders}{OO}},
regulations = {{Regulations}{regs}},
rules = {{Rules}{rr}},
sub-regulations = {{Sub-regulations}{sub-regs}},
sub-rules = {{Sub-rules}{sub-rr}},
%
atparagraph = {{at paragraph}{at para}},
atparagraphs = {{at paragraphs}{at paras}},
legaled = {{ed}{ed}},
legalon = {{on}{on}},
possessive = {{'s}}{{'s}},
ibidsupra = {{supra}}{{supra}},
ibidsupran = {{n}}{{n}},
ibidsupranote = {{note}}{{note}},
onlyat = {{at}}{{at}},
quotedin = {{quoted in}}{{quoted in}},
  }


\endinput

\end{filecontents*}

\begin{filecontents*}[overwrite]{clist\jobname.bib}

@statute{canconst1982,statutetitle = {Canada Act},note = {Constitution Act 1982},statutejurisdiction = {UK},statuteregnalyear = {c 11, sch B},statutetitleyear = {1982},}
@statute{canconst1867,statutetitle = {Constitution Act},note = {Constitution Act 1867},statutejurisdiction = {Imp},statuteregnalyear = {30 \& 31 Vict c 3},statutetitleyear = {1867},}
@statute{cancharter,statutetitle = {Canada Act},note = {Canadian Charter of Rights and Freedoms},statutejurisdiction = {UK},statuteregnalyear = {c 11, sch B pt I},statutetitleyear = {1982},}

@case{testanc1,partya = {Test},partyb = {ANC field},annotation = {This is an annotation field.},noterup = {This is a noterup field.},commentary = {This is a commentary field.},}
@case{testanc2,partya = {Test},partyb = {ANC file},}

@case{rta1979,partya =  {Re Residential Tenancies Act, 1979},caseyear =  {1981},courtname =  {CanLII},casenumber =  {24},pagination =  {atparagraph},reportyear =  {1981},reportvolume =  {1},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {714},mncurl =  {https://www.canlii.org/en/ca/scc/doc/1981/1981canlii24/1981canlii24.html},}
@case{ccpref,partya =  {Reference re Code of Civil Procedure (Que.), art. 35},caseyear =  {2021},courtname =  {SCC},casenumber =  {27},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgnxz},linkname =  {CanLII},}
@case{edwardsa,partya =  {Edwards},partyb =  {Attorney‑General for Canada},caseshortname =  {Edwards},caseyear =  {1929},courtname =  {CanLII},casenumber =  {438 (UK JCPC)},reportyear =  {1930},reportseries =  {AC},reportpage =  {134},mncurl =  {https://www.canlii.org/en/ca/ukjcpc/doc/1929/1929canlii438/1929canlii438.html},note =  {PC},casenickname =  {Persons},}
@case{edwardsa2,partya =  {Edwards},partyb =  {AG of  Canada},caseshortname =  {Edwards},caseyear =  {1929},courtname =  {CanLII},casenumber =  {438 (UKPC)},reportyear =  {1930},reportseries =  {AC},reportpage =  {134},mncurl =  {https://www.canlii.org/en/ca/ukjcpc/doc/1929/1929canlii438/1929canlii438.html},note =  {PC},casenickname =  {The Persons Case},}
@case{reece,partya = {Reece},partyb = {Edmonton (City)},caseyear = {2011},courtname = {ABCA},casenumber = {238},reportvolume = {335},reportseries = {DLR (4th)},reportpage = {600},}
@case{reece2,partya = {Reece},partyb = {Edmonton (City)},reportyear = {2011},volyearneeded = {true},reportseries = {SCCA No},reportpage = {447},}
@case{joly,partya = {Joly},partyb = {Pelletier},reportyear = {1999},volyearneeded = {true},reportseries = {OJ No},reportpage = {1728 (QL)},note = {Ont Sup Ct J},parallel = {1999 CarswellOnt 1587},}
@statute{canconst1867b,statutetitle = {The Constitution Act},statuteregnalyear = {30 \& 31 Vict, c3},statutetitleyear = {1867},pagination = {section},}

@case{rta1996,partya =  {Reference re Amendments to the Residential Tenancies Act (N.S.)},caseshortname =  {Residential Tenancies Act (1996)},caseyear =  {1996},courtname =  {CanLII},casenumber =  {259},pagination =  {atparagraph},reportyear =  {1996},reportvolume =  {1},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {186},mncurl =  {https://www.canlii.org/en/ca/scc/doc/1996/1996canlii259/1996canlii259.html},}

@case{hmb,partya = {H.M.B. Holdings Ltd.},partyb = {Antigua and Barbuda},caseyear = {2021},courtname = {SCC},casenumber = {44},linkname = {CanLII},url = {https://www.canlii.org/en/ca/scc/doc/2021/2021scc44/2021scc44.html},pagination = {atparagraph},}

@case{hmb2,partya = {H.M.B. Holdings Ltd.\@},partyb = {Antigua and Barbuda},caseyear = {2021},courtname = {SCC},casenumber = {44},linkname = {CanLII},url = {https://www.canlii.org/en/ca/scc/doc/2021/2021scc44/2021scc44.html},pagination = {atparagraph},}


@case{bata,partya =  {British American Tobacco Australia Ltd},partyb =  {Western Australia},caseshortname =  {BATA},caseyear =  {2003},courtname =  {HCA},casenumber =  {47},pagination =  {onlyat},reportyear =  {2003},reportvolume =  {217},reportseries =  {CLR},reportpage =  {30},mncurl =  {http://www.austlii.edu.au/cgi-bin/viewdoc/au/cases/cth/HCA/2003/47.html},}

@case{bivens,partya =  {Bivens},partyb =  {Six Unknown Named Agents of Federal Bureau of Narcotics},caseshortname =  {Bivens},caseyear =  {1971},courtname =  {USSC},casenumber =  {133},reportyear =  {1971},reportvolume =  {403},reportseries =  {US},reportpage =  {388},mncurl =  {http://www.worldlii.org/us/cases/federal/USSC/1971/133.html},}

@case{ajl20,partya =  {Commonwealth of Australia},partyb =  {AJL20},caseshortname =  {AJL20},caseyear =  {2021},courtname =  {HCA},casenumber =  {21},pagination =  {atparagraph},url =  {http://www.austlii.edu.au/cgi-bin/viewdoc/au/cases/cth/HCA//2021/21.html},linkname =  {AustLII},}

@statute{maanulth,title =  {Maanulth First Nations Final Agreement Act},citeref =  {canleg},svjy =  {SC 2009},chapter =  {18},url =  {https://canlii.ca/t/l292},linkname =  {CanLII},}

@ljarticle{kleefeld,author =  {John C Kleefeld},title =  {Book Review - OSCOLA, the Oxford Standard for Citation of Legal Authorities},mncyear =  {2013},mncname =  {CanLIIDocs},mncnumber =  {760},date =  {2013},volume =  {13},number =  {1},journaltitle =  {Dalhousie Law Journal},pages =  {269},url =  {https://canlii.ca/t/t0zv},shortname =  {Kleefeld},}

@case{collins,partya =  {R},partyb =  {Collins},caseyear =  {1987},courtname =  {CanLII},casenumber =  {84},pagination =  {atparagraph},reportyear =  {1987},reportvolume =  {1},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {265},url =  {https://decisions.scc-csc.ca/scc-csc/scc-csc/en/item/201/index.do},linkname =  {SCC site},mncurl =  {https://canlii.ca/t/1ftnd},}

@case{admiralty,partya =  {Admiralty Action In Rem},partyb =  {M/V Atchafalaya (Ship)},caseyear =  {2009},courtname =  {FC},casenumber =  {273},pagination =  {atparagraph},url =  {https://canlii.ca/t/232t3},linkname =  {CanLII},shipname =  {Atchafalaya},}


@book{lrcns,author =  {{Law Reform Commission of Nova Scotia}},title =  {The Rule Against Perpetuities},subtitle =  {Final Report},date =  {2017},keywords={lawbook},}

@case{norfolk,partya =  {Duke of Norfolk},partyb =  {Howard},}
@case{norfolkcc,reportyear =  {1682},reportvolume =  {3},reportseries =  {Ch Cas},reportpage =  {1},crossref =  {norfolk},}
@case{norfolker,reportvolume =  {22},reportseries =  {ER},reportpage =  {931},crossref =  {norfolk},}


@book{waters,author =  {Donovan W M Waters},title =  {Waters' Law of Trusts in Canada},publisher =  {Thomson Carswell},date =  {2005},keywords={lawbook},}

@statute{reci,title =  {Canada and United Kingdom Reciprocal Recognition and Enforcement of Judgments Act},citeref =  {canleg},svjy =  {RSNS 1989},chapter =  {52},}
@statute{dfns,title =  {Dairy Farmers of Nova Scotia By-laws},citeref =  {nsreg},year =  {2007},regnum =  {366},}
@statute{garage,title =  {Garage Keepers Lien Act},citeref =  {canleg},svjy =  {RSNWT 1988},chapter =  {G-1},}
@statute{hamlet,title =  {Hamlet Debt Regulations},citeref =  {nwtreg},year =  {2005},regnum =  {071},}


@statute{tbgho,title =  {Thunder Bay Grain Handling Operations Act},citeref =  {canleg},svjy =  {SC 1991},chapter =  {31},}

@statute{tcca,title =  {Tax Court of Canada Act},citeref =  {canleg},svjy =  {RSC 1985},chapter =  {T-2},}

@statute{fisc,title =  {Fabricated Industrial Steel Components Anti-dumping and Countervailing Duty Remission Order},citeref =  {sorreg},year =  {2019},regnum =  {297},}

@case{trans,partya =  {Tsleil-Waututh Nation},partyb =  {Canada (Attorney General)},caseshortname =  {Trans},caseyear =  {2018},courtname =  {FCA},casenumber =  {153},pagination =  {atparagraph},reportyear =  {2019},reportvolume =  {2},volyearneeded =  {true},reportseries =  {FCR},reportpage =  {3},url =  {https://canlii.ca/t/htq8p},linkname =  {CanLII},mncurl =  {https://decisions.fca-caf.gc.ca/fca-caf/decisions/en/item/343511/index.do},casenickname =  {the Trans Mountain},}

@case{seidel ,partya =  {Seidel },partyb =  {Seidel },caseshortname =  {Seidel },caseyear =  {2021},courtname =  {SKCA},casenumber =  {92},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgl4w},linkname =  {CanLII},note =  {with note},}
@case{whincup,partya =  {R},partyb =  {Whincup},caseshortname =  {Whincup},caseyear =  {2021},courtname =  {MBCA},casenumber =  {64},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgjsc},linkname =  {CanLII},note =  {with note},}
@case{smeltzer,partya =  {R},partyb =  {Smeltzer},caseshortname =  {Smeltzer},caseyear =  {2021},courtname =  {ONCA},casenumber =  {472},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgl9v},linkname =  {CanLII},note =  {a s8 Charter case},}
@case{industrie,partya =  {Comité paritaire de l'industrie de l'automobile des régions de Lanaudière-Laurentides},partyb =  {9308-0588 Québec inc},caseshortname =  {l'industrie de l'automobile},caseyear =  {2021},courtname =  {QCCA},casenumber =  {1048},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgknn},linkname =  {CanLII},partysep =  {c},}
@case{beck,partya =  {Beck},partyb =  {R},caseshortname =  {Beck},caseyear =  {2021},courtname =  {NBCA},casenumber =  {33},pagination =  {atparagraph},url =  {https://canlii.ca/t/jglbm},linkname =  {CanLII},partysep =  {c},}
@case{gardner,partya =  {R},partyb =  {Gardner and Fraser},caseshortname =  {Gardner and Fraser},caseyear =  {2021},courtname =  {NSCA},casenumber =  {52},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgkvk},linkname =  {CanLII},casenickname =  {the death in custody},}
@case{mcneil,partya =  {McNeil},partyb =  {WCAT (PEI)},caseshortname =  {McNeil},caseyear =  {2021},courtname =  {PECA},casenumber =  {9},pagination =  {atparagraph},url =  {https://canlii.ca/t/jfzrm},linkname =  {CanLII},note =  {with note},}
@case{austin,partya =  {Austin},partyb =  {Dunne},caseshortname =  {Austin},caseyear =  {2021},courtname =  {NLCA},casenumber =  {38},pagination =  {atparagraph},url =  {https://canlii.ca/t/jglbj},linkname =  {CanLII},}
@case{scc,partya =  {R},partyb =  {SCC},caseshortname =  {the assistance of counsel case},caseyear =  {2021},courtname =  {YKCA},casenumber =  {4},pagination =  {atparagraph},url =  {https://canlii.ca/t/jf4ff},linkname =  {CanLII},}
@case{mubili,partya =  {Mubili},partyb =  {Northwest Territories (Administrator, Maintenance Enforcement)},caseshortname =  {the maintenance case},caseyear =  {2021},courtname =  {NWTCA},casenumber =  {5},pagination =  {atparagraph},url =  {https://canlii.ca/t/jfpfv},linkname =  {CanLII},}
@case{cd,partya =  {R},partyb =  {CD},caseshortname =  {CD},caseyear =  {2021},courtname =  {NUCA},casenumber =  {10},pagination =  {atparagraph},url =  {https://canlii.ca/t/jg8mx},linkname =  {CanLII},}



@case{peters,partya =  {Peters},partyb =  {Atchooay},caseshortname =  {Peters},caseyear =  {2021},courtname =  {ABCA},casenumber =  {237},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgl9t},linkname =  {CanLII},}

@case{eisler,partya =  {Eisler Estate},partyb =  {GWR Resources Inc},caseshortname =  {Eisler},caseyear =  {2021},courtname =  {BCCA},casenumber =  {247},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgkjt},linkname =  {CanLII},}


@case{chouhan,partya =  {R},partyb =  {Chouhan},caseshortname =  {Chouhan},caseyear =  {2021},courtname =  {SCC},casenumber =  {26},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgkzb},linkname =  {CanLII},}

\end{filecontents*}


\begin{filecontents*}[overwrite]{\jobname.bib}


@xdata{cup,publisher =  {Cambridge University Press},}

@quote{q5,quotetext =  {The analogy between the process of the legal trial and the techniques and concerns of the English novel has often been remarked upon},crossref =  {litlaw},options={skipbib=true},}

@quote{q9,quotetext =  { In this appeal, the Court is called upon to answer the age-old question:  If a tree falls in the forest and you are not around to replant it, how does it affect your taxes? },crossref =  {dmi},options={skipbib=true},}

@quote{q10,quotetext =  {We are entitled to assume that lawyers have not only some general background in law, but that they have some general background in obtaining information from electronic data bases and are using appropriate means to acquire that information.},crossref =  {kelly},options={skipbib=true}, related={atkinson},relatedtype={quotedin},}

@quote{q11,quotetext =  {Sitting judges swear an oath that they will decide cases on the law and the evidence themselves, not blindly accept the say-so of others or abdicate the decision to others. As well, for many other reasons, retired judges’ opinions do not have as much influence on sitting judges as some might suppose.},crossref =  {coldwater},options={skipbib=true},}

@quote{q12,quotetext =  {Admissible evidence that is given no weight is just as useless as inadmissible evidence.},crossref =  {coldwater},options={skipbib=true},}

@quote{q13,quotetext =  {What lens does this Court now apply to the hearing judge’s reviews?},crossref =  {colchester},options={skipbib=true},}

@quote{q14,quotetext =  {We have been building an impressive structure brick by brick for many years, but without any apparent overall design, and we have not stepped back to examine the coherence of the net result.},crossref =  {ryder},options={skipbib=true},}

@quote{q119,crossref = {chow},quotepinpoint = {1},quotetext = {Smartphones are ubiquitous in modern society and a principal means by which vast numbers of individuals communicate with one another. Much of that communication is in the form of telephone calls and text messages. – Skolrood J},options = {skipbib=true},pagination =  {atparagraph},
}

@case{casetest,
attribution = {attribution},
casename = {casename},
casenickname = {casenickname},
casenumber = {casenumber},
caseshortname = {caseshortname},
casestatus = {casestatus},
caseyear = {caseyear},
courtcasenumber = {courtcasenumber},
courtdivision = {courtdivision},
courtfullname = {courtfullname},
courtjurisdiction = {courtjurisdiction},
courtlist = {courtlist},
courtname = {courtname},
decisionyear = {decisionyear},
icaseyear = {icaseyear},
linkname = {linkname},
mncurl = {mncurl},
note = {note},
parallel = {parallel},
partya = {partya},
partyajur = {partyajur},
partyasn = {partyasn},
partyb = {partyb},
partybjur = {partybjur},
partybsn = {partybsn},
partysep = {partysep},
partysepx = {partysepx},
reportpage = {reportpage},
reportseries = {reportseries},
reportvolume = {reportvolume},
reportyear = {reportyear},
shipname = {shipname},
url = {www.dummy.com},
volyearneeded = {true},
}

@case{casetestb,
attribution = {attribution},
casename = {casename},
casenickname = {casenickname},
casenumber = {casenumber},
caseshortname = {caseshortname},
casestatus = {casestatus},
caseyear = {caseyear},
courtcasenumber = {courtcasenumber},
courtdivision = {courtdivision},
courtfullname = {courtfullname},
courtjurisdiction = {courtjurisdiction},
courtlist = {courtlist},
courtname = {courtname},
decisionyear = {decisionyear},
icaseyear = {icaseyear},
linkname = {linkname},
mncurl = {mncurl},
note = {note},
parallel = {parallel},
partya = {partya},
partyajur = {partyajur},
partyasn = {partyasn},
partyb = {partyb},
partybjur = {partybjur},
partybsn = {partybsn},
partysep = {partysep},
partysepx = {partysepx},
reportpage = {reportpage},
reportseries = {reportseries},
reportvolume = {reportvolume},
reportyear = {reportyear},
%shipname = {shipname},
url = {www.dummy.com},
volyearneeded = {true},
}

@case{casetestc,
attribution = {attribution},
casename = {casename},
casenickname = {casenickname},
casenumber = {casenumber},
caseshortname = {caseshortname},
casestatus = {casestatus},
caseyear = {caseyear},
courtcasenumber = {courtcasenumber},
courtdivision = {courtdivision},
courtfullname = {courtfullname},
courtjurisdiction = {courtjurisdiction},
courtlist = {courtlist},
courtname = {courtname},
decisionyear = {decisionyear},
icaseyear = {icaseyear},
linkname = {linkname},
mncurl = {mncurl},
note = {note},
parallel = {parallel},
partya = {partya},
%partyajur = {partyajur},
%partyasn = {partyasn},
partyb = {partyb},
%partybjur = {partybjur},
%partybsn = {partybsn},
partysep = {partysep},
%partysepx = {partysepx},
reportpage = {reportpage},
reportseries = {reportseries},
reportvolume = {reportvolume},
reportyear = {reportyear},
%shipname = {shipname},
url = {www.dummy.com},
volyearneeded = {true},
}

@statute{statutetest,
chapter = {chapter},
citeref = {canleg},%
fulldate = {fulldate},
gazette = {gazette},
linkname = {linkname},
mncurl = {mncurl},
regnum = {regnum},
statutechapter = {statutechapter},
statutejurisdiction = {statutejurisdiction},
statutelongtitle = {statutelongtitle},
statutenickname = {statutenickname},
statuteregnalyear = {statuteregnalyear},
statuteshorttitle = {statuteshorttitle},
statutetitle = {statutetitle},
statutetitleyear = {statutetitleyear},
statutevolume = {statutevolume},
statuteyear = {statuteyear},
svjy = {svjy},
title = {title},
url = {www.dummy.com},
year = {year},
}

@ljarticle{ljarticletest,
author = {author},
date = {2021},
journaltitle = {journaltitle},
keywords = {keywords},
mncname = {mncname},
mncnumber = {mncnumber},
mncyear = {mncyear},
note = {note},
pages = {pages},
shortname = {shortname},
title = {title},
volume = {volume},
}

@ljarticle{ryder,author =  {Bruce Ryder},title =  {The Past and Future of Canadian Generalist Law Journals},mncyear =  {2001},mncname =  {CanLIIDocs},mncnumber =  {128},date =  {2001},volume =  {39},number =  {3},journaltitle =  {Alberta Law Review},pages =  {625},url =  {https://canlii.ca/t/2dd2},shortname =  {Ryder},}

@statute{ppi,title =  {Act respecting Access to documents held by public bodies and the Protection of personal information},citeref =  {canleg},svjy =  {CQLR},chapter =  {A-2.1},}


@case{colchester,partya =  {Colchester County (Municipality)},partyb =  {Colchester Containers Limited},caseshortname =  {Colchester},caseyear =  {2021},courtname =  {NSCA},casenumber =  {53},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgkvm},linkname =  {CanLII},}



@case{araujo,partya =  {R},partyb =  {Araujo},caseshortname =  {Araujo},caseyear =  {2000},courtname =  {SCC},casenumber =  {65},pagination =  {atparagraph},reportyear =  {2000},reportvolume =  {2},reportseries =  {SCR},reportpage =  {992},url =  {https://canlii.ca/t/5231},linkname =  {CanLII},mncurl =  {https://decisions.scc-csc.ca/scc-csc/scc-csc/en/item/1830/index.do},volyearneeded =  {true}, }

@case{coldwater,partya =  {Coldwater First Nation},partyb =  {Canada (Attorney General)},caseshortname =  {Coldwater First Nation},caseyear =  {2019},courtname =  {FCA},casenumber =  {292},pagination =  {atparagraph},url =  {https://canlii.ca/t/j3mj2},linkname =  {CanLII},mncurl =  {https://decisions.fca-caf.gc.ca/fca-caf/decisions/en/453414/1/document.do},}


@case{atkinson,partya =  {Atkinson},partyb =  {McGregor (3)},caseshortname =  {Atkinson},caseyear =  {1998},courtname =  {ABQB},casenumber =  {629},reportyear =  {1998},reportvolume =  {66},reportseries =  {Alta LR (3rd)},reportpage =  {289},url =  {https://canlii.ca/t/5q4d},linkname =  {CanLII},pagination =  {atparagraph},}


@case{kelly,partya =  {Kelly},partyb =  {Lundgard},caseshortname =  {Kelly Costs Memorandum},casestatus =  {unreported, Memorandum as to costs for computer charges, 1997},courtfullname =  {Alberta Court of Queen's Bench},attribution =  {Veit J},}

@book{litlaw,author =  {Kieran Dolin},title =  {Fiction and the Law},subtitle =  {Legal Discourse in Victorian and Modernist Literature},date =  {1999},isbn =  {9780521623322},xdata =  {cup},}

@case{dmi,partya =  {Daishowa‑Marubeni International Ltd},partyb =  {Canada},caseshortname =  {DMI},caseyear =  {2013},courtname =  {SCC},casenumber =  {29},pagination =  {atparagraph},reportyear =  {2013},reportvolume =  {2},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {336},url =  {https://canlii.ca/t/fxk76},linkname =  {CanLII},mncurl =  {https://decisions.scc-csc.ca/scc-csc/scc-csc/en/item/13071/index.do},}


@case{clark,partya =  {Ontario (Attorney General)},partyb =  {Clark},caseshortname =  {Clark},caseyear =  {2021},courtname =  {SCC},casenumber =  {18},pagination =  {atparagraph},url =  {https://canlii.ca/t/jfnmp},linkname =  {CanLII},mncurl =  {https://decisions.scc-csc.ca/scc-csc/scc-csc/en/item/18855/index.do},}
@case{sherman,partya =  {Sherman Estate},partyb =  {Donovan},caseshortname =  {Sherman},caseyear =  {2021},courtname =  {SCC},casenumber =  {25},pagination =  {atparagraph},url =  {https://canlii.ca/t/jgc4w},linkname =  {CanLII},mncurl =  {https://decisions.scc-csc.ca/scc-csc/scc-csc/en/item/18914/index.do},}


@case{mckay,partya =  {McKay},partyb =  {The Queen},caseshortname =  {McKay},reportyear =  {1965},reportseries =  {SCR},reportpage =  {798},url =  {https://canlii.ca/t/1nlkt},linkname =  {CanLII},}
@case{opseu,partya =  {Ontario (Attorney General)},partyb =  {OPSEU},caseshortname =  {OPSEU},reportyear =  {1987},reportvolume =  {2},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {2},url =  {https://canlii.ca/t/1ftn6},linkname =  {CanLII},}


@case{mnr,partya =  {Minister of National Revenue},partyb =  {Coopers and Lybrand},caseshortname =  {MNR},reportyear =  {1979},reportvolume =  {1},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {495},url =  {https://canlii.ca/t/1mkt6},linkname =  {CanLII},}
@case{randolph,partya =  {R},partyb =  {Randolph},caseshortname =  {Randolph},reportyear =  {1966},reportseries =  {SCR},reportpage =  {260},url =  {https://canlii.ca/t/227qn},linkname =  {CanLII},}


@case{hunter,partya =  {Hunter},partyb =  {Southam Inc},caseshortname =  {Hunter},reportyear =  {1984},reportvolume =  {2},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {145},url =  {https://canlii.ca/t/1mgc1},linkname =  {CanLII},}
@case{edwards,partya =  {Edwards},partyb =  {Canada (Attorney General)},caseshortname =  {Edwards},reportyear =  {1930},reportseries =  {AC},reportpage =  {124},url =  {https://canlii.ca/t/gbvs4},linkname =  {CanLII},parallel =  { [1930] 1 DLR 98 and [1929] 3 WWR 479 and [1929] All ER Rep 571 and 46 TLR 4},note =  {PC},}

@case{buhayca,partya =  {R},partyb =  {Buhay},caseshortname =  {Buhay},reportvolume =  {156},reportseries =  {ManR (2d)},reportpage =  {111},url =  {https://canlii.ca/t/1fkf5},linkname =  {CanLII},decisionyear =  {2001},note =  {MB CA},}

@case{buhay,partya =  {R},partyb =  {Buhay},caseshortname =  {Buhay},caseyear =  {2003},courtname =  {SCC},casenumber =  {30},pagination =  {atparagraph},reportyear =  {2003},reportvolume =  {1},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {631},url =  {https://canlii.ca/t/1g6p7},linkname =  {CanLII},}
@case{buhay2,partya =  {R},partyb =  {Buhay},caseshortname =  {Buhay},caseyear =  {2003},courtname =  {SCC},casenumber =  {30},pagination =  {atparagraph},reportyear =  {2003},reportvolume =  {1},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {631},url =  {https://canlii.ca/t/1g6p7},linkname =  {CanLII},mncurl =  {https://decisions.scc-csc.ca/scc-csc/scc-csc/en/item/2062/index.do},}
@case{buhay3,partya =  {R},partyb =  {Buhay},caseshortname =  {Buhay},caseyear =  {2003},courtname =  {SCC},casenumber =  {30},pagination =  {atparagraph},reportyear =  {2003},reportvolume =  {1},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {631},url =  {https://canlii.ca/t/1g6p7},linkname =  {CanLII},mncurl =  {https://decisions.scc-csc.ca/scc-csc/scc-csc/en/item/2062/index.do},parallel =  {305 NR 158 and 225 DLR (4th) 624 and [2004] 4 WWR 1 and 304 WAC 72 and 177 Man R (2d) 72 and 174 CCC (3d) 97 and 10 CR (6th) 205 and 57 WCB (2d) 206 and 107 CRR (2d) 240 and AZ-50177805 and JE 2003-1124 and [2003] SCJ No 30 (QL) and [2003] ACS no 30 and 122 ACWS (3d) 863},}


@case{laing,partya =  {R},partyb =  {Laing},caseshortname =  {Laing},caseyear =  {2021},courtname =  {NLPC},casenumber =  {320A00358},url =  {https://canlii.ca/t/jg31p},linkname =  {CanLII},}



@case{cole2,partya =  {R},partyb =  {Cole},caseshortname =  {Cole},caseyear =  {2012},courtname =  {SCC},casenumber =  {53},pagination =  {atparagraph},reportyear =  {2012},reportvolume =  {3},volyearneeded =  {TRUE},reportseries =  {SCR},reportpage =  {34},url =  {https://www.canlii.org/en/ca/scc/doc/2012/2012scc53/2012scc53.html},linkname =  {CanLII},}
@case{cole3,partya =  {R},partyb =  {Cole},caseshortname =  {Cole},caseyear =  {2012},courtname =  {SCC},casenumber =  {53},pagination =  {atparagraph},reportyear =  {2012},reportvolume =  {3},volyearneeded =  {TRUE},reportseries =  {SCR},reportpage =  {34},url =  {https://www.canlii.org/en/ca/scc/doc/2012/2012scc53/2012scc53.html},linkname =  {CanLII},parallel =  {353 DLR (4th) 447 and 436 NR 102 and 297 OAC 1 and [2012] EXP 3703 and 96 CR (6th) 88 and 290 CCC (3d) 247 and 269 CRR (2d) 228 and [2012] EXPT 2118 and DTE 2012T-731 and JE 2012-1986 and [2012] SCJ No 53 (QL) and [2012] ACS no 53},}

@ljarticle{otis,author =  {Ghislain Otis},title =  {Les droits ancestraux des peuples autochtones au carrefour du droit public et du droit privé~},subtitle =  {le cas de l’industrie extractive},mncyear =  {2019},mncname =  {CanLIIDocs},mncnumber =  {4154},date =  {2019},volume =  {62},number =  {2},journaltitle =  {Les Cahiers de droit},pages =  {451},url =  {http://www.canlii.org/t/xkhr},shortname =  {Otis},}

@ljarticle{fric,author =  {Agathon Fric},title =  {Popping the Question},subtitle =  {What the Questionnaire for Federal Judicial Appointments Reveals about the Pursuit of Justice, Diversity, and the Commitment to Transparency},mncyear =  {2020},mncname =  {CanLIIDocs},mncnumber =  {1656},date =  {2020},volume =  {43},number =  {1},journaltitle =  {Dalhousie Law Journal},pages =  {1},url =  {http://www.canlii.org/t/svcn},shortname =  {Fric},}


@ljarticle{callaghan,author =  {Geoffrey D Callaghan},title =  {Intervenors at the Supreme Court of Canada},mncyear =  {2020},mncname =  {CanLIIDocs},mncnumber =  {544},date =  {2020},volume =  {43},number =  {1},journaltitle =  {Dalhousie Law Journal},pages =  {1},url =  {https://canlii.ca/t/srcl},shortname =  {Callaghan},}


@case{davies,partya =  {Davies},partyb =  {Gertig \lcpara{No 2}},caseshortname =  {Davies},reportyear =  {2002},reportvolume =  {83},reportseries =  {SASR},reportpage =  {521},}
@case{kenman,partya =  {Kenman Kandy Australia Pty Ltd},partyb =  {Registrar of Trademarks},caseshortname =  {Kenman},reportyear =  {2002},reportvolume =  {122},reportseries =  {FCR},reportpage =  {494},}

@case{spratt,partya =  {Spratt},partyb =  {Hermes},caseshortname =  {Spratt},reportyear =  {1965},reportvolume =  {114},reportseries =  {CLR},reportpage =  {226},}
@case{capital,partya =  {Capital TV \& Appliances Pty Ltd},partyb =  {Falconer},caseshortname =  {Capital TV},reportyear =  {1971},reportvolume =  {125},reportseries =  {CLR},reportpage =  {591},}
@case{kruger,partya =  {Kruger},partyb =  {The Commonwealth},caseshortname =  {Kruger},caseyear =  {1977},courtname =  {HCA},casenumber =  {27},pagination =  {onlyat},reportyear =  {1997},reportvolume =  {190},reportseries =  {CLR},reportpage =  {1},mncurl =  {http://www.austlii.edu.au/cgi-bin/viewdoc/au/cases/cth/HCA/1997/27.html},}
@case{bernasconi,partya =  {R},partyb =  {Bernasconi},caseshortname =  {Bernasconi},reportyear =  {1915},reportvolume =  {19},reportseries =  {CLR},reportpage =  {629},}


@case{bryson,
  partya = {Bryson}, 
  partyb = {Bryant},
  caseshortname = {Bryson},
%MNC
%  caseyear = {1996},
%  courtname = {ABCA},
%  casenumber = {274},
%  pagination = {atparagraph},
%paper
  reportyear={1992},
  reportvolume = {29},
%  volyearneeded = {true},
  reportseries = {NSWLR},
  reportpage = {188},
}





@case{baumgartner,
  partya = {Baumgartner}, 
  partyb = {Baumgartner},
  caseshortname = {Baumgartner},
%MNC
%  caseyear = {1996},
%  courtname = {ABCA},
%  casenumber = {274},
%  pagination = {atparagraph},
%paper
  reportyear={1987},
  reportvolume = {164},
%  volyearneeded = {true},
  reportseries = {CLR},
  reportpage = {137},
}




@case{muschinski,
  partya = {Muschinski}, 
  partyb = {Dodds},
  caseshortname = {Muschinski},
%MNC
%  caseyear = {1996},
%  courtname = {ABCA},
%  casenumber = {274},
%  pagination = {atparagraph},
%paper
  reportyear={1985},
  reportvolume = {160},
%  volyearneeded = {true},
  reportseries = {CLR},
  reportpage = {583},
}


@case{mueller,
  partya = {Mueller \& Co}, 
  partyb = {Commonwealth},
  caseshortname = {Mueller},
%MNC
%  caseyear = {1996},
%  courtname = {ABCA},
%  casenumber = {274},
%  pagination = {atparagraph},
%paper
  reportyear={2004},
  reportvolume = {109},
%  volyearneeded = {true},
  reportseries = {FCR},
  reportpage = {156},
}


@case{croome,
  partya = {Croome}, 
  partyb = {Tasmania},
  caseshortname = {Croome},
%MNC
%  caseyear = {1996},
%  courtname = {ABCA},
%  casenumber = {274},
%  pagination = {atparagraph},
%paper
  reportyear={1997},
  reportvolume = {191},
%  volyearneeded = {true},
  reportseries = {CLR},
  reportpage = {119},
}



%UAlberta examples:
@statute{ualbertastatute,
citeref = {canleg},
title = {Post-secondary Learning Act},
svjy = {SA 2003},
chapter = {P.19-5},
pagination = {section},
}

@case{ualbertacase,
  partya = {Vriend}, 
  partyb = {Alberta},
  caseshortname = {Vriend},
%MNC
  caseyear = {1996},
  courtname = {ABCA},
  casenumber = {274},
  pagination = {atparagraph},
%%paper
%  reportyear={2002},
%  reportvolume = {2},
%  volyearneeded = {true},
%  reportseries = {SCR},
%  reportpage = {235},
}


@case{ualbertacase2,
  partya = {R}, 
  partyb = {Vader},
  caseshortname = {Vader},
%MNC
  caseyear = {2017},
  courtname = {ABQB},
  casenumber = {48},
  pagination = {atparagraph},
%%paper
  reportyear={2017},
%  reportvolume = {2},
%  volyearneeded = {true},
  reportseries = {CarswellAlta},
  reportpage = {114},
  note = {WL Can},
  keywords = {nobracketssecondref},
}


@case{vader,partya =  {R},partyb =  {Vader},caseshortname =  {Vader},caseyear =  {2019},courtname =  {ABCA},casenumber =  {488},pagination =  {atparagraph}, url =  {https://www.canlii.org/en/ab/abca/doc/2019/2019abca488/2019abca488.html},linkname =  {CanLII},mncurl =  {https://albertacourts.ca/docs/default-source/qb/judgments/r-v-vader-2019-abca-488---memorandum-of-judgment.pdf},}


@book{ualbertabook,
author={Kevin P McGuinness},
title={Canadian Business Corporations Law},
edition = {3},
volume = {1},
publisher={LexisNexis Canada},
location = {Toronto},
date={2017},
keywords = {lawbook},
yoptions = {name,dot,space,title,comma,
space,
edition,
space,
lparen, 
location,
colon,
space,
publisher,
comma,
space,
year,
rparen,
space,
volume,
dot},
}



@book{ualbertabookstokes,
author={Simon Stokes},
title={Digital Copyright},
subtitle = {Law and Practice},
edition = {4},
%volume = {1},
publisher={Hart},
location = {Oxford},
date={2014},
note = {Bloomsbury},
keywords = {lawbook},
yoptions = {given-family,
name,
comma,
space,
title,
itcolon,
space,
isubtitle,
comma,
space,
edition,
space,
lparen, 
location,
colon,
space,
publisher,
comma,
space,
year,
rparen,
space,
lparen,
note,
rparen},
}




%Dalhousie examples:
@book{dalhousiebook,
author={Frances Ribbeton},
title={Why Toads Make Poor Lawyers},
publisher={Dalhousie Fictional Frog Press},
location = {Halifax},
date={2014},
keywords = {lawbook},
}

@statute{dalhousiestatute,
citeref = {canleg},
title = {Amphibuous Criminal Code},
svjy = {RSC 1985},
chapter = {C-46},
pagination = {section},
}

@case{dalhousiecase,
  partya = {Frog}, 
  partyb = {Toad},
  caseshortname = {Frog},
%MNC
  caseyear = {2015},
  courtname = {SCC},
  casenumber = {48},
  pagination = {atparagraph},
%%paper
%  reportyear={2002},
%  reportvolume = {2},
%  volyearneeded = {true},
%  reportseries = {SCR},
%  reportpage = {235},
}

@case{dalhousiecase2,
  partya = {Ribbet}, 
  partyb = {Flies of Toronto},
  caseshortname = {Ribbet},
%MNC
%  caseyear = {2015},
%  courtname = {SCC},
%  casenumber = {48},
  pagination = {atparagraph},
%paper
  reportyear={1995},
  reportvolume = {2},
  volyearneeded = {true},
  reportseries = {SCR},
  reportpage = {1130},
}


@ljarticle{dalhousieart,
author = {Charles Toad},
title = {Warty Law},
subtitle = {Toad Law in a Frog's World},
%mncyear = {2019},
%mncname = {CanLIIDocs},
%mncnumber = {4192},
date = {2015},
volume = {76},
journaltitle = {UTLJ},
pages = {288},
}



@jurisdiction{crestonmoly2014,
title = {Creston Moly Corp. v. Sattva Capital Corp.},
shorttitle = {Creston Moly},
number = {2014 SCC 53},
volume = {373},
reporter = {D.L.R.},
series = {4th},
pages = {393},
date = {2014},
pagination = {paragraph},
keywords = {ca},
}

@jurisdiction{housen2002,
title = {Housen v. Nikolaisen},
shorttitle = {Housen},
number = {2002 SCC 33},
volume = {[2002] 2},
reporter = {S.C.R.},
pages = {235},
date = {2002},
pagination = {paragraph},
keywords = {ca},
}

@case{lchousen2002,
  partya = {Housen}, 
  partyb = {Nikolaisen},
  caseshortname = {Housen},
%MNC
  caseyear = {2002},
  courtname = {SCC},
  casenumber = {33},
  pagination = {atparagraph},
%paper
  reportyear={2002},
  reportvolume = {2},
  volyearneeded = {true},
  reportseries = {SCR},
  reportpage = {235},
}

@case{lccrestonmoly2014,
  partya = {Creston Moly Corp.\@}, 
  partyb = {Sattva Capital Corp.},
  caseshortname = {Creston Moly},
%MNC
  caseyear = {2014},
  courtname = {SCC},
  casenumber = {53},
  pagination = {atparagraph},
%paper
  reportyear={2014},
  reportvolume = {373},
%  volyearneeded = {true},
  reportseries = {DLR (4th)},
  reportpage = {393},
}




@case{keyabc,
  partya = {ABC}, 
  partyb = {XYZ*},
  caseyear = {2016},
  reportyear={2020},
  reportvolume = {3},
  volyearneeded = {true},
  reportseries = {WLR},
  reportpage = {123},
  courtname = {XYZCA},
  casenumber = {456},
}

@case{case2,
  partya = {DDA}, 
  partyb = {MNO*},
  caseyear = {2019},
%  reportvolume = {3},
%  volyearneeded = {true},
%  reportseries = {WLR},
%  reportpage = {123},
  courtname = {HACCA},
  casenumber = {14},
}
@case{case3,
  partya = {Efg}, 
  partyb = {Hij*},
  caseyear = {2018},
%  reportvolume = {3},
%  volyearneeded = {true},
%  reportseries = {WLR},
%  reportpage = {123},
  courtname = {VFC},
  casenumber = {1},
}
@case{case4,
  partya = {Klm}, 
  partyb = {Nop*},
  caseyear = {2015},
  reportyear={2016},
  reportvolume = {2},
  volyearneeded = {true},
  reportseries = {WLR},
  reportpage = {25},
  courtname = {MBC},
  casenumber = {21},
}
@case{case5,
  partya = {No MNC A}, 
  partyb = {No MNC B*},
  reportyear={1757},
  reportvolume = {1},
%  volyearneeded = {true},
  reportseries = {Co},
  reportpage = {25},
}
@book{book1,
title={A Title*},
author={B Auctoritas},
year={1828},
publisher={Holmes and Sons},
}



@case{becher,
  partya = {City of Columbus}, 
  partyb = {Becher},
%  reportyear={},
  reportvolume = {180},
%  volyearneeded = {true},
  reportseries = {NE 2d},
  reportpage = {836},
  year = {1962},
  note = {Ohio, Zimmerman J},
}


@case{cassie,
  partya = {Cassie}, 
  partyb = {Koumans},
  caseshortname = {Cassie},
  caseyear = {2007},
%  reportyear={2016},
%  reportvolume = {2},
%  volyearneeded = {true},
%  reportseries = {WLR},
%  reportpage = {25},
  courtname = {NSWSC},
  casenumber = {481},
}


@case{becker,
  partya = {City of Marion}, 
  partyb = {Becker},
  caseshortname = {Becker},
%  caseyear = {2007},
  reportyear={1973},
  reportvolume = {6},
%  volyearneeded = {},
  reportseries = {SASR},
  reportpage = {13},
%  courtname = {NSWSC},
%  casenumber = {481},
}

%R v Morgan [1970] 3 All ER 1053
@case{rmorgan,
  partya = {R}, 
  partyb = {Morgan},
  caseshortname = {Morgan},
  reportyear={1970},
  reportvolume = {3},
  volyearneeded = {true},
  reportseries = {All ER},
  reportpage = {1053},
}


@book{eco,
author={Umberto Eco},
title={Come si fa una tesi di laurea},
subtitle={Le materie umanistiche},
title+an = {How to write a Thesis for an Arts Degree},
publisher={Bompiani},
date={2004},
origdate={1977},
edition={15},
%options={skipbib=true},
%isbn={9788845246310},
}

@book{anncrimnsw,
author={Roderick N Howie and Peter A Johnson},
title={Annotated Criminal Legislation New South Wales},
publisher={LexisNexis Butterworths},
date={2015},
edition={2014-2015},
keywords = {lawbook},
}

@case{columbus,
  partya = {City of Columbus},
  partyashortname = {Columbus}, 
  partyb = {Becher},
  caseshortname = {Becher},
  icaseyear = {1962},
  jurisdiction = {Ohio},
  courtfullname = {Supreme Court of Ohio},
  note = {Ohio SC, 1962},
}
@case{columbussr,
  reportvolume = {173},
  reportseries = {Ohio St},
  reportpage = {197},
  crossref = {columbus},
}

@case{columbusne,
  reportvolume = {180},
  reportseries = {NE 2d},
  reportseriesseries = {2d},
  reportpage = {836},
  crossref = {columbus},
}
%%%%%%%%%%%%%

@xdata{xcolumbus,
  partya = {xCity of Columbus},
  partyashortname = {Columbus}, 
  partyb = {Becher},
  year = {1962},
  jurisdiction = {Ohio},
  courtfullname = {Supreme Court of Ohio},
  note = {Ohio SC, 1962},
}

@case{xcolumbussr,
  reportvolume = {173},
  reportseries = {Ohio St},
  reportpage = {197},
  xdata = {xcolumbus},
}

@case{xcolumbusne,
  reportvolume = {180},
  reportseries = {NE 2d},
  reportseriesseries = {2d},
  reportpage = {836},
  xdata = {xcolumbus},
}


%%%%%%%%%%%%%
@case{thomas,
  partya = {Thomas},
  partyb = {Newton*},
  icaseyear = {1827},
}

@case{thomascar,
  reportyear = {1827},
  reportvolume = {2},
  reportseries = {Car \& P},
  reportpage = {606},
  crossref = {thomas},
}

@case{thomaser,
  reportvolume = {?},
  reportseries = {ER},
  reportpage = {276},
  crossref = {thomas},
}

@case{thomasermnc,
  caseyear = {1827},
  courtname = {EngRep},
  casenumber = {503},
  crossref = {thomas},
}


@case{gitlow,
  partya = {Gitlow},
  partyb = {New York},%People of New York
  partyashortname = {New York}, 
  caseshortname = {Gitlow},
  icaseyear = {1925},
  note = {1925},
}


@case{gitlowus,
  reportvolume = {268},
  reportseries = {US},
  reportpage = {652},
  crossref = {gitlow},
}


@case{gitlowsc,
  reportvolume = {45},
  reportseries = {SCt},
  reportpage = {625},
  crossref = {gitlow},
}

@case{armstrong,
  partya = {Adam Armstrong's Case},
  icaseyear = {1823},
  caseshortname = {Armstrong},
}

@case{armstrongmnc,
  caseyear = {1823},
  courtname = {EngR},
  casenumber = {1},
  crossref = {armstrong},
}


@case{armstronglewin,
  reportyear = {1823},
  reportvolume = {1},
  reportseries = {Lewin},
  reportpage = {245},
  crossref = {armstrong},
}

@case{armstronger,
  reportvolume = {168},
  reportseries = {ER},
  reportpage = {1028},
  crossref = {armstrong},
}


%Adam Armstrong's Case [1823] EngR 1; (1823) 1 Lewin 245; 168 E.R. 1028 (1 January 1823)


@case{alexander,
  partya = {Alexander},
  partyb = {Brown},
  icaseyear = {1823},
  caseshortname = {Alexander},
}

@case{alexandermnc,
  caseyear = {1823},
  courtname = {EngR},
  casenumber = {5},
  crossref = {alexander},
}


@case{alexandercp,
  reportyear = {1823-1825},
  reportvolume = {1},
  reportseries = {C \& P},
  reportpage = {288},
  crossref = {alexander},
}

@case{alexanderer,
  reportvolume = {171},
  reportseries = {ER},
  reportpage = {1199},
  crossref = {alexander},
  note = {A},
}



%Alexander v Brown [1823] EngR 5; (1823-1825) 1 Car & P 288; 171 E.R. 1199 (A) (1 January 1823)

@book{bishop,
author = {Joel Prentiss Bishop},
title = {The First Book of the Law},
date = {1868},
publisher = {Little, Brown, and Company},
location = {Boston},
keywords = {lawbook},
}


@case{velocity,
  partya = {shipname Velocity},
  icaseyear = {1869},
  shipname = {Velocity},
  keywords = {nobib},
%  options = {skipbib=true},  
}

@case{velocitymnc,
  caseyear = {1869},
  courtname = {EngR},
  casenumber = {53},
  keywords = {nobib},
  crossref = {velocity},
%  related = {velocity},
%  relatedtype = {skipbib},
}


@case{velocitynr,
  reportyear = {1869},
  reportvolume = {6},
  reportseries = {Moo PC NS},
  reportpage = {263},
  crossref = {velocity},
  keywords = {nobib},
%  options = {skipbib=true},    
}

@case{velocityer,
%  reportyear = {1869},
  reportvolume = {16},
  reportseries = {ER},
  reportpage = {725},
  crossref = {velocity},
  keywords = {showbib},
}


@case{imvelocity,
  thumbnail = {velocity.png},
  crossref = {velocityer},
%  keywords = {nobib},
  options = {skipbib=true},      
}

%The "Velocity" [1869] EngR 53; (1869) 6 Moo PC NS 263; 16 E.R. 725


@case{snail,
  partya = {Donoghue}, 
  partyb = {Stevenson},
  icaseyear = {1932},
  reportyear={1932},
%  volyearneeded = {true},
  reportseries = {AC},
  reportpage = {562},
  casenickname = {snail in the bottle},
  note = {HL},
  caseyear = {1932},
}

%Commonwealth v Tasmania ("Tasmanian Dam case") [1983] HCA 21; (1983) 158 CLR 1

@case{tasdam,
  partya = {Commonwealth}, 
  partyb = {Tasmania},
  icaseyear = {1983},
  casenickname = {Tasmanian Dam},
  }
@case{tasdammnc,
  caseyear = {1983},
  courtname = {HCA},
  casenumber = {2},
  crossref = {tasdam},
  }
@case{tasdamclr,
  reportyear={1983},
%  volyearneeded = {true},
  reportvolume = {158},
  reportseries = {CLR},
  reportpage = {1},
  crossref = {tasdam},
  }
%@case{frame,
%  partya = {Frame}, 
%  partyb = {Smith},
%  icaseyear = {1987},
%  }
%@case{framescr,
%  reportyear = {1987},
%  volyearneeded = {true},
%  reportvolume = {2},
%  reportseries = {SCR},
%  reportpage = {99},
%  crossref = {frame},
%  }
%@case{framedlr,
%  reportvolume = {42},
%  reportseries = {DLR (4th)},
%  reportpage = {81},
%  crossref = {frame},
%  }

@case{frame,partya = {Frame},partyb = {Smith},icaseyear = {1987},}
@case{framescr,reportyear = {1987},volyearneeded = {true},reportvolume = {2},reportseries = {SCR},reportpage = {99},crossref = {frame},}
@case{framedlr,reportvolume = {42},reportseries = {DLR (4th)},reportpage = {81},crossref = {frame},}
%@case{cole,partya = {R},partyb = {Cole},caseyear = {2012},courtname = {SCC},casenumber = {53}, caseshortname={Cole},pagination={atparagraph},}
@case{cole,partya =  {R},partyb =  {Cole},caseshortname =  {Cole},caseyear =  {2012},courtname =  {SCC},casenumber =  {53},pagination =  {atparagraph},reportyear =  {2013},reportvolume =  {3},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {34},url =  {https://canlii.ca/t/ft969},linkname =  {CanLII},mncurl =  {https://decisions.scc-csc.ca/scc-csc/scc-csc/en/item/12615/index.do},}
@case{examplecase,partya =  {R},partyb =  {Cole},caseshortname =  {Cole},caseyear =  {2012},courtname =  {SCC},casenumber =  {53},pagination =  {atparagraph},reportyear =  {2013},reportvolume =  {3},volyearneeded =  {true},reportseries =  {SCR},reportpage =  {34},url =  {https://canlii.ca/t/ft969},linkname =  {CanLII},mncurl =  {https://decisions.scc-csc.ca/scc-csc/scc-csc/en/item/12615/index.do},}
@case{bigm,partya = {R},partyb = {Big M Drug Mart },}
@case{bigmscr,reportyear = {1985},volyearneeded = {true},reportvolume = {1},reportseries = {SCR},reportpage = {295},crossref = {bigm},}
@case{bigmdlr,reportvolume = {18},reportseries = {DLR (4th)},reportpage = {321},crossref = {bigm},}
@case{keegstra,partya = {Canadian Broadcasting Corporation },partyb = {Keegstra },decisionyear = {1986},}
@case{keegstraar,reportvolume = {77},reportseries = {AR},reportpage = {249},crossref = {keegstra},}
@case{keegstradlr,reportvolume = {35},reportseries = {DLR (4th)},reportpage = {76},crossref = {keegstra},note = {CA},}
@case{robitaille,partya = {Robitaille },partyb = {Vancouver Hockey Club },options = {skipbib=true},}
@case{robitailledlr,reportvolume = {124},reportseries = {DLR (3d)},reportpage = {228},crossref = {robitaille},note = {BCCA},}
@case{robitaillewwr,reportyear = {1981},volyearneeded = {true},reportvolume = {2},reportseries = {WWR},reportpage = {481},options = {skipbib=true},crossref = {robitaille},}
@case{sarg,partya = {Re Sarg Oils Ltd },caseyear = {2011},courtname = {ABERCB },casenumber = {32},}
@case{clarke,partya = {Clarke Institute of Psychiatry },partyb = {Ontario Nurses' Assn (Adusei Grievance) },decisionyear = {2001},reportvolume = {95},reportseries = {LAC (4th)},reportpage = {154},note = {OLRB},}
@case{tulk,partya = {Tulk },partyb = {Moxhay },reportyear = {1848},volyearneeded = {true},reportvolume = {1},reportseries = {H \& Tw},reportpage = {105},}
@case{epa,partya = {Massachusetts },partyb = {Environmental Protection Agency },options = {skipbib=true},}
@case{epaus,reportyear = {2007},reportvolume = {549},reportseries = {US},reportpage = {497},crossref = {epa},}
@case{epasc,reportvolume = {127},reportseries = {S Ct},reportpage = {1438},options = {skipbib=true},crossref = {epa},}
@case{nic,partya = {Case Concerning Military and Paramilitary Activities in and against Nicaragua (Nicaragua v United States of America) },reportyear = {1986},volyearneeded = {true},reportseries = {ICJ Rep No },reportpage = {14},}
@case{cbc,partya = {Alliance of Canadian Cinema Television and Radio Artists },partyb = {Canadian Broadcasting Corporation },decisionyear = {1990},reportvolume = {91},reportseries = {CLLC},reportpage = {16},note = {CLRB},}
@case{vdn,partya = {VDN Cable Inc, on behalf of a corporation to be incorporated, Toronto, Ontario },decisionyear = {January 2005},reportseries = {2005-1, online: CRTC <www.crtc.gc.ca> },reportpage = {[perma.cc/LF5P-5MM3] },}
@case{syncrude,partya = {R},partyb = {Syncrude Canada Ltd },options = {skipbib=true},}
@case{syncrudeabpc,caseyear = {2010},courtname = {ABPC},casenumber = {154},crossref = {syncrude},}
@case{syncrudewl,caseyear = {2010},courtname = {CarswellAlta },casenumber = {981},crossref = {syncrude},options = {skipbib=true},note = {WL Can},}
@case{crete,partya = {R},partyb = {Crete },decisionyear = {18 April 1991},reportseries = {Ottawa},reportpage = {97/03674},note = {Ont Prov Ct },}
@case{iron,partya = {Clearbrook Ironworks Ltd },partyb = {Letourneau },caseyear = {2006},courtname = {FCA},casenumber = {42},}
@case{hopp,partya = {Hopp},partyb = {Lepp},reportyear = {1980},volyearneeded = {true},reportvolume = {2},reportseries = {SCR},reportpage = {192},}
@case{fucella,partya = {Fucella },partyb = {Ricker },decisionyear = {1982},reportvolume = {35},reportseries = {OR (2d)},reportpage = {423},note = {H Ct J},}
@case{swissair,partya = {Swiss Bank Corp},partyb = {Air Canada},decisionyear = {1987},reportyear = {1988},volyearneeded = {true},reportvolume = {1},reportseries = {FC},reportpage = {71},}
@case{graham,partya = {Graham},partyb = {R},options = {skipbib=true},}
@case{grahamwwr,reportyear = {1978},volyearneeded = {true},reportvolume = {6},reportseries = {WWR},reportpage = {48},options = {skipbib=true},crossref = {graham},}
@case{grahamdlr,reportvolume = {90},reportseries = {DLR (3d)},reportpage = {223},crossref = {graham},note = {Sask QB},}
@case{arbia,partya = {Arbia},
partysep = {c},
partyb = {Brousseau},caseyear = {2020},courtname = {QCCA},casenumber = {1073},}
@case{jimenez,partya = {Jimenez },partyb = {Romeo },caseyear = {2009},courtname = {CanLII },casenumber = {68472},note = {ON SC},}
@case{seib,partya = {Seib Estate},caseyear = {2012},courtname = {ABQB},casenumber = {126},}
@case{kristel,partya = {Kristel Homes Ltd},partyb = {Edmonton (City of)},caseyear = {2001},courtname = {ABCA},casenumber = {317},note = {TRANSCRIPT OF ORAL REASONS},}
@case{anderson,partya = {Anderson},partyb = {Fawthrop },caseyear = {2018},courtname = {ABPC},casenumber = {226},}
@case{ludmer,partya = {Ludmer},partyb = {Ludmer},caseyear = {2012},courtname = {ONSC},casenumber = {5738},parallel = {[2012] CarswellOnt 16100},}
@case{sheen,partya = {Sheen},partyb = {Sheen},caseyear = {2003},courtname = {MBCA},casenumber = {93},parallel = {[2003] MJ No 230 (QL)},}
@case{cibc,partya = {CIBC Mortgages Inc},partyb = {Dima Estate},caseyear = {2019},courtname = {NSSC},casenumber = {61},}
@case{litz,partya = {Litz},partyb = {Litz},reportvolume = {180},reportseries = {WAC},reportpage = {116},parallel = {[1998] 10 WWR 145 and 129 Man R (2d) 121},}
@case{naraine,partya = {Naraine},partyb = {The Ford Motor Company},caseyear = {2006},courtname = {HRTO},casenumber = {25},reportvolume = {58},reportseries = {CHRR},reportpage = {87},}
@case{betts,partya = {Betts},partyb = {Norris},reportvolume = {120},reportseries = {NBR (2d)},reportpage = {384},parallel = {302 APR 384 and [1991] CarswellNB 51 and [1991] NBJ No 1036 (QL)},}
@case{walmart,partya = {Saskatoon (City)},partyb = {Wal-Mart Canada Corp},caseyear = {2019},courtname = {SKCA},casenumber = {3},reportyear = {2019},volyearneeded = {true},reportvolume = {3},reportseries = {WWR},reportpage = {284},}
@case{tiesmaki,partya = {Tiesmaki},partyb = {Wilson},decisionyear = {1971},reportvolume = {23},reportseries = {DLR (3d)},reportpage = {179},parallel = {[1972] 2 WWR 214 and [1971] AJ No 145 (QL)},note = {AB SC AppDiv, 1971},}
@case{kybich,partya = {Kybich},partyb = {Mangus},reportyear = {1919},volyearneeded = {true},reportvolume = {3},reportseries = {WWR},reportpage = {532},note = {AB QB, Chambers},}

@case{chevron,partya = {Chevron Corp },partyb = {Yaiguaje },caseyear = {2015},courtname = {SCC},casenumber = {42},reportyear = {2015},reportvolume = {3},volyearneeded = {true},reportseries = {SCR},reportpage = {69},mncurl = {https://www.canlii.org/en/ca/scc/doc/2015/2015scc42/2015scc42.html},pagination = {atparagraph},}
@case{wilson,partya = {Wilson},partyb = {Hull},caseyear = {1995},courtname = {ABCA},casenumber = {374 (CanLII)},reportvolume = {128},reportseries = {DLR (4th)},reportpage = {403},note = {Alta, CA},decisionyear = {1995},pagination = {atparagraph},mncurl = {https://www.canlii.org/en/ab/abca/doc/1995/1995abca374/1995abca374.html},}
@case{acme,partya = {Acme Video Inc },partyb = {Hedges and Retail Technologies (Video) Inc},caseyear = {1992},courtname = {CanLII},casenumber = {7653 (ON SC)},reportvolume = {10},reportseries = {OR (3rd)},reportpage = {503},decisionyear = {1992},mncurl = {https://www.canlii.org/en/on/onsc/doc/1992/1992canlii7653/1992canlii7653.html},}
@case{acmeca,partya = {Acme Video Inc },partyb = {Hedges and Retail Technologies (Video) Inc},caseyear = {1993},courtname = {CanLII},casenumber = {8553 (ON CA)},reportvolume = {12},reportseries = {OR (3rd)},reportpage = {16},note = {Ont CA},mncurl = {https://www.canlii.org/en/on/onca/doc/1993/1993canlii8553/1993canlii8553.html},}
@case{moore,partya = {Moore},partyb = {Mercator Enterprises Ltd},caseyear = {1978},courtname = {CanLII},casenumber = {2139 (NS SC)},reportvolume = {90},reportseries = {DLR (3rd)},reportpage = {590},note = {NSTD},decisionyear = {1978},parallel = {31 NSR (2d) 327 and 7 CPC 150},mncurl = {https://www.canlii.org/en/ns/nssc/doc/1978/1978canlii2139/1978canlii2139.html},}
@case{aero,partya = {Re Aero Trades Western Ltd and Ben Hochum \& Son Ltd},reportvolume = {51},reportseries = {DLR (3rd)},reportpage = {617},decisionyear = {1974},parallel = {[1975] 4 WWR 412},}
@case{tdi,partya = {TDI Hospitality Management Consultants Inc},partyb = {Browne},caseyear = {1994},courtname = {CanLII},casenumber = {10958 (MB CA)},reportvolume = {117},reportseries = {DLR (4th)},reportpage = {289},note = {Man CA},caseshortname = {TDI},parallel = {[1994] 9 WWR 153 and 70 WAC 302 and 95 Man R (2d) 302 and 28 CPC (3d) 232 and [1994] MJ No 448 (QL) and 50 ACWS (3d) 206},mncurl = {https://www.canlii.org/en/mb/mbca/doc/1994/1994canlii10958/1994canlii10958.html},pagination = {atparagraph},}
@case{morguard,partya = {Morguard Investments Ltd},partyb = {Be Savoye},caseyear = {1990},courtname = {CanLII},casenumber = {29 (SCC)},reportyear = {1990},reportvolume = {3},volyearneeded = {true},reportseries = {SCR},reportpage = {1077},decisionyear = {1990},parallel = {76 DLR (4th) 256 and 46 CPC (2d) 1},mncurl = {https://www.canlii.org/en/ca/scc/doc/1990/1990canlii29/1990canlii29.html},}
@case{whatcott,partya = {Saskatchewan (Human Rights Commission)},partyb = {Whatcott},caseyear = {2013},courtname = {SCC},casenumber = {11},reportyear = {2013},reportvolume = {1},volyearneeded = {true},reportseries = {SCR},reportpage = {467},mncurl = {https://www.canlii.org/en/ca/scc/doc/2013/2013scc11/2013scc11.html},}
@case{bombadier,partya = {Quebec (Commission des droits de la personne et des droits de la jeunesse)},partyb = {Bombardier Inc. (Bombardier Aerospace Training Center)},caseyear = {2015},courtname = {SCC},casenumber = {39},reportyear = {2015},reportvolume = {2},volyearneeded = {true},reportseries = {SCR},reportpage = {789},mncurl = {https://www.canlii.org/en/ca/scc/doc/2015/2015scc39/2015scc39.html},}
@case{calego,partya = {Calego International inc},partyb = {Commission des droits de la personne et des droits de la jeunesse},partysep = {c},caseyear = {2013},courtname = {QCCA},casenumber = {924},reportyear = {2013},volyearneeded = {true},reportseries = {RJDT},reportpage = {517},pagination = {atparagraph},mncurl = {https://www.canlii.org/fr/qc/qcca/doc/2013/2013qcca924/2013qcca924.html},}
@case{fraser,partya = {Fraser},partyb = {Canada (Commission des relations de travail dans la fonction publique)},partysep = {c},caseyear = {1985},courtname = {CanLII},casenumber = {14 (CSC)},reportyear = {1985},reportvolume = {2},volyearneeded = {true},reportseries = {RCS},reportpage = {455},mncurl = {https://www.canlii.org/fr/ca/csc/doc/1985/1985canlii14/1985canlii14.html},pagination = {atparagraph},}
@case{mcauliffe,partya = {McAuliffe},partyb = {Mayor and Board of Aldermen of New Bedford},reportvolume = {29},reportseries = {NE},reportpage = {517},note = {1892},}
@case{pszon,partya = {Re Pszon},caseyear = {1946},courtname = {CanLII},casenumber = {107 (ON CA)},reportyear = {1946},volyearneeded = {true},reportseries = {OR},reportpage = {229},parallel = {[1946] 2 DLR 507 and 27 CBR 130},mncurl = {https://www.canlii.org/en/on/onca/doc/1946/1946canlii107/1946canlii107.html},}
@case{wismer,partya = {Re Wismer and Javelin International Ltd},caseyear = {1982},courtname = {CanLII},casenumber = {3132 (ON SC)},reportvolume = {136},reportseries = {DLR (3rd)},reportpage = {647},note = {Ont HC},decisionyear = {1982},mncurl = {https://www.canlii.org/en/on/onsc/doc/1982/1982canlii3132/1982canlii3132.html},}
@case{mulroney,partya = {Re Mulroney and Coates},caseyear = {1986},courtname = {CanLII},casenumber = {2613 (ON SC)},reportvolume = {27},reportseries = {DLR (4th)},reportpage = {118},note = {Ont HC},decisionyear = {1986},mncurl = {https://www.canlii.org/en/on/onsc/doc/1986/1986canlii2613/1986canlii2613.html},}
@case{toucheross,partya = {Touche Ross Ltd},partyb = {Sorrel Resources Ltd},caseyear = {1987},courtname = {CanLII},casenumber = {2693 (BC SC)},reportvolume = {11},reportseries = {BCLR (2nd)},reportpage = {184},note = {SC},decisionyear = {1987},mncurl = {https://www.canlii.org/en/bc/bcsc/doc/1987/1987canlii2693/1987canlii2693.html},}
@case{roglass,partya = {Roglass Consultants Inc},partyb = {Kennedy, Lock},caseyear = {1984},courtname = {CanLII},casenumber = {421 (BC CA)},reportvolume = {65},reportseries = {BCLR},reportpage = {393},note = {CA},decisionyear = {1984},mncurl = {https://www.canlii.org/en/bc/bcca/doc/1984/1984canlii421/1984canlii421.html},}
@case{equitycary,reportseries = {Cary},reportpage = {11},crossref = {equity},options = {skipbib=true},}
@case{equityer,reportvolume = {21},reportseries = {ER},reportpage = {6},note = {B},crossref = {equity},}
@case{equity,partya = {Anonymous},decisionyear = {1492},thumbnail = {equity.png},options = {skipbib=true},}
@case{ashnr,partya = {Ann Ash},partyb = {Lady Ash},reportseries = {Comb},reportpage = {357},decisionyear = {1724},options = {skipbib=true},}
@case{asher,partya = {Ann Ash},partyb = {Lady Ash},reportvolume = {90},reportseries = {ER},reportpage = {526},note = {B},decisionyear = {1724},}
@case{salter,partya = {Salter and Bellamy},note = {note},casenickname = {sawcy},decisionyear = {1724},options = {skipbib=true},}
@case{salternr,reportseries = {Comb},reportpage = {5},crossref = {salter},options = {skipbib=true},}
@case{salterer,reportvolume = {90},reportseries = {ER},reportpage = {309},note = {B},crossref = {salter},}

@statute{samplestat,statutetitle = {statutetitle},statutelongtitle = {statutelongtitle},statuteshorttitle = {statuteshorttitle},statutenickname = {statutenickname},statutevolume = {statutevolume},statutejurisdiction = {statutejurisdiction},statuteregnalyear = {statuteregnalyear},statutechapter = {statutechapter},statuteyear = {statuteyear},statutetitleyear = {statutetitleyear},title = {title},chapter = {chapter},year = {2021},citeref = {canleg},regnum = {regnum},fulldate = {fulldate},gazette = {gazette},svjy = {svjy},}
@statute{samplestat2,statutetitle = {statutetitle},statutelongtitle = {statutelongtitle},statuteshorttitle = {statuteshorttitle},statutenickname = {statutenickname},statutevolume = {statutevolume},statutejurisdiction = {statutejurisdiction},statuteregnalyear = {statuteregnalyear},statutechapter = {statutechapter},statuteyear = {statuteyear},statutetitleyear = {statutetitleyear},title = {title},chapter = {chapter},year = {2021},regnum = {regnum},fulldate = {fulldate},gazette = {gazette},svjy = {svjy},}
@statute{cancorp,title = {Canada Business Corporations Act},chapter = {33},citeref = {canleg},svjy = {1974-75-76 (Can.\@)},}
@statute{cancorp2,statutetitle = {Canada Business Corporations Act},statuteshorttitle = {1974-75-76 (Can)},statutechapter = {33},}
@statute{cca1970,statutetitle = {Canada Corporations Act},statuteshorttitle = {RSC 1970},statutechapter = {C-32},}
@statute{cca1970b,title = {Canada Corporations Act},chapter = {C-32},citeref = {canleg},svjy = {RSC 1970},}
@statute{crimcode1970,title = {Criminal Code},chapter = {C-34},citeref = {canleg},svjy = {RSC 1970},}
@ljarticle{tetley,author = {William Tetley},title = {Evasion/Fraude à la loi and Avoidance of the Law},date = {1994},volume = {39},journaltitle = {McGill LJ},pages = {303},linkname = {1994 CanLIIDocs 67},url = {https://canlii.ca/t/2bk9},}
@ljarticle{cheung,author = {Perry Cheung},title = {A Call for Action},subtitle = {The Need for Canadian Spam Legislation},date = {2007},volume = {7},journaltitle = {Asper Review of International Business and Trade Law},pages = {227},linkname = {2007 CanLIIDocs 514},url = {https://canlii.ca/t/t1mq },}
@ljarticle{kirbyalr,author = {Michael Kirby},title = {Forty Years of the Alberta Law Reform Institute — Past, Present, Future},date = {2009},volume = {46},journaltitle = {Alberta Law Review},pages = {831},linkname = {2009 CanLIIDocs 235},url = {https://canlii.ca/t/2d12},}
@ljarticle{parkinson,author = {Patrick Parkinson},title = {The Payoffs and Pitfalls of Laws that Encourage Shared Parenting},subtitle = {Lessons from the Australian Experience},date = {2014},volume = {37},journaltitle = {Dalhousie Law Journal},pages = {301},linkname = {2014 CanLIIDocs 33572},url = {https://canlii.ca/t/t0xv},}
@ljarticle{silver,author = {Natalie Silver and Renate Buijze},title = {Tax Incentives for Cross-border Giving in an Era of Philanthropic Globalization},subtitle = {A Comparative Perspective},date = {2020},volume = {6},journaltitle = {Canadian Journal of Comparative and Contemporary Law},pages = {109},linkname = {2020 CanLIIDocs 3314},url = {https://canlii.ca/t/t07q},}
@ljarticle{beck,author = {Luke Beck},title = {The Role of Religion in the Law of Royal Succession in Canada and Australia},date = {2017},volume = {43},journaltitle = {Queen's Law Journal},pages = {53},linkname = {2017 CanLIIDocs 3968},url = {https://canlii.ca/t/sx2r},}
@statute{samstata,statutetitle = {statutetitle:nociteref},statutelongtitle = {statutelongtitle},statuteshorttitle = {statuteshorttitle},statutenickname = {statutenickname},statutevolume = {statutevolume},statutejurisdiction = {statutejurisdiction},statuteregnalyear = {statuteregnalyear},statutechapter = {statutechapter},statuteyear = {statuteyear},statutetitleyear = {statutetitleyear},title = {title},chapter = {chapter},year = {year},regnum = {regnum},fulldate = {fulldate},gazette = {gazette},svjy = {svjy},}
@statute{samstatb,statutetitle = {statutetitle:nociteref:nostatutechapter},statutelongtitle = {statutelongtitle},statuteshorttitle = {statuteshorttitle},statutenickname = {statutenickname},statutevolume = {statutevolume},statutejurisdiction = {statutejurisdiction},statuteregnalyear = {statuteregnalyear},statuteyear = {statuteyear},statutetitleyear = {statutetitleyear},title = {title},chapter = {chapter},year = {year},regnum = {regnum},fulldate = {fulldate},gazette = {gazette},svjy = {svjy},}
@statute{samstatc,statutetitle = {statutetitle},statutelongtitle = {statutelongtitle},statuteshorttitle = {statuteshorttitle},statutenickname = {statutenickname},statutevolume = {statutevolume},statutejurisdiction = {statutejurisdiction},statuteregnalyear = {statuteregnalyear},statutechapter = {statutechapter},statuteyear = {statuteyear},statutetitleyear = {statutetitleyear},title = {title},chapter = {chapter},year = {year},citeref = {peireg},regnum = {regnum},fulldate = {fulldate},gazette = {gazette},svjy = {svjy},}
@book{phipson9,author = {Sidney Phipson},title = {Phipson’s Manual of the Law of Evidence},date = {1966},publisher = {Sweet \& Maxwell},location = {London},edition = {9},keywords = {lawbook},shorttitle = {Evidence},editor = {D W Elliott},}
@case{riley,partya = {R},partyb = {Riley},reportvolume = {18},reportseries = {CoxCC},reportpage = {285},caseshortname = {Riley},decisionyear = {1896},}
@case{berry,partya = {R},partyb = {Berry},reportyear = {1957},volyearneeded = {true},reportseries = {OR},reportpage = {249},caseshortname = {Berry},linkname = {1957 CanLII 115 (ON CA)},url = {https://canlii.ca/t/g191v},}
@case{howard,partya = {R},partyb = {Howard},reportvolume = {15},reportseries = {OAC},reportpage = {255},caseshortname = {Howard},decisionyear = {1986},parallel = {29 CCC (3d) 544},linkname = {1986 CanLII 4725 (ON CA)},url = {https://canlii.ca/t/gbhf8},}
@case{rosikappeal,partya = {R},partyb = {Rosik},reportvolume = {2},reportseries = {CCC (2d)},reportpage = {393n},caseshortname = {Rosik},parallel = {[1971] 2 OR 89n and [1971] SCR vi},}
@case{rosik,partya = {R},partyb = {Rosik},reportvolume = {2},reportseries = {CCC (2d)},reportpage = {351},caseshortname = {Rosik},decisionyear = {1970},parallel = {[1971] 2 OR 47 and 13 CrimLQ 224 (Ont CA)},linkname = {CanLII},url = {https://www.canlii.org/en/on/onca/doc/1970/1970canlii278/1970canlii278.html},}
@case{abbey,partya = {R},partyb = {Abbey},reportvolume = {68},reportseries = {CCC (2d)},reportpage = {394},caseshortname = {Abbey},decisionyear = {1982},parallel = {138 DLR (3d) 202 and [1982] 2 SCR 24 (SCC)},linkname = {CanLII},url = {https://www.canlii.org/en/ca/scc/doc/1982/1982canlii25/1982canlii25.html},}
@case{perras,partya = {R},partyb = {Perras},reportvolume = {8},reportseries = {CCC (2d)},reportpage = {209},caseshortname = {Perras},decisionyear = {1972},linkname = {1972 CanLII 868 (SK CA)},url = {https://www.canlii.org/en/sk/skca/doc/1972/1972canlii868/1972canlii868.html},
yoptions={:getcasename,comma,space,:getcaseurl,comma,space,:getcaseref},}









%Dow Jones and Company Inc v Gutnick [2002] HCA 56; 210 CLR 575; 194 ALR 433; 77 ALJR 255 (10 December 2002)

@case{gutnick,
  partya = {Dow Jones and Company Inc}, 
  partyb = {Gutnick},
  icaseyear = {2002},
  }
@case{gutnickmnc,
  caseyear = {2002},
  courtname = {HCA},
  casenumber = {56},
  crossref = {gutnick},
  }
@case{gutnickclr,
%  reportyear={1983},
%  volyearneeded = {true},
  reportvolume = {210},
  reportseries = {CLR},
  reportpage = {575},
  crossref = {gutnick},
  }
@case{gutnickalr,
%  reportyear={1983},
%  volyearneeded = {true},
  reportvolume = {194},
  reportseries = {ALR},
  reportpage = {433},
  crossref = {gutnick},
  }
@case{gutnickaljr,
%  reportyear={1983},
%  volyearneeded = {true},
  reportvolume = {77},
  reportseries = {ALJR},
  reportpage = {255},
  crossref = {gutnick},
  }




%Kerr v Baranow, 2011 SCC 10, [2011] 1 SCR 269

@case{kerr,
  partya = {Kerr}, 
  partyb = {Baranow},
  icaseyear = {2011},
  }
@case{kerrmnc,
  caseyear = {2011},
  courtname = {SCC},
  casenumber = {10},
  crossref = {kerr},
  }
@case{kerrscr,
  reportyear={2011},
  volyearneeded = {true},
  reportvolume = {1},
  reportseries = {SCR},
  reportpage = {269},
  crossref = {kerr},
  }



%McLean v Pilon (1978), 7 BCLR 99, 1978 CanLII 237 (SC).


@case{mclean,
  partya = {McLean}, 
  partyb = {Pilon},
  icaseyear = {1978},
  decisionyear = {1978},
  note = {SC},
  options={skipbib=true},
  }
@case{mcleanlii,
  caseyear = {1978},
  courtname = {CanLII},
  casenumber = {237},
  crossref = {mclean},
  options={skipbib=true},
  }
@case{mcleanbclr,
%  reportyear={2011},
%  volyearneeded = {true},
  reportvolume = {7},
  reportseries = {BCLR},
  reportpage = {99},
  crossref = {mclean},
  }







%Smyth, Russell --- "What do Intermediate Appellate Courts Cite? A Quantitative Study of the Citation Practice of Australian State Supreme Courts" [1999] AdelLawRw 3; (1999) 21 Adelaide Law Review 51

@ljarticle{smythsc,
author = {Russell Smyth},
title = {What do Intermediate Appellate Courts Cite? A Quantitative Study of the Citation Practice of Australian State Supreme Courts},
mncyear = {1999},
mncname = {AdelLawRw},
mncnumber = {3},
date = {1999},
volume = {21},
journaltitle = {Adelaide Law Review},
pages = {51},
%keywords = {lj},
}

@ljarticle{renaud,author = {Matthew Renaud},subtitle = {The Development of Legal Education in the Province of Manitoba, 1877–1968},title = {From Reading Courses to Robson Hall},mncyear = {2019},mncname = {CanLIIDocs},mncnumber = {4192},date = {2019},volume = {42},journaltitle = {Manitoba Law Journal},pages = {286},}

@ljarticle{adams,author = {Eric M Adams},title = {Canadian Constitutional Identities},date = {2015},volume = {38},journaltitle = {Dalhousie Law Journal},pages = {311},}

%@ljarticle{otis,author = {Ghislain Otis},subtitle = {le cas de l’industrie extractive},title = {Les droits ancestraux des peuples autochtones au carrefour du droit public et du droit privé},mncyear = {2019},mncname = {CanLIIDocs},mncnumber = {4154},date = {2019},volume = {60},journaltitle = {Les Cahiers de droit},pages = {451},}

@ljarticle{jukier,author = {Rosalie Jukier},subtitle = {A Judicial Dialogue Between Common Law Canada and Québec},title = {Good Faith in Contract},mncyear = {2019},mncname = {CanLIIDocs},mncnumber = {1767},date = {2019},volume = {1},journaltitle = {Journal of Commonwealth Law},pages = {1},}

%=================== law journal articles


@ljarticle{ljart3,
options={year-required=true,},
author={given=qqq, family=rrr},
title ={A Third Legal Article yr req},
journaltitle={MNOLR},
date={2016},
volume={1},
pages={458},
}

@book{b2035,title ={Chitty on Contracts},edition ={26},publisher ={Sweet and Maxwell},date ={1989},}
@book{b2036,title ={Clerk and Lindsell on Torts},edition ={16},publisher ={Sweet and Maxwell},date ={1989},}

@periodical{j76,journaltitle={Modern Law Review},volume={54},number={1},month={1},date={1991},}

%b2035,
@article{a104,
author={Ewan McKendrick},
related={b2035,b2036},
relatedtype={reviewof},
crossref={j76},
pages={162},
keywords={otl, lj},
}


%Lawrence Friedman, Robert Kagan, Bliss Cartwright and Stanton
%Wheeler, 'State Supreme Courts: A Century of Style and Citation' (1981) 33 Stanford Law
%Review 773 (covering 16 state supreme courts in the period 1870-1970).


@ljarticle{friedman,
author = {Lawrence Friedman and Robert Kagan and Bliss Cartwright and Stanton Wheeler},
title = {State Supreme Courts},
subtitle = {A Century of Style and Citation},
%mncyear = {1999},
%mncname = {AdelLawRw},
%mncnumber = {3},
date = {1981},
volume = {33},
journaltitle = {Stanford Law Review},
pages = {773},
%---
%reportyear = {1981},
%repotrvolume = {33},
%reportname = {Stanford Law Review},
%reportpage = {773},
note = {covering 16 state supreme courts in the period 1870-1970},
keywords = {lj},
}



%%@book{butt,
%%crossref={buttb},
%%%author = {Peter Butt},
%%%title={Legal Usage},
%%%subtitle={A Modern Style Guide},
%%%date={2018},
%%%publisher={LexisNexis Butterworths},
%%}

@book{buttb,author = {Peter Butt},title = {Legal Usage},subtitle = {A Modern Style Guide},date = {2018},publisher = {LexisNexis Butterworths},location = {Australia},isbn = {9780409341461},jurisdiction = {Australia},}

@book{addison,author = {C G Addison},title = {The Law of Torts},edition = {2},date = {1872},publisher = {Little, Brown, and Company},location = {Boston},shorttitle = {Torts},note = {Abridgement},keywords = {lawbook},shorttitle={Torts},}


@statute{crimnsw,
statutetitle = {Crimes Act},
%statutelongtitle = {},
%statuteshorttitle = {},
%statutenickname = {},
%statutevolume = {},
statutejurisdiction = {NSW},
%statuteregnalyear = {},
%statutechapter = {},
%statuteyear = {},%for the volume
statutetitleyear = {1900},%for the title
}

%Criminal Code, RSC 1985, c C-46, s 515

@statute{crimcan,
statutetitle = {Criminal Code},
%statutelongtitle = {},
%statuteshorttitle = {},
%statutenickname = {},
%statutevolume = {},
%statutejurisdiction = {NSW},
%statuteregnalyear = {},
%statutechapter = {},
%statuteyear = {},%for the volume
statutetitleyear = {RSC 1985, c C-46},%for the title
}


@statute{canreg,
statutetitle = {Maple Products Regulations},
%statutelongtitle = {},
statuteshorttitle = {CRC},
%statutenickname = {},
%statutevolume = {},
%statutejurisdiction = {NSW},
%statuteregnalyear = {},
statutechapter = {289},
%statuteyear = {},%for the volume
%statutetitleyear = {RSC 1985},%for the title
}

@statute{testregs,
statutetitle = {Test Regs},
statutetitleyear = {2020},%for the title
keywords = {regulations},
statutejurisdiction = {NSW},
}




@statute{crimcodecan,
citeref = {canleg},
title = {Criminal Code},
svjy = {RSC 1985},
chapter = {C-46},
}


@statute{oescheats,
citeref = {canleg},
title = {Escheats Act},
svjy = {RSO 1980},
chapter = {142},
}

@statute{canleg,
citeref = {canleg},
title = {Copyright Act},
chapter = {C-42},
svjy = {RSC 1985},
%year = {xxx},
%regnum = {xxx},
}

@statute{canregcrc,
citeref = {crcreg},
title = {Maple Products Regulations},
chapter = {289},
%year = {xxx},
%regnum = {xxx},
}


@statute{canregsor,
citeref = {sorreg},
title = {Regulations Amending the Food and Drug Regulations},
%chapter = {xxx},
year = {98},
regnum = {580},
}

@statute{canregalta,citeref = {altareg},year = {2009},regnum = {62},sorttitle = {altareg200962},}
@statute{canregbc,citeref = {bcreg},year = {2008},regnum = {278},sorttitle = {bcreg2008278},}
@statute{canregman,citeref = {manreg},year = {87},regnum = {351},sorttitle = {manreg87351},}
@statute{canregnb,citeref = {nbreg},year = {2006},regnum = {23},sorttitle = {nbreg200623},}
@statute{canregnfld,citeref = {nfldreg},year = {97},regnum = {19},sorttitle = {nfldreg9719},}
@statute{canregnlr,citeref = {nlrreg},year = {9},regnum = {4},sorttitle = {nlrreg94},}
@statute{canregnwt,citeref = {nwtreg},year = {2008},regnum = {26},sorttitle = {nwtreg200826},title={Archives Regulations},}
@statute{canregns,citeref = {nsreg},year = {2007},regnum = {235},sorttitle = {nsreg2007235},}
@statute{canregnu,citeref = {nureg},year = {40},regnum = {99},sorttitle = {nureg4099},}
@statute{canrego,citeref = {oreg},year = {8},regnum = {361},sorttitle = {oreg8361},}
@statute{canregpei,citeref = {peireg},year = {2002},regnum = {249},sorttitle = {peireg2002249},}
@statute{canregoc,citeref = {ocreg},year = {97},regnum = {764},fulldate = {25 June 1997},gazette = { 1997.II.2737},sorttitle = {ocreg97764},}
@statute{canregsask,citeref = {saskreg},year = {67},regnum = {444},sorttitle = {saskreg67444},}
@statute{canregyoic,citeref = {yoicreg},year = {1995},regnum = {87},sorttitle = {yoicreg199587},}


@statute{fla,citeref = {canleg},title = {Family Law Act },svjy = {SA 2003 },chapter = {F-4.5 },}
@statute{tla,citeref = {canleg},title = {Territorial Lands Act },svjy = {RSC 1985 },chapter = {T-7 },}
@statute{fair,citeref = {canleg},title = {Fair Trading Act },svjy = {RSA 2000 },chapter = {F-2 },}
@statute{bears,citeref = {sorreg},title = {Polar Bear Pass Withdrawal Order },year = {84},regnum = {409},}
@statute{birds,citeref = {crcreg},title = {Migratory Birds Regulations },chapter = {1035},}
@statute{forests,citeref = {altareg},title = {Alberta Forest Land Use and Management Regulations },year = {1976},regnum = {197},}
@statute{prop,statutetitle = {Law of Property Act },statutetitleyear = {1969},statutejurisdiction = {UK},}

@statute{water,statutetitle = {Safe Drinking Water Act },statutetitleyear = {42 USC §300f },note = {1974},}

@statute{anyregverb,citeref = {verbreg},regnum = {Road Rules 2008 -- \textcolor{red}{\textbf{Reg 15}} What is a vehicle (New South Wales)},sorttitle = {Road Rules 2008},}

@book{candl,
author={A B C Clerk and X Y Z Lindsell},
shorttitle={Torts},
options={skipbib=true,},
}



@case{cargill,partya = {Cargill Grain Co},partyb = {Foundation Co of Canada Ltd},reportyear = {1970},volyearneeded = {true},reportseries = {CS},reportpage = {145},}
@case{cargill2,partya = {Cargill Grain Co},partyb = {Foundation Co of Canada Ltd},reportyear = {1970},volyearneeded = {true},reportseries = {CA},reportpage = {265},}
@case{cargill3,partya = {Cargill Grain Co},partyb = {Foundation Co of Canada Ltd},reportyear = {1977},reportvolume = {1},volyearneeded = {true},reportseries = {SCR},reportpage = {659},linkname = {1975 CanLII 200 (SCC)},url = {https://www.canlii.org/en/ca/scc/doc/1975/1975canlii200/1975canlii200.html},}

@case{chow,partya = {Chow},partyb = { Facebook, Inc},caseyear = {2022},courtname = {BCSC},casenumber = {137},attribution = {Skolrood J},linkname = {CanLII},url = {https://www.canlii.org/en/bc/bcsc/doc/2022/2022bcsc137/2022bcsc137.html},pagination = {atparagraph},}

@case{douez,partya = {Douez},partyb = { Facebook, Inc},caseyear = {2014},courtname = {BCSC},casenumber = {953},}
@case{douez2,partya = {Douez},partyb = { Facebook, Inc},caseyear = {2015},courtname = {BCCA},casenumber = {279},}
@case{douez3,partya = {Douez},partyb = { Facebook, Inc},caseyear = {2017},courtname = {SCC},casenumber = {33},}
@case{douez4,partya = {Douez},partyb = { Facebook, Inc},caseyear = {2018},courtname = {BCCA},casenumber = {186},}
@case{douez5,partya = {Douez},partyb = { Facebook, Inc},reportyear = {2018},volyearneeded = {true},reportseries = {SCCA No},reportpage = {298},}

@case{vww,partya = {VWW},partyb = {Wasylyshen},caseyear = {2013},courtname = {ABQB},casenumber = {327},reportvolume = {563},reportseries = {AR},reportpage = {281},linkname = {CanLII},url = {https://canlii.ca/t/fz327},pagination = {atparagraph},}

@quote{q120,crossref = {vww},quotepinpoint = {72-74},options={skip-bib=true},}


\end{filecontents*}




\documentclass[12pt]{article}
\newcommand\rulesep{\rule{0.4\textwidth}{.4pt}}
%------------------

\title{McGill Legal Citation\\Usage Guide\\ \ \\{\normalsize for  the\\  \texttt{lawcite}\\  \textsc{Biblatex} style}}
\author{}
\date{}
\long\gdef\myabstracttext{\noindent This is the instruction manual for using the  (\cmdc{lawcite})  \textsc{Biblatex} format to produce McGill-style legal citations.}
%------------------
\usepackage[table,dvipsnames,svgnames]{xcolor}
\pagecolor{blue!3}
\rowcolors{1}{blue!5}{blue!9}
\usepackage{fontspec}
\setmainfont{Noto Serif}
\setsansfont{TeX Gyre Adventor}[Scale=1.2]%Gentium Plus}
\setmonofont{Noto Sans Mono}%[Colour=blue]
\newfontface\fcircnum{DejaVu Sans}[Colour=blue]
\newcommand\circnum[1]{{\fcircnum#1}}
%------------------
\usepackage[british]{babel}
\usepackage{csquotes}
\usepackage{graphicx}

\usepackage{marginnote}
\usepackage{abstract}
\usepackage{microtype}
%\usepackage{makecell}
\usepackage{minitoc}
\dosecttoc
%\usepackage{booktabs}
\usepackage{etoolbox}
\usepackage{parskip}
\newcommand\defaultparskip{\setlength\parskip{0pt}}
\newcommand\normalparskip{\parskip=.5\baselineskip plus 2pt\relax}


\newcommand\theadcolour{\rowcolor{blue!80!green!20!yellow}}

\newcommand\note[1]{(\texttt{#1})}


\newcommand\egcasename{Donoghue v Stevenson}
\newcommand\egcaseref{[1932] AC 562}

\newcommand\eg[1]{%
(\texttt{#1})
}

\newcounter{examplecounter}
\newcommand\numeg{\refstepcounter{examplecounter}\marginpar{Ex \theexamplecounter\label{ex\theexamplecounter}}}






%https://tex.stackexchange.com/questions/223434/ibidem-only-in-the-footnotes-and-not-in-the-running-text
\makeatletter
\def\blx@opt@ibidtracker@foot{%
  \let\blx@imc@ifciteibid\blx@ifciteibid@foot
  \let\blx@ibidtracker\blx@ibidtracker@foot
  \let\blx@ibidreset\blx@ibidreset@foot
  \booltrue{citetracker}}

\def\blx@ifciteibid@foot{%
  \ifbool{citetracker}
    {\iftoggle{blx@footnote}
       {\blx@imc@iffieldequals{entrykey}\blx@lastkey@text}
       {\@secondoftwo}}
    {\@secondoftwo}}

\def\blx@ibidtracker@foot{%
  \ifbool{citetracker}
    {\iftoggle{blx@footnote}
       {\global\let\blx@lastkey@text\abx@field@entrykey}
       {\global\let\blx@lastkey@foot\abx@field@entrykey}}
    {}}

\def\blx@ibidreset@foot{%
  \iftoggle{blx@footnote}
    {\global\undef\blx@lastkey@text}}
    {}
\makeatother




	\newcommand\abibname{lawcitemini}
	\newcommand\abibstyle{style=\abibname}
	\usepackage[
	\abibstyle , 
	lawcitestyle=mcgill,
	print-toc-tos=true,
	use-toc-parnumrefs=true,
	hyperlink-index-pages=true,
	indexing=cite,
	citetracker=true,
	citecounter=context,
	ibidtracker=foot,%option setting for footnotes: assumes single refs
	%%ibidstyle=uc,%uppercase Ibid OSCOLA option
	pagetracker=true,
	idemtracker=true,
	opcittracker=true,
	loccittracker=true,%if same postnote in an ibid
	autocite=footnote,
	   datezeros=true,
	   minnames=5,
	   maxnames=5,%more names than this are truncated to minnames
	   dashed=false,
	   loadfiles=true,% for annotations stored in files
	]{biblatex}

\addbibresource{\jobname.bib}
\addbibresource{clist\jobname.bib}
\addbibresource{biblatex-examples.bib}

%=================
%indexing

\usepackage{splitidx}
\newcommand\pagerefindexnote{\bigskip\noindent\small\mdseries $\to$ References are to \iftoggle{lcparnumrefs}{paragraph}{page} numbers.\hfill{\itshape \iftoggle{lcparnumrefs}{Para}{Page}}\bigskip}
\newcommand\dupentries{\ \\\small\mdseries $\to$ `Duplicated' entries are intentional.}
\setindexpreamble[cases]{\dupentries\par\pagerefindexnote}
\setindexpreamble[legislation]{\pagerefindexnote}
\setindexpreamble[regulations]{\pagerefindexnote}
\setindexpreamble[general]{\pagerefindexnote}


%Print the `preamble' of the index:
\makeatletter
 \renewcommand*{\@@printindex}{}
 \def\@@printindex[#1][#2]{%
 \begingroup
 \edef\indexshortcut{#1}%
 \def\indexname{#2\par \useindexpreamble}%
 \def\kvtcb@text@index{#2}%
 \let\index@preamble\relax
 \expandafter\let\expandafter\index@preamble
 \csname index@\indexshortcut @preamble\endcsname
 \if@splitidx
 \def\@tempa{idx}\def\@tempb{#1}%
 \ifx\@tempa\@tempb\let\@indexsuffix\@gobble\fi
 \fi
\@input@{\jobname\@indexsuffix{#1}.ind}%
\endgroup
\csname printindex@endhook\endcsname
}
\makeatother
\makeindex
\newindex[Table of Cases]{cases}
\newindex[Table of Statutes]{legislation}
\newindex[Table of Regulations]{regulations}
\newindex[General Index]{general}
%%%\sindex[cases]{\noindent $\to$ References are to page numbers}


%%\AtWriteToIndex splitidx uses \protected@write to write the index entries to its output les. The
%%\AtWriteToIndex macro lets you execute a piece of code each time an index is
%%written to a specic index. Usage:
%%\AtWriteToIndex{hshortcuti}{hcodei}
%%This may be useful if you want your index entries to reference not the page number
%%but some other counter instead. For example, in order to make each index entry
%%in the general index (identified by the idx shortcut) point to the corresponding
%%section number, you would write


%-------------------------------------------------------
%%\AtWriteToIndex{idx}{\let\thepage\thesection}
%-------------------------------------------------------

\AtWriteToIndex{cases}{\let\thepage\theparno}
\AtWriteToIndex{legislation}{\let\thepage\theparno}
\AtWriteToIndex{regulations}{\let\thepage\theparno}



%Some commands to display commands:
\newcommand\optsett[2]{\noindent\textcolor{blue}{\texttt{#1} \ifblank{#2}{}{\hfill default: \texttt{\textbf{#2}}}}}

\newcommand\bcmd[1]{\{#1\}}
\newcommand\cmd[1]{\texttt{\textcolor{blue}{\textbackslash #1}}}
\newcommand\cmdb[1]{\texttt{\textbackslash #1}}
\newcommand\cmdc[1]{\texttt{\textcolor{blue}{#1}}}
\newcommand\mcmd[1]{\texttt{\textbackslash #1\{\}}}
\newcommand\braces[1]{\{#1\}}
\newcommand\brackets[1]{[#1]}
\newcommand\bracketsb[1]{[\colorbox{red!15!yellow!80}{#1}]}
\newcommand\parens[1]{(#1)}
\newcommand\disp[1]{\hfill\fbox{#1}\hfill\ \par}
\newcommand\dispb[1]{\hfill #1 \hfill\ \par\medskip}
\newcommand\dispeg[1]{\noindent #1\par}
\newcommand\angles[1]{<#1>}

\newcommand\mnotepre{}
\newcommand\mnotepredelim{}
\newcommand\mnotepostdelim{}
\newcommand\mnotepost{}
\newcommand\mnote[1]{%
{\mnotepre\mnotepredelim#1\mnotepostdelim\mnotepost}%
}
\newcommand\lcdisclaimer{%
{%
\renewcommand\mnotepre{\bigskip\noindent\sffamily\bfseries\scshape\large}
\renewcommand\mnotepredelim{}
\renewcommand\mnotepostdelim{}
\renewcommand\mnotepost{\hspace{1.2em}}
\mnote{Disclaimer}%
}%
}

\newcommand\canreg[2]{\lawcite[#2]{#1}}

\newfontface\fcc{Noto Sans Mono}
\newcommand\attribution[1]{\hspace{2pt}\fcc\tiny\rotatebox{90}{#1}}

\usepackage{tikz}
\usetikzlibrary{tikzmark, calc}
\newcommand\hlybox[2][]{\tikz[overlay]\node[fill=yellow!20,draw=black,inner sep=2pt, anchor=text, rectangle, rounded corners=1mm,#1] {#2};\phantom{#2}}

%\usepackage{lthooks}


\usepackage[
final=true,
bookmarks,
%            allcolors = black,  
            colorlinks=true,        
            citecolor=blue, 
            hyperindex=false,       
]{hyperref}

%================
%changes:
%\renewcommand*{\mkibid}{\emph}
%\DeclareNameAlias[book]{author}{given-family}
%%\renewcommand*\finentrypunct{}

\newcommand\markercolour{red}
\newcommand\markera{\textcolor{\markercolour}{.}}
\newcommand\markerb{\textcolor{\markercolour}{:}}

\newcommand\citecompare[1]{%
\par\bigskip inline cite: \renewcommand\lguide{aglc}\marginpar{\scriptsize\cmd{yycite}}
\markera\yycite{#1}\markera
>>
\renewcommand\lguide{mcgill}
\markerb\yycite{#1}\markerb

\medskip parencite: \renewcommand\lguide{aglc}\marginpar{\scriptsize\cmd{yyparencite}}
\markera\yyparencite{#1}\markera
>>
\renewcommand\lguide{mcgill}
\markerb\yyparencite{#1}\markerb

\medskip footcite: \renewcommand\lguide{aglc}\marginpar{\scriptsize\cmd{yyfootcite}}
\markera x\yyfootcite{#1}\markera
>>
\renewcommand\lguide{mcgill}
\markerb x\yyfootcite{#1}\markerb
}
\newcommand\aglcd[1]{\colorbox{blue!15}{\textsc{AGLC}\textsuperscript{4}~\textsf{#1}}}

%-------------------------------
\newcommand\bemph[1]{\colorbox{blue!12}{#1}}
\newcommand\cemph[1]{\colorbox{red!12!yellow!72}{#1}}

%-------------------------------
\newcommand\itemdesc[1]{{\usefont{T1}{lmr}{m}{n}#1:}}

%-------------------------------
\newcounter{myexamplecounter}
\newcommand\applymycounter[1]{\refstepcounter{myexamplecounter}%
{\sffamily\small[Ex-\themyexamplecounter]}\label{mycite:#1}
}
%-------------------------------
\newcounter{myexampledcounter}
\newcommand\applymydcounter[1]{\refstepcounter{myexampledcounter}%
{\sffamily\small[FS-\themyexampledcounter]}\label{mydump:#1}
}


%-------------------------------
\newcommand\examplebox[1]{%

\bigskip
\fbox{\begin{minipage}{0.8\textwidth}
#1
\end{minipage}}

\bigskip
}


%-------------------------------
\newcommand\exampledemo[5][fson]{%

\bigskip
\fbox{\begin{minipage}{0.8\textwidth}
\applymycounter{#5} -- \itemdesc{#4}\ifstrequal{#1}{fson}{\hfill{\tiny fieldset \ref{mydump:#5}}}{}\par
\bemph{#2} $\mapsto$\ \par
\smallskip
#3
\end{minipage}}

\bigskip
}

%-------------------------------
\newcommand\examplefieldscite[3]{%
{\small
\begin{tabular}{ll}
\rowcolor{blue!80!green}
\bfseries\sffamily\color{yellow!80}Citation\phantom{\Large L} & 
\bfseries\sffamily\color{yellow!80}Bibentry fields \\
\hline & \\
\fbox{\begin{minipage}{0.4\textwidth}
\bemph{#1} $\mapsto$\ \par
\smallskip
#2
\end{minipage}} 
&
\fbox{\begin{minipage}{0.5\textwidth}
\lcdcase{#3} 
\end{minipage}} 
\\
\end{tabular}
}}







\newcommand\demofielddump[3][\newpage]{%1=layout,2=key, 3=counter
#1%
\ifstrequal{#1}{\newpage}{\applymydcounter{#3}Fields for example \ref{mycite:#2}: \textbf{#2} -- \par

\bigskip}{}%
\defaultparskip
\lcdcase{#2}%
%\normalparskip
%\printrectangle
}


\newcounter{rectmark}
\newcommand{\printrectangle}{\stepcounter{rectmark}
  \gdef\mynode{pic cs:\therectmark}\tikzmark{\therectmark}%
%  }%
%\AddToHook{shipout/background}{%
  \begin{tikzpicture}[remember picture,overlay]
    \fill[blue!10!white] (current page.north west) rectangle 
    ( $ (\mynode) +(\paperwidth,0) $ );
  \end{tikzpicture}
\gdef\mynode{0,0}%
}%



\newcommand\democomm[4][]{%1=pre,2=command,3=key,4=punct
\cmd{#2}\textcolor{brown}{\braces{#3}}{#4}
\begin{myquotation}
#1\csname #2\endcsname{#3}
\end{myquotation}
}

\newcommand\democommpost[5][]{%1=pre,2=command,3=key,4=punct,5=postnote
\cmd{#2}\textcolor{brown}{\brackets{#5}\braces{#3}}{#4}
\begin{myquotation}
#1\csname #2\endcsname[#5]{#3}
\end{myquotation}
}
%
\newcommand\democommpre[5][]{%1=pre,2=command,3=key,4=punct,5=prenote
\cmd{#2}\textcolor{brown}{\brackets{#5}\brackets{}\braces{#3}}{#4}
\begin{myquotation}
#1\csname #2\endcsname[#5][]{#3}
\end{myquotation}
}

\newcommand\democommprepost[6][]{%1=pre,2=command,3=key,4=punct,5=prenote,6=postnote
\cmd{#2}\textcolor{brown}{\brackets{#5}\brackets{#6}\braces{#3}}{#4}
\begin{myquotation}
#1\csname #2\endcsname[#5][#6]{#3}
\end{myquotation}
}

\newcommand\vv[1]{\texttt{#1}}

\newsavebox{\mnbox}

\usepackage{tcolorbox}
\tcbuselibrary{skins}
\tcbuselibrary{breakable}
\newfontface\fmag{Noto Sans Symbols2}[Scale=2,Colour=blue]
\newenvironment{magpar}
{
\vspace{1ex}
\begin{tcolorbox}[breakable, enhanced,colback=yellow!10!white,boxrule=0pt,frame hidden,borderline west={1mm}{-2mm}{black}]
{ \fmag 🔍 }
}
{\end{tcolorbox}
\vspace{1.8ex}
 }

\newenvironment{myquotation}
{
\vspace{2.1ex}
\begin{quotation}
}
{\end{quotation}
\vspace{2.8ex}
 }


\newenvironment{casenote}[1]
{
\begin{tcolorbox}[title=#1,
enhanced,
attach boxed title to top right,
boxed title style={colframe=blue!75!yellow!15,colback=violet!75,},
colback=red!5!white,
colframe=red!75!black,
fonttitle=\bfseries,
%before title={x},
%after title={\hfill\colorbox{Navy}{approved}},
]
}
{\end{tcolorbox}
 }
\newenvironment{casequote}[1]
{
\begin{myquotation}
\begin{tcolorbox}[title=#1,
enhanced,
attach boxed title to top right,
boxed title style={colframe=blue!75!yellow!15,colback=violet!8,},
colback=brown!5!white,
colframe=brown!75!black,
fonttitle=\bfseries,
coltitle=green!25!black,
%before title={x},
%after title={\hfill\colorbox{Navy}{approved}},
]\begin{tabular}{ccc}\cellcolor{yellow!30!brown!18}{\Large ``} & \cellcolor{brown!12!white}
\begin{minipage}{0.82\textwidth}
}
{\end{minipage} & \cellcolor{yellow!30!brown!18}{\Large''}\\\end{tabular}\end{tcolorbox}
\end{myquotation}
 }


%---
\usepackage{luacolor,lua-ul}
\colorlet{r1}{GreenYellow!50}
\colorlet{r2}{RubineRed}
\colorlet{r3}{RoyalPurple}
\LuaULSetHighLightColor{r1}
%--
\newunderlinetype\beginUnderWavy[\number\dimexpr1ex]{\cleaders\hbox{%
\setlength\unitlength{.3ex}%
\begin{picture}(4,0)(0,1)
\thicklines
\color{red}%
\qbezier(0,0)(1,1)(2,0)
\qbezier(2,0)(3,-1)(4,0)
\end{picture}%
}}
\newcommand\underWavy[1]{{\beginUnderWavy#1}}

%---
\usepackage{adjustbox}
\usepackage{fancyvrb}
\usepackage{mdframed}
\usepackage{fancyvrb-ex}

%---

\ExplSyntaxOn

%****************************************************
%*
%****************************************************
%--------------------
%\NewDocumentCommand { \mfsloadaseq } { o m +m } { % 1=seq name, 2=data
%
%				\IfNoValueTF { #1 } 
%						{ \tl_clear:N \g_fc_namespace_tl } 
%						{ \tl_gset:Nn \g_fc_namespace_tl { #1 } }
%
%
%	\cs_if_free:cT
%			{ g_fc_rwe \g_fc_namespace_tl #2 _seq }
%			{ \seq_new:c
%					{ g_fc_rwe \g_fc_namespace_tl #2 _seq } 
%			}
%	\seq_gclear:c 
%			{ g_fc_rwe \g_fc_namespace_tl #2 _seq } 
%	\seq_gset_split:cno 
%			{ g_fc_rwe \g_fc_namespace_tl #2 _seq } 
%			{ , } 
%			{ #3 }
%
%%	\seq_show:c 
%%			{ g_fc_rwe \g_fc_namespace_tl #2 _seq } 
%
%
%}


%%\renewcommand\setindexhyperlinks{%
%%\iftoggle{lcparnumrefs}{%
%%\renewcommand\myhyperref[1]{\ref{para.##1}}%
%%%\renewcommand\lcparnumrefsencap{|myhyperref}%
%%\renewcommand\lcparnumrefsencap{}%
%%}%end true
%%{%false
%%\renewcommand\myhyperref[1]{\hyperpage{##1}}%
%%%\renewcommand\lcparnumrefsencap{|myhyperref}%
%%\renewcommand\lcparnumrefsencap{}%
%%}%end false
%%}



%------------------
	\cs_set:Npn \lc_funcaddsqbrb:n #1 { 
	%	[#1]
	\int_gincr:N \g_lc_rangecount_int
	
\iftoggle{lcparnumrefs}{%
\renewcommand\myhyperref[1]{\ref{para.##1}}%
}%end true
{%false
\renewcommand\myhyperref[1]{\hyperpage{##1}}%
}%end false

   			\int_compare:nNnTF 
					{ \g_lc_rangetotal_int } > { 1 }
					{
   					\int_compare:nNnTF 
							{ \g_lc_rangecount_int } > { 1 }
							{ % T
									% nothing					
							}
							{ % F
									[
							}

					} % end T
					{ % F
						[
					}

%[
\iftoggle{hyperindexpages}{%
\myhyperref{#1}%
}%end true
{%false
#1
}%end false
%%]

   			\int_compare:nNnTF 
					{ \g_lc_rangetotal_int } > { 1 }
					{
   					\int_compare:nNnTF 
							{ \g_lc_rangecount_int } = { 1 }
							{ % T
									-- % range delim					
							}
							{ % F
									]
							}

					} % end T
					{ % F
						]
					}


}


%------------------
	\cs_set:Npn \lc_funcaddsqbr:n #1 { 
	% 1=seq
		\int_gset:Nn \g_lc_rangecount_int { 0 }
		\int_gset:Nn \g_lc_rangetotal_int { 0 }

			\seq_set_split:Nnn 
					\l_tmpa_seq 
					{ -- } 
					{ #1 }
			\int_gset:Nn 
					\g_lc_rangetotal_int 
					{ \seq_count:N \l_tmpa_seq }
					
				\seq_map_function:NN 
					\l_tmpa_seq
					\lc_funcaddsqbrb:n
}



\int_new:N \g_lc_rangecount_int
\int_new:N \g_lc_rangetotal_int
\NewDocumentCommand { \squarecheck }{ m }
 {

   \mfsloadaseq[ref]{index}{#1}

				\seq_map_function:cN 
					{ g_fc_rwe \g_fc_namespace_tl index _seq }
					\lc_funcaddsqbr:n
}




\NewDocumentCommand{\xsquarecheck}{>{\SplitArgument{1}{--}}m}
 {
   \formatrange#1
 }
\NewDocumentCommand{\formatrange}{mm}
 {
  \IfNoValueTF { #2 }
   { % no --, it's not a range
   \mfsloadaseq[ref]{index}{#1}
   
%%   			\int_compare:nNnTF 
%%					{ \seq_count:c { g_fc_rwe \g_fc_namespace_tl index _seq } } = { 1 }
%%					{ [#1] } % single item
%					{ % X, Y items
%%					\seq_gset_split:Nnn 
%%					\g_tmpa_seq 
%%					{ ; } 
%%					{ #1 } 

				\seq_map_function:cN 
					{ g_fc_rwe \g_fc_namespace_tl index _seq }
					\lc_funcaddsqbr:n


%					}    % X, Y items

   
   
   }
   { % it's a range
    \{#1\}--(#2) 
   }
 }

\ExplSyntaxOff

\title{Legal citation \\ using \\a >>\textcolor{blue}{\lccurrentstyle}-like<< \\ lawcitestyle}
\author{}
\date{13-Nov-2021}


%------------------
\begin{document}
\maketitle

\sbox{\mnbox}{\begin{minipage}{0.9\linewidth}
\lcdisclaimer \colorbox{blue!12!green!15}{\vv{lawcite}} does not purport to be the official or authorised implementation of any legal citation style (including ``\lccurrentstyle'') and no warranty is expressed or implied. Use (and modify) at own risk.
\end{minipage}}

\begin{center}
\fcolorbox{black}{blue!7!red!5}{\fcolorbox{black}{yellow!5!green!2}{\usebox{\mnbox}}}
\end{center}

\section{Introduction}
\p The \cmdc{lawcite} \textsc{Biblatex} style attempts to automate the typesetting of some components of various legal citation styles by using a single citation command, with a view, further, to being able to switch in and out of styles mid-document, and even to switch components on and off as required in cross-jurisdictional texts. 

\p This release currently implements AGLC-, Indigo-, MLR- and McGill-like style rules, as far as it can, since no legal citation style could ever be fully automated. As part of the design, individual elements of a style are accessible for when needed. Also, a `lite' version is provided for users working in non-legal contexts.

\p This file is standalone, in the sense that it generates the bibliography file and the style files needed by \textsc{Biblatex}.

\newpage
The built-in Table of Cases/Statutes/Regulations are not part of `McGill'; they are shown here for convenient reference.

\renewcommand\lcparnumrefsencap{}%
\printlawciteindexes



\newpage
\section{Quick Overview}
\bigskip
\ \marginpar{\textsf{\textsc{Case}}}

\medskip\noindent
\examplefieldscite{\cmd{lawcite}\brackets{23}\braces{collins}}{``and if the manner in which the search was carried out is reasonable''\lawcite[23]{collins}}{collins}

\newpage
\ \marginpar{\textsf{\textsc{Law Journal}}}

\medskip\noindent
\examplefieldscite{\cmd{ljcite}\brackets{276}\braces{kleefeld}}{``typography matters'' \par\smallskip -- \ljcite[276]{kleefeld}}{kleefeld}

\newpage
\ \marginpar{\textsf{\textsc{Legislation}}}

\medskip\noindent
\examplefieldscite{{\scriptsize\cmd{lawcite}\hspace{0.1em}\brackets{\cmd{lcsec}\hspace{0.1em}\braces{16(1)}}\hspace{0.1em}\braces{maanulth}}}{``Judicial notice shall be taken of Maanulth Laws.'' \par\smallskip -- \lawcite[\lcsec{16(1)}]{maanulth}}{maanulth}

\newpage
{
\lcsetstylemcgill
\exampledemo[fsoff]{\lccurrentstyle}{\mkbibquote{\ldots Chief Justice Lamer’s observations in \lcshorttitle{rta1996} where he invoked Lord Sankey’s famous admonition in the \lcyear{edwardsa} \lcnickname{edwardsa} case \lcinlineparens{edwardsa} that the Constitution is a \mkbibquote{living tree} to be interpreted flexibly\ldots}\lawcite[From][303]{ccpref}}{Canadian style}{can}
}

\bigskip
produced by:

\bigskip
\begin{magpar}
%\begin{myquotation}\noindent
%{\ttfamily
%\cmd{mkbibquote}\braces{\cmd{ldots} Chief Justice Lamer’s observations in 
%\cmd{lcshorttitle}\braces{rta1996} 
%where he invoked Lord Sankey’s famous admonition in the \cmd{lcyear}\braces{edwardsa} 
%\cmd{lcnickname}\braces{edwardsa} case 
%\cmd{lcinlineparens}\braces{edwardsa} 
%that the Constitution is a 
%\cmd{mkbibquote}\braces{living tree} 
%to be interpreted flexibly\cmd{ldots}}
%\hspace{0.1pt}\cmd{lawcite}\hspace{0.1pt}\brackets{From}\hspace{0.1pt}\brackets{303}\hspace{0.1pt}\braces{ccpref}
%}
%\end{myquotation}
\begin{verbatim}
\mkbibquote{\ldots 
Chief Justice Lamer’s observations in 
\lcshorttitle{rta1996} 
where he invoked Lord Sankey’s 
famous admonition in the 
\lcyear{edwardsa} 
\lcnickname{edwardsa} case 
\lcinlineparens{edwardsa} 
that the Constitution is a 
\mkbibquote{living tree} 
to be interpreted 
flexibly\ldots}\lawcite[From][303]{ccpref}
\end{verbatim}
\end{magpar}

\bigskip
from

%\defaultparskip
\demofielddump[]{edwardsa}{can}

\bigskip
Note:
\begin{itemize}
\item the two nested mkbibquotes:
\begin{itemize}
\item an explicit mkbibquote, for the direct quote
\item an implicit one, inside \cmd{lcnickname}
\end{itemize}
\item the case number field contains a note as well 
\begin{itemize}
\item {\ttfamily casenumber = \{438 (UK JCPC)\},}
\end{itemize}
\item the ``PC'' in the note field, and ``134'' in the reportpage field
\begin{itemize}
\item {\ttfamily reportpage = \{134 (PC)\},} is also possible
\end{itemize}
\item and that \cmd{lcinlineparens} ignores nesting of brackets for any note, to get (\ldots (\textit{note})) instead of a nested (\ldots [\textit{note}]).
\end{itemize}


\newpage
%\section{Cases}

\bigskip
\exampledemo{\cmd{lawcite}\braces{cole}}{Text\lawcite{cole}}{lawcite style}{cole}

\exampledemo{\cmd{lawcite}\braces{cole}}{Text\lawcite{cole}}{ibid}{coleb}


\bigskip
\exampledemo{\cmd{lawcite}\braces{tcca}}{\lawcite{tcca}}{lawcite style, citeref canleg}{tcca}


\exampledemo{\cmd{lawcite}\braces{fisc}}{\lawcite{fisc}}{lawcite style, citeref canreg}{fisc}

\exampledemo{\cmd{lawcite}\braces{dfns}}{\lawcite{dfns}}{lawcite style, citeref nsreg}{dfns}

\exampledemo{\cmd{lawcite}\braces{bears}}{\lawcite{bears}}{lawcite style, citeref sorreg}{bears}

%Fields for example \ref{mycite:cole}: cole -- \lcdcase{cole}
\parindent = 0pt
\demofielddump{cole}{cole}
\demofielddump{cole}{coleb}
\demofielddump{tcca}{tcca}
\demofielddump{fisc}{fisc}

\demofielddump{dfns}{dfns}
\demofielddump{bears}{bears}

\begin{figure}
\begin{center}
\toggletrue{lcimageshow}
\setlcimagescale{1}
\lcimage{imvelocity}\rotatebox{90}{\tiny CommonLII}
\caption[The Velocity]{\lcinlinerr{velocity, velocitynr, velocityer}.}
\end{center}
\end{figure}


\renewcommand\numpardelimpre{\medskip}\renewcommand\numparindent{\hspace{0.5em}}
\section{Citation Commands}
%%\cmd{lawcite}
%%\begin{myquotation}
%%Text\lawcite{hmb}
%%\end{myquotation}

\p This section describes the citation commands available for use with the \vv{@case} and \vv{@statute} bibentry types.

\subsection{General}

\p The general, all-purpose, citation command is \cmd{lawcite}.

\p Initial citation: \democomm[Text]{lawcite}{hmb}

\p Subsequent citation: \democomm[Text]{lawcite}{hmb}

\p If \texttt{partya}'s name ends with a dot (\verb|.|), use \verb|\@| to tell biblatex that it is an abbreviation dot, otherwise the following party separator will be taken as the first letter of a new sentence and set to upper case.

With \verb|\@|, \democomm[Text]{lawcite}{hmb2}{:}


\citetrackerfalse
\lcdacasefield[partya][]{hmb2}
\citetrackertrue

\p Post-note: \democommpost[``the governing case \ldots calls for a liberal approach to the recognition and enforcement of foreign judgments'']{lawcite}{hmb2}{:}{18}

\p Pre-note: \democommpre[Text]{lawcite}{wilson}{:}{See}

%\p Pre-note and post-note: \democommprepost[Text]{lawcite}{wilson}{:}
%{However, cf. the situation where, in the absence of other indicators, a purchaser is not `carrying on a business': ``None of the usual \textit{indicia} of carrying on business in a geographical area were present, Hull had no physical presence in Idaho, that is he had no office, factory or other business premises there. He did not employ salesmen, agents or other representatives or employees in Idaho. He had no commercial relationships with other residents of Idaho. He did not advertise his products or seek to sell them in Idaho. His only connection with the State of Idaho was as a purchaser of goods there and his status under the agreement concerning the distribution of Wilson’s trailers in Northern Alberta. It is clear from the material filed that any active business relationship between the parties terminated shortly after May 8, 1992 and certainly before October 19, 1992.''}{11}

\p Pre-note and post-note: \democommprepost[Text]{lawcite}{wilson}{:}
{However, cf. ``In my view, the purchase of articles in Idaho from a seller located there and their removal to Alberta for resale does not constitute carrying on business in Idaho.'' -- }{13}

\p Subsequent history of a case: build the history by hand:

\begin{magpar}
\begin{verbatim}
Text\footnote{\lcinline{acme}, 
rev'd \lawciteref{acmeca}.}
\end{verbatim}
\end{magpar}

\begin{myquotation}
Text\footnote{\lcinline{acme}, rev'd \lawciteref{acmeca}.}
\end{myquotation}

but see now the \cmd{lccatena} command at \pararef{:lccatena}.


\p Parallel reports: items are separated by \textit{and}

\begin{myquotation}
``The result of the clause is that the effect of the original judgment depends upon the rules on recognition of foreign judgments in force in this Province. I refer to  \lcinline{aero}.''\lawcite[][600]{moore}
\end{myquotation}


\citetrackerfalse
\lcdacasefield[parallel][]{tdi}
\citetrackertrue

\begin{myquotation}
``In \lcinline{morguard}, the Supreme Court of Canada broadened the criteria for the recognition and enforcement of foreign judgments. La Forest J., writing for the court, reviewed the nineteenth-century English rules governing the recognition of foreign judgments. He discussed the concept of Canada as a single nation, the need to encourage the flow of trade and commerce between the provinces, and the reasons why the existing rules, as they were adopted in Canadian jurisprudence, require broadening for this country. He concluded that the "real and substantial connection" test for the recognition of foreign judgments should govern in Canada. That is, if the events, the parties or the circumstances giving rise to the conflict have a real and substantial connection to the jurisdiction from which a judgment emanates, that judgment should be recognized for enforcement purposes.''\lawcite[][3]{tdi}
\end{myquotation}

\p Using a different party separator (\textit{c} for ``contre''):

%\citetrackerfalse
%\lcdacasefield[partysep][]{calego}
%\citetrackertrue
\lcgetabibfield{calego}{partysep}

\begin{myquotation}
``À cela s’ajoute le fait que, si le contrat de travail impose à un salarié certaines restrictions à sa liberté d’expression[25], il n’y a pas de raison pour que des restrictions du même ordre ne visent pas également l’employeur.''\lawcite[][115]{calego}
\end{myquotation}
%Il y a plus d’un siècle, dans McAuliffe v. Mayor and Board of Aldermen of New Bedford, 29 N.E. 517 (1892), le juge Holmes écrivait, p. 517-8 : « There are few employments for hire in which the servant does not agree to suspend his constitutional right of free speech, as well as of idleness, by the implied terms of his contract. »

\p Citing from a different jurisdiction (US), by changing the citation style mid-document:
\begin{myquotation}
Il y a plus d’un siècle, dans \lcsetstyleindigo\lcinline{mcauliffe}\marginpar{$\leftarrow$ \sffamily\small\lccurrentstyle}\lcsetstylemcgill, le juge Holmes écrivait, \lcpostnote[][p. 517-8]{mcauliffe} : « There are few employments for hire in which the servant does not agree to suspend his constitutional right of free speech, as well as of idleness, by the implied terms of his contract. »\lawcite[][note 25]{calego}
\end{myquotation}

%\begin{itemize}
%\item
%\end{itemize}
\p \paradef{styleset}To change the citation style mid-document, use one of the following switches:
\citetrackerfalse
\begin{itemize}
\item \cmd{lcsetstyleaglc} for AGLC style (a footnote style)
\begin{itemize}
\item \lcsetstyleaglc Text\lawcite{snail}
\end{itemize}
\item \cmd{lcsetstylemlr} for MLR style (casename inline, caseref in footnote)
\begin{itemize}
\item \lcsetstylemlr  Text \lawcite{snail}
\end{itemize}
\item \cmd{lcsetstylemcgill} for McGill style (a footnote style)
\begin{itemize}
\item \lcsetstylemcgill  Text\lawcite{snail}
\end{itemize}
\item \cmd{lcsetstyleindigo} for Indigo style (an inline style)
\begin{itemize}
\item \lcsetstyleindigo  Text \lawcite{mcauliffe}
\end{itemize}
\end{itemize}
\citetrackerfalse
\lcsetstylemcgill

\p To explicitly override the currently active citation style:
\citetrackerfalse
\begin{itemize}
\item use \cmd{lcinline} for an inline citation
\begin{itemize}
\item Text \lcinline{snail}
\end{itemize}
\item use \cmd{lcinlineparens} for a parenthetic inline citation
\begin{itemize}
\item Text \lcinlineparens{snail}
\begin{itemize}
\item Alternatively, do \cmdc{(\textbackslash lcinline\{..\})}
\end{itemize}
\end{itemize}
\item use \cmd{lcfoot} for a footnote citation
\begin{itemize}
\item Text\lcfoot{snail}
\begin{itemize}
\item Alternatively, do \cmdc{\textbackslash footnote\{\textbackslash lcinline\{..\}..\}}
\end{itemize}
\end{itemize}
\item use \cmd{lawcitehf} for an MLR-style citation
\begin{itemize}
\item Text \lawcitehf{snail}
\end{itemize}
\end{itemize}
\citetrackerfalse

\newcommand\lccci[2]{\item \cmd{#1} for the #2
\begin{itemize}
\item \csname #1\endcsname{snail}
\end{itemize}
}
\newcommand\lcccib[2]{\item \cmd{#1} for the #2
\begin{itemize}
\item \csname #1\endcsname[563]{snail}
\end{itemize}
}
\citetrackerfalse
\lcsetstyleaglc
\p Components of a citation can be retrieved individually for use as standalone items. \marginpar{See also \pararef{illus}.}For a given citation ``\lcinline[563]{snail}'':
\begin{itemize}
\item \cmd{lawcitetitle} for the casename
\begin{itemize}
\item \lawcitetitle{snail}
\end{itemize}
\lccci{lawciteref}{caseref}
\lccci{lcrefnn}{caseref without the note}
\lccci{lcnote}{note}
\lccci{lcshorttitle}{short title (shipname, caseshortname, partya)}
\lccci{lccasesn}{case shortname  (shipname, partya)}
\lccci{lcyear}{decision year}
\lccci{lcnickname}{case nickname}
\lcccib{lcpostnote}{postnote}
\lccci{lcciteref}{citeref (for statutes)}
\end{itemize}
\citetrackerfalse
\lcsetstylemcgill

\p The bibentry \cmdc{caseshortname} field is intended as the adhoc, user-assigned, shorthand for a case, e.g., \lawcitetitle{tdi} could be shortened to \lcshorttitle{tdi}; while the \cmdc{casenickname} field is the shorthand as known generally among the profession, e.g., \lawcitetitle{edwardsa} is known as the \lcnickname{edwardsa} case.

\p One citation (inline) with multiple cases can be done with \\ \democomm[Text\ ]{lcinline}{clarke,tulk,cbc,vdn}{:}

The parenthetical and footnote versions can be done the usual way (with \cmdc{(...)}, and \cmdc{\textbackslash footnote\{...\}}).

\p One citation with multiple cases, each case with its own prenote and postnote, and a overall prenote and postnote for the whole citation group, can be done with \cmd{lawcitesinline}.

This code:
\begin{magpar}
\begin{myquotation}
\noindent\cmd{togglefalse} \braces{pinpointaftermnc}\\
\cmd{lawcitesinline} (Overall prenote:) (overall postnote) \brackets{654-55} \braces{wismer} \brackets{128-29} \braces{mulroney} \brackets{189} \braces{toucheross} \brackets{394} \braces{roglass}.\\
\cmd{toggletrue} \braces{pinpointaftermnc}
\end{myquotation}
\end{magpar}
produces:
\begin{myquotation}\noindent
\togglefalse{pinpointaftermnc}
\lawcitesinline(Overall prenote:)(overall postnote)[654-55]{wismer}[128-29]{mulroney}[189]{toucheross}[394]{roglass}.
\toggletrue{pinpointaftermnc}
\end{myquotation}

In this case, none of the citations have real MNCs, so \cmdc{pinpointaftermnc} is toggled to false, so that the pinpoints appear after the law report reference and not after the CanLII ``MNC''.

\p The corresponding footnote version uses \cmd{lawcitesfoot}:

\begin{myquotation}
\togglefalse{pinpointaftermnc}
Text\lawcitesfoot(Overall prenote:)(overall postnote)[654-55]{wismer}[128-29]{mulroney}[189]{toucheross}[394]{roglass}
\toggletrue{pinpointaftermnc}
\end{myquotation}

\begin{figure}
\begin{center}
\toggletrue{lcimageshow}
\setlcimagescale{0.7}
\lcimage{equity}\rotatebox{90}{\tiny CommonLII}
\caption[Equity follows Law]{\lcinlinerr{equity, equitycary, equityer}.}
\end{center}
\end{figure}

\p With nominate reports and their reprints in the English Reports, set up three bibentries.  One bibentry has the casename and will be the `parent' entry (and use the \cmdc{skipbib} option:

%%\citetrackerfalse
%%\lcdacasefield[options][]{salter}
%%\citetrackertrue
%\lcgetabibfield{salter}{options}

\begin{myquotation}\noindent
\demofielddump[]{salter}{salter}
\end{myquotation}

The two child entries will \cmdc{crossref} back to the parent and inherit its fields (the party names), and one of the child entries will use the \cmdc{skipbib} option:

\begin{myquotation}\noindent
\demofielddump[]{salternr}{salternr}
\end{myquotation}

and

\begin{myquotation}\noindent
\demofielddump[]{salterer}{salterer}
\end{myquotation}
give (with \verb|\lcinlinerr{salter, salternr, salterer}|):
\begin{myquotation}\noindent
`the corporation dieth not' -- \lcinlinerr{salter, salternr, salterer}
\end{myquotation}

\p To \marginpar{buggy} follow the current cite style, use
\democomm[Text]{lawciterr}{salter, salternr, salterer}{:}

Workaround for footnote styles: use \cmd{footnote}\braces{\cmd{lcinelinerr}\braces{...}}: Text\footnote{\lcinlinerr{salter, salternr, salterer}.}

\p To have an inline citation, use
\democomm[Text\ ]{lcinlinerr}{salter, salternr, salterer}{:}


\p To have a footnote, use
\democomm[Text]{lcfootrr}{salter, salternr, salterer}{:}



\p Alternatively to the parent-child method, especially when pinpoints are needed, two full bibentries with the components of their citations may be used:, the casename and caseref from one bibentry, followed by the caseref of the other, with one of the entries having the \cmdc{skipbib=true} option,

so that, with
\begin{myquotation}\noindent
\demofielddump[]{ashnr}{ashnr}
\end{myquotation}
and
\begin{myquotation}\noindent
\demofielddump[]{asher}{asher}
\end{myquotation}
the combination \verb|\lcinline[358]{ashnr}, \lawciteref[526]{asher}.| gives:
\begin{myquotation}\noindent
\lcinline[358]{ashnr}, \lawciteref[526]{asher}.
\end{myquotation}


%%Not really needed, given that components are already available.
%%\lawcitetitlerr{salter, salternr, salterer}
%%
%%\lcshorttitlerr{salter, salternr, salterer}
%%
%%\lcnicknamerr{salter, salternr, salterer}
%%
%%\lawciterefrr{salter, salternr, salterer}
%%
%%\lcrefnnrr{salter, salternr, salterer}
%%
%%\lcnoterr{salter, salternr, salterer}



\p A full inline citation can be done with \\ \democomm[Text\ ]{lcinlinefull}{snail}{:}

\p A full inline citation with no note can be done with \\ \democomm[Text\ ]{lcinlinenn}{snail}{:}

\p A full footnote citation can be done with \\ \democomm[Text]{lcfootfull}{snail}{:}

\section{Statutes and Regulations}
\subsection{Statutes}

\p Statutes may be cited with \democomm[]{lawcite}{fla}{:}

 \lcdcase{fla}

More examples:

\bigskip
\lawcite[\addcomma\addspace\lcsec{3}]{tla}\par\bigskip
\lawcite{fair}\par\bigskip
\lawcite{water}\par\bigskip

This last uses the semantic structure of the @statute bibentry:\medskip

\fbox{\strut\textit{title}}, \fbox{\strut year} \fbox{\strut (jurisdiction)} \fbox{\strut (note)}\medskip

to store\medskip

\fbox{\strut\textit{Safe Drinking Water Act}}, \fbox{\strut 42 USC §300f} \fbox{\strut \ } \fbox{\strut (1974)}\medskip

The year value 1974 could just as easily have been stored in the jurisdiction field, with no note field, to produce an identical result.\bigskip

\p To display the jurisdiction for (non-Canadian) statutes, do:\\
{\footnotesize\textcolor{blue}{\cmd{toggletrue}\braces{statjurisdiction}}}
or
{\footnotesize\textcolor{blue}{\cmd{setstatjurison}}}
   \toggletrue{statjurisdiction}

   \lawcite{prop}\\
   \lawcite{crimnsw}\\
{\footnotesize\textcolor{blue}{\cmd{togglefalse}\braces{statjurisdiction}}}
or
{\footnotesize\textcolor{blue}{\cmd{setstatjurisoff}}}
\togglefalse{statjurisdiction}\par\bigskip

\begin{magpar}
\begin{verbatim}
\toggletrue{statjurisdiction}
\lawcite{prop}
  
\lawcite{crimnsw}
\togglefalse{statjurisdiction}
\end{verbatim}
\end{magpar}

\lcdcase{prop}

%------------------------------
\subsection{Regulations}

\p In combination with a corresponding formatter \cmdc{citeref} (if applicable), citation of regulations can use \democomm[]{lawcite}{canregnb}{:}

from

\lcdcase{canregnb}

More examples:

\bigskip
\democomm[]{lawcite}{bears}{:} from \lcdcase{bears}
%\lawcite{bears}\par\bigskip
\democommpost{lawcite}{birds}{:}{s 9} from \lcdcase{birds}
%\lawcite[\addcomma\addspace\lcsec{9}]{birds}\par\bigskip
\democommpost{lawcite}{forests}{:}{s 2} from \lcdcase{forests}
%\lawcite[\addcomma\addspace\lcsec{2}]{forests}\par\bigskip


\p There is a multiplicity of regulation format types across the jurisdictions, and it is more flexible, from a data structure point of view, to use use the \cmdc{citeref} field in the @statute bibentry since it can process both (Canadian) statutes and regulations in one sweep.

\p The `traditional' @statute fields can still be used, but they are formatted only at the level of statutes, and regulations that look like statutes.

\bigskip
(using \cmdc{citeref} field)\\
 \lawcite[\addcomma\addspace\bibstring{section} 515]{crimcodecan} provides that ...\\
(using statute bibentry fields) \\
\lawcite[\addcomma\addspace\bibstring{section} 515]{crimcan} provides that ...
\par\bigskip

The corresponding bibentries are:

\lcdcase{crimcodecan}
%\begin{verbatim}
%@statute{crimcodecan,
%citeref = {canleg},
%title = {Criminal Code},
%svjy = {RSC 1985},
%chapter = {C-46},
%}
%
%\end{verbatim}

versus

\lcdcase{crimcan}
%\begin{verbatim}
%@statute{crimcan,
%statutetitle = {Criminal Code},
%statutetitleyear = {RSC 1985, c C-46},%for the title
%}
%\end{verbatim}


\p The available \cmdc{citeref} values for regulations are:

\bigskip

\begin{tabular}{ll}
...reg & Example of format (from AGLC3)\\
crc & \lawcite{canregcrc} \\
sor & \lawcite{canregsor} \\
alta & \lawcite{canregalta} \\
bc & \lawcite{canregbc} \\
man & \lawcite{canregman} \\
nb & \lawcite{canregnb} \\%York-Sunbury-Charlotte Forest Products Marketing Board Regulation, NB Reg 2005-148
%Wildlife Refuges and Wildlife Management Areas Regulation, NB Reg 94-43
nfld & \lawcite{canregnfld} \\ %Offshore Petroleum Drilling Newfoundland Regulations (Amendment)
nlr & \lawcite{canregnlr} \\ %Colliers Municipal Planning Area, NLR 4/98
nwt & \lawcite{canregnwt} \\%Archives Regulations
ns & \lawcite{canregns} \\%Involuntary Psychiatric Treatment Regulations
nu & \lawcite{canregnu} \\
o & \lawcite{canrego} \\
pei & \lawcite{canregpei} \\ %Companion Animal Protection Act Regulations, PEI Reg EC249/02
qc & \lawcite{canregoc} \\
sask & \lawcite{canregsask} \\ %Alkali Mining Regulations
yoic & \lawcite{canregyoic} \\%lChild Care Centre Program Regulation
\end{tabular}
\bigskip

\p \paradef{cffields}When using the \cmd{citeref} field, the bibentry data fields required by the various Canadian regulation types are:
\bigskip

\begin{tabular}{lllllll}
Reg Type &  & &&&& \\
crc & title & chapter &&&& \\
sor & title && year & regnum && \\
alta & && year & regnum && \\
bc &  && year & regnum && \\
man & && year & regnum && \\
nb &  && year & regnum && \\
nfld &  && year & regnum && \\
nlr &  && year & regnum && \\
nwt &  && year & regnum && \\
ns &  && year & regnum && \\
nu &  && year & regnum && \\
o &  && year & regnum && \\
pei &  && year & regnum && \\
qc &  && year & regnum & fulldate & gazette\\
sask &  && year & regnum && \\
yoic &  && year & regnum && \\
\\
verb &  &&  & regnum && \\
\end{tabular}
\bigskip

\p For the non-federal regulations, if a title field is available, it will be printed.
\bigskip

\p For regulations with no available pre-set format, use the \cmdc{verbreg} citeref, and type the full reference (and any code) into the \cmdc{regnum} field, and it will be printed as-is:

%`"parking area" means a length of road or area designed for parking vehicles'
%Road Rules 2008, Schedule 99 Dictionary
%(NSW) Road Rules 2008 -- Reg 15 What is a vehicle
\lawcite{anyregverb}

\lcdcase{anyregverb}
%\begin{verbatim}
%@statute{anyregverb,
%citeref = {verbreg},
%regnum = {Road Rules 2008 -- \textcolor{red}{\textbf{Reg 15}} 
%What is a vehicle (New South Wales)},
%sorttitle = {Road Rules 2008},
%}
%
%\end{verbatim}

%\lccitedemostat{canregbc}
%\bigskip 

\subsection{Currently not covered}
\p The following instruments are not currently covered by \cmdc{lawcite}.

\begin{itemize}
\item Constitutions and Charters
   \begin{itemize}
   \item \setstatjurison\lawcite{canconst1982}
   \item \lawcite{canconst1867}
   \item \lawcite{cancharter}\setstatjurisoff
   \end{itemize}
\item Treaties, Agreements, and Accords
\item Bills
\item Parliamentary papers
\end{itemize}


%%\lawcite{samstata}
%%
%%\lawcite{samstatb}
%%
%%\lawcite{samstatc}



\section{Law Journals}

\p Some law review articles: \ljcite{ryder}; \ljcite{renaud}.

\p The @ljarticle bibentry type is for law journals and law reviews.
\lcdcase{kleefeld}
\p The information can be accessed with the following commands.
\begin{itemize}
\item\cmd{ljcite}: \ljcite[276]{kleefeld}

\item\cmd{ljfootcite}: Text\ljfootcite[276]{kleefeld}

\item\cmd{lcljauthor}: \lcljauthor{kleefeld}

\item\cmd{lcljauthorfn}: \lcljauthorfn{kleefeld}

\item\cmd{lcljtitle}: \lcljtitle{kleefeld}

\item\cmd{lcljyear}: \lcljyear{kleefeld}

\item\cmd{lcljjournaltitle}: \lcljjournaltitle{kleefeld}

\item\cmd{lcljvolume}: \lcljvolume{kleefeld}

\item\cmd{lcljpage}: \lcljpage{kleefeld}

\end{itemize}

\p `Ordinary' articles can be stored in the @article bibentry type: \begin{myquotation}\noindent\fullcite{a104}\end{myquotation}

\section{Legal Monographs}

\p Legal textbooks are stored in the @book bibentry type, with the keywood \cmdc{lawbook} to direct them into the relevant section of a bibliography.
\lcgetabibfield{lrcns}{keywords}

\p They may be cited with the normal citation commands (such as \cmd{cite}): \cite{lrcns}.

\p The \cmd{lcbook} command does a specialised footnote.\lcbook{lrcns}

\p Non-legal books do not have the keyword: \cite{litlaw}

\p For the customary treatise shorthand references of the \lcepigraph{candl} kind, see \pararef{aonb}.% section \ref{sec:epigrapha}.


\section{Quotations and Epigrapha}
\label{sec:epigrapha}
\qqcite{q5}

\bigskip
\p Quoted material can be stored as a bibentry (of type @quote):
\lcdcase{q5}

This allows use of cross-referencing and other biblatex features.

\p Available citation commands are:

\begin{itemize}\item \cmd{qcite} (quoted text, with attribution):\end{itemize} \begin{myquotation}\qcite{q5}\end{myquotation}
\begin{itemize}\item\cmd{qcitetext} (quoted text):\end{itemize} \begin{myquotation}\qcitetext{q5}\end{myquotation}
\begin{itemize}\item\cmd{qcitetextnoqq} (plain text, no quotes): \end{itemize}\begin{myquotation}\qcitetextnoqq{q5}\end{myquotation}
\begin{itemize}\item\cmd{qqcite} (formatted epigraph quote): \end{itemize}\begin{myquotation}\qqcite{q5}\end{myquotation}
\begin{itemize}\item\cmd{qqcitefn} (formatted epigraph quote with footnote mark, to be used in association with \cmd{footnotetext}):\end{itemize} \begin{myquotation}\qqcitefn{q5}\end{myquotation}\footnotetext{Some text.}

\p \cmd{qqcite} An example of a case-related epigraph: \begin{myquotation}\qqcite{q9}\end{myquotation}

\p \paradef{aonb} Authorial attribution can be formatted as the customary \textit{A on B} with \cmd{lcepigraphp}, for the possessive case: \lcepigraphp{anncrimnsw}.

\p And \cmd{lcepigraph}, with no possessive: \lcepigraph{addison}.

\p The bibentry fields used (if they exist) are:
\begin{itemize}
\item author (using family name(s) + on/'s)
\item shorttitle or title
\item edition
\item year
\end{itemize}
%``No real comparison exists between the interprovincial relationships of today and those obtaining between foreign countries in the 19th century.  The courts made a serious error in transposing the rules developed for the enforcement of foreign judgments to the enforcement of judgments from sister‑provinces.  The considerations underlying the rules of comity apply with much greater force between the units of a federal state.'' -- 
%Morguard headnote
%
%``there is really no comparison between the interprovincial relationships of today and those obtaining between foreign countries in the 19th century.  Indeed, in my view, there never was and the courts made a serious error in transposing the rules developed for the enforcement of foreign judgments to the enforcement of judgments from sister-provinces.  The considerations underlying the rules of comity apply with much greater force between the units of a federal state, and I do not think it much matters whether one calls these rules of comity or simply relies directly on the reasons of justice, necessity and convenience to which I have already adverted.  Whatever nomenclature is used, our courts have not hesitated to cooperate with courts of other provinces where necessary to meet the ends of justice; see Re Wismer and Javelin International Ltd. (1982), 1982 CanLII 3132 (ON SC), 136 D.L.R. (3d) 647 (Ont. H.C.), at pp. 654-55; Re Mulroney and Coates (1986), 1986 CanLII 2613 (ON SC), 27 D.L.R. (4th) 118 (Ont. H.C.), at pp. 128-29; Touche Ross Ltd. v. Sorrel Resources Ltd. (1987), 1987 CanLII 2693 (BC SC), 11 B.C.L.R. (2d) 184 (S.C.), at p. 189; Roglass Consultants Inc. v. Kennedy, Lock (1984), 1984 CanLII 421 (BC CA), 65 B.C.L.R. 393 (C.A.), at p. 394.'' -- Morguard

%\p Multiple citations: \democomm[Text]{lawcite}{clarke,tulk,cbc,vdn}{:}

%\lcdacasefield[parallel][]{tdi}

%\newpage
%\lcdallfields{westfahl:space}
%
%\lctestid{waters}
%\lcdcase{waters}
%\lcdallfields{waters}

\section{Ancillary Commands}
\p For style authors, various ancillary commands are available.
\subsection{Meta Commands}
\p Basic meta commands are: 
\begin{itemize}
\item \cmd{cmd} to add a backslash
\begin{itemize}
\item \cmd{cmd}\braces{xyz} $\mapsto$ \cmd{xyz}
\end{itemize}
\item \cmd{braces} to wrap something in braces
\begin{itemize}
\item \cmd{braces}\braces{xyz} $\mapsto$ \braces{xyz}
\end{itemize}
\item \cmd{brackets} to wrap something in brackets
\begin{itemize}
\item \cmd{brackets}\braces{xyz} $\mapsto$ \brackets{xyz}
\end{itemize}
\item overall use:
\begin{itemize}
\item \cmd{cmd}\braces{command}\cmd{brackets}\braces{option}\cmd{braces}\braces{code} $\mapsto$ \cmd{command}\brackets{option}\braces{code}
\end{itemize}
\end{itemize}

\newcommand\smitem[1]{\begin{itemize}%
\item \cmd{#1}\braces{xyz} $\mapsto$ \csname #1\endcsname{xyz}%
\end{itemize}}


\p Additional meta-commands:
\begin{itemize}
\item \cmd{bcmd}: same as \cmd{braces}
\begin{itemize}
\item \cmd{bcmd}\braces{xyz} $\mapsto$ \bcmd{xyz}
\end{itemize}
\item \cmd{cmdb}: backslash, current colour
\smitem{cmdb}
\item \cmd{cmdc}: blue, no backslash
\smitem{cmdc}
\item \cmd{mcmd}: \cmd{cmd} with braces, current colour 
\smitem{mcmd}
\item \cmd{bracketsb}: highlighted brackets
\smitem{bracketsb}
\item \cmd{parens}: in parentheses
\smitem{parens}
\item \cmd{disp}: display, with frame
\smitem{disp}
\item \cmd{dispb}: display as a block
\smitem{dispb}
\item \cmd{dispeg}: display, with \cmd{par}
\smitem{dispeg}
\end{itemize}

\subsection{Demo Mode}%\lccurrentstyle
\p Switch demo mode on and off with \cmd{lcsetdemoon} and \cmd{lcsetdemooff}, for highlighting citation components.

\lcsetdemoon
\begin{itemize}
\item \lcinline{snail}
\item \lcinlinerr{columbus, columbussr, columbusne}
\end{itemize}
\lcsetdemooff

\p \paradef{illus}Illustrations of cases, statutes and law journals may be made. When finished, change back to the main citation style (see \pararef{styleset}).

\begin{itemize}
\item Use \cmd{lccitedemo}\braces{key}\braces{pinpoint} to illustrate the various citestyles for a case citation.
\end{itemize}

\lccitedemo{snail}{563}

\begin{itemize}
\item Use \cmd{lccitedemorr}\braces{key} to illustrate the various citestyles for an \textit{-rr} case citation.
\end{itemize}

\lccitedemorr{columbus, columbussr, columbusne}


\begin{itemize}
\item Use \cmd{lccitedemostat}\braces{key} to illustrate the various citestyles for a statute citation.
\end{itemize}

\lccitedemostat{crimcan}

\lccitedemostat{crimcodecan}


\begin{itemize}
\item Use \cmd{lccitedemolj}\braces{key} to illustrate the various citestyles for a law journal citation.
\end{itemize}

\lccitedemolj{renaud}

\lccitedemolj{smythsc}
%Switch back to non-default settings:
\lcsetstylemcgill%\lccurrentstyle


\section{Bibentry Fields}
\subsection{@case}
\p Fields available for use in an @case bibentry are listed in the following:

\begin{description}
\item[attribution]source of quote, for quotetext entry
\item[casename]for in-progress case
\item[casenickname]the generally-known shorthand name for the case
\item[casenumber]medium-neutral citation case number
\item[caseshortname]user-assigned shorthand name for the case
\item[casestatus]for in-progress case
\item[caseyear]medium-neutral citation year
\item[courtcasenumber]for in-progress case
\item[courtdivision]for in-progress case
\item[courtfullname]for in-progress case
\item[courtjurisdiction]for in-progress case
\item[courtlist]for in-progress case
\item[courtname]medium-neutral citation courtname
\item[crossref]key of entry to inherit fields from
\item[decisionyear]year for the case name, if none of the reports identify the year
\item[icaseyear]the case year to appear in the table of cases
\item[linkname]text for the url
\item[mncurl]the MNC url
\item[note]note for the bibentry
\item[options]Biblatex processing options, e.g, skipbib=true
\item[pagination]setting for postnote (default is ‘p’, for ‘page’): e.g. bibstring ‘atparagraph’
\item[parallel]parallel reports, all as one string
\item[partya]the party bringing the action or cause, or the description of the cause
\item[partyajur]jurisdiction of partya, if applicable (e.g., NSW)
\item[partyasn]shortname for partya (e.g., DPP)
\item[partyb]the responding or defending party, if any
\item[partybjur]jurisdiction of partya, if applicable (e.g., NSW)
\item[partybsn]shortname for partyb (e.g., DPP)
\item[partysep]separator between party names (default: v)
\item[partysepx]
\item[reportpage]page that the reported cases starts on
\item[reportseries]name of the report series
\item[reportvolume]volume number of the report series
\item[reportyear]year of the report series
\item[shipname]name of the ship (admiralty cases)
\item[thumbnail]image file name
\item[url]url for a secondary link, the display text will come from linkname
\item[volyearneeded]true = the reportyear is needed to identify the report series volume
\end{description}

\p An MNC case would generally use these fields: {\ttfamily
partya, 
partyb, 
partysep (if not v), 
caseyear, 
courtname, 
casenumber}.

\p A paper-report case would use these fields: {\ttfamily
partya, 
partyb, 
partysep (if not v), 
reportyear, 
reportvolume, 
volyearneeded, 
reportseries, 
reportpage}. 

\p The `in-progress case' fields are defined in the data model but are not linked into any citation command yet: {\ttfamily
casename, 
courtdivision, 
courtlist, 
courtjurisdiction, 
courtcasenumber, 
courtfullname, 
casestatus}.

\subsection{@statute}%\lccurrentstyle
\p The @statute bibentry handles various types of data, depending on whether either or both of the \cmdc{citeref} and \cmdc{statutechapter} fields are present or not.

\p An @statute bib entry with the \cmdc{citeref} field set to \cmdc{canleg} produces this structure:

\begin{myquotation}
\lawcite{samplestat}
\end{myquotation}
so that an entry

\lcdcase{cancorp}
produces\footnote{Note that the dot \angles{.} in \angles{(Can.)} is marked as an abbreviation dot with \angles{\textbackslash @}, thus \angles{(Can.\textbackslash @)}, so that biblatex's puncuation tracker will add \angles{, c} to the output rather than start a new sentence with \angles{\ C}.}
\begin{myquotation}
\lawcite{cancorp}
\end{myquotation}
%\lcdcase{samplestat}
and a bib entry without the \cmdc{citeref} field produces this structure:

\begin{myquotation}
\lawcite{samplestat2}
\end{myquotation}
and so an entry

\lcdcase{cancorp2}
produces\footnote{This entry has \angles{(Can)} rather than \angles{(Can.)}.}
\begin{myquotation}
\lawcite{cancorp2}
\end{myquotation}

\p Again, this time from the Revised Statutes:
\begin{myquotation}
\noindent\lawcite{cca1970} {\footnotesize (non-citeref)}

\noindent\lawcite{cca1970b} {\footnotesize (citeref)}
\end{myquotation}

\p The postnote may be retrieved separately with \cmd{lcpostnote}, allowing for a variation in the flow of text, if required: \angles{\highLight{\lawcite[s 457(1)]{crimcode1970}}} versus \angles{\highLight{\lcpostnote[s 457(1)]{crimcode1970} of the \lawcite{crimcode1970}}}.

\p The @statute bibentry handles three types of data structure: with a \cmdc{statutechapter}; without a \cmdc{statutechapter}; with a \cmdc{citeref}.\footnote{The actual details of he typeset output will vary slightly, according to the style options and overrides in play.}

\p When \cmdc{statutechapter} is present and \cmdc{citeref} is not, the following structure is used:

\begin{myquotation}
\lawcite{samstata}
\end{myquotation}

\p When both \cmdc{statutechapter} and \cmdc{citeref} are not present, the following structure is used:

\begin{myquotation}
\lawcite{samstatb}
\end{myquotation}


\p When \cmdc{citeref} is present, the following structure is used (depending on the citeref value - see \pararef{cffields}):

\begin{myquotation}
\lawcite{samstatc}
\end{myquotation}

\p The available fields are listed in the following:

\begin{description}
\item[chapter]for the \cmdc{citeref} method, chapter of the statute or regulation
\item[citeref]for the \cmdc{citeref} method, specfies the formatting template of the statute or regulation
\item[fulldate]for the \cmdc{citeref} method, fulldate of the regulation (Qbc)
\item[gazette]for the \cmdc{citeref} method, gazette reference of the regulation (Qbc)
\item[regnum]for the \cmdc{citeref} method, regulation number of the statute or regulation
\item[statutechapter]chapter of the statute
\item[statutejurisdiction]jurisdiction of the statute
\item[statutelongtitle]
\item[statutenickname]
\item[statuteregnalyear]
\item[statuteshorttitle]used for the SVJY for Canadian statutes (i.e., when \cmdc{statutechapter} is defined)
\item[statutetitle]title of the statute
\item[statutetitleyear]year of the statute as part of the statute’s title
\item[statutevolume]
\item[statuteyear]year of the statute
\item[svjy]for the \cmdc{citeref} method, the SVJY  of the statute
\item[title]for the \cmdc{citeref} method, title of the statute or regulation
\item[year]for the \cmdc{citeref} method, year of the statute or regulation
\end{description}



\subsection{@ljarticle}
\p Available fields for the ljarticle bibentry type are listed in the following:

\begin{description}
\item[author]author(s) of the article
\item[crossref]cross-reference, the name of the entry to inherit fields from
\item[date]year of the journal
\item[journaltitle]title of the jourrnal
\item[linkname]text to display for the url
\item[mncname]medium-neutral citation of the journal name
\item[mncnumber]medium-neutral citation number of the article
\item[mncurl]the MNC’s url
\item[mncyear]medium-neutral citation year of the article
\item[options]list of processing options for the bibentry, e.g., skipbib=true
\item[pages]page number of the journal the article starts on
\item[pagination]what string or bibstring to display as prefix for a numeric postnote; default is p.
\item[shortname] 
\item[subtitle]subtitle of the article
\item[thumbnail]image filename
\item[title]title of the article
\item[url]url of the article
\item[volume]volume number of the journal
\end{description}

\p For law journals, the CanLII link may be stored as if it were an MNC, or not. In either case, the \cmdc{url} will be used as link.

\begin{myquotation}
\noindent\ljcite{otis}
\end{myquotation}
from

%\lcdcase{otis}

\colorbox{blue!12}{\begin{minipage}{\textwidth}\lcdcasehl[mncname][]{otis}\end{minipage}}

versus
\begin{myquotation}
\noindent\ljcite{tetley}
\end{myquotation}
from

%\lcdcase{tetley}
\colorbox{blue!12}{\begin{minipage}{\textwidth}\lcdcasehl[linkname][]{tetley}\end{minipage}}

\newpage
%\lccurrentstyle
\lcsetstylemcgill
\section{Examples}

\begin{myquotation}
A plea of guilty is not an
admission of any facts giving rise to the charge. It is
evidence only that that particular accused considers that he
ought to plead guilty to the charge preferred against him. A
plea of guilty \underWavy{in no way} proves any of the circumstances of the
crime. \highLight{Phipson on Evidence, 9th ed., page 19 points out that} a
plea of guilty only admits that the accused committed the
offence charged and does not admit the truth of any
depositions. See \highLight{Regina v. Riley (1896), 18 Cox, C.C. 285 at
p. 295 per Hawkins J}. \lawcite{berry}
\end{myquotation}

\renewcommand\postnotedelim{,\ }%
\lcaonbtitle{phipson9}, 
\lcaonbedition[page 19]{phipson9} 
\lcsetstylemcgill
points out that

\renewcommand\postnotedelim{,\ }%
\fbox{\lcaonbtitle{phipson9}}\fbox{, }
\fbox{\lcaonbedition[page 19]{phipson9}} 
\lcsetstylemcgill
\fbox{points out that}


\begin{magpar}
\begin{verbatim}
\renewcommand\postnotedelim{,\ }%
\lcaonbtitle{phipson9}, 
\lcaonbedition[page 19]{phipson9} 
\lcsetstylemcgill
points out that
\end{verbatim}
\end{magpar}


\bigskip
\lcinline[See][at p 295 per Hawkins J]{riley}


%\colorbox{blue}{%
%\begin{minipage}{0.8\textwidth}%
\begin{magpar}
\begin{verbatim}
\lcinline[See][at p 295 per Hawkins J]{riley}
\end{verbatim}
\end{magpar}
%\end{minipage}}

%It would plainly appear from the facts that I have thus far enumerated and other facts to which I will refer in a moment that 
%
% The theory of the Crown

\newpage
\begin{myquotation}
The ability to cross-examine a witness as to the basis for his opinion and the factors which he has taken into account and those which he has omitted can be relevant, pertinent and indeed vital to testing  that opinion: see, for example, \highLight{\textit{ R. v. Rosik} (1970), 2 C.C.C. (2d) 351, [1971] 2 O.R. 47, 13 Crim. L.Q. 224 (Ont. C.A.) (appeal to the Supreme Court of Canada dismissed 2 C.C.C. (2d) 393\textit{n}, [1971] 2 O.R. 89\textit{n}, [1971] S.C.R. vi), and \textit{R. v. Abbey} (1982), 68 C.C.C. (2d) 394, 138 D.LR. (3d) 202, [1982] 2 S.C.R. 24 (S.C.C.).}\lawcite[559-560]{howard}
\end{myquotation}


\lcinline{rosik}
(appeal to the Supreme Court of Canada dismissed 
\lawciteref{rosikappeal}),
and
\lcinline{abbey}.

\begin{magpar}
\begin{verbatim}
\lcinline{rosik}
(appeal to the Supreme Court of Canada dismissed 
\lawciteref{rosikappeal}),
and
\lcinline{abbey}.
\end{verbatim}
\end{magpar}
\begin{casenote}{\lcshorttitle{rosik}}
In \textit{Rosik}, a psychiatrist testified, relaying the contents of a conversation with the accused. This does not prove that what the accused said was true. The accused did not testify. Cross-examination tests the veracity of what a person says, and their credibility. 
\end{casenote}
\begin{casequote}{\lcshorttitle{abbey}}
A general principle of evidence is that all relevant evidence is admissible. The law of evidence, however, reposes on a few general principles riddled by innumerable exceptions. Two major exceptions to this general principle are hearsay evidence and opinion evidence. There are also exceptions to the exceptions. 
\end{casequote}


\begin{casequote}{\lcshorttitle{abbey}}
The main concern of the hearsay rule is the veracity of the statements made. The principal justification for the exclusion of hearsay evidence is the abhorrence of the common law to proof which is unsworn and has not been subjected to the trial by fire of cross-examination. Testimony under oath, and cross-examination, have been considered to be the best assurances of the truth of the statements of facts presented. Not all statements by a witness of that which he heard someone else say are, however, necessarily hearsay.
\end{casequote}

\newpage
\begin{myquotation}\noindent
As Woods J.A. said in \highLight{R. v. Perras (1972), 1972 CanLII 868 (SK CA), 8 C.C.C. (2d) 209, at p. 213}, ``The evidence of a physician stating what a patient told him about his symptoms is \hlybox{not} evidence as to the existence of the symptoms. To accept it as such would be to infringe the rule against hearsay."\lawcite[45-46]{abbey}
\end{myquotation}

\lcinline[213]{perras}

\begin{magpar}
\begin{verbatim}
\lcinline{perras}
\end{verbatim}
\end{magpar}

\ycite[213]{perras}

\begin{magpar}
\begin{verbatim}
\ycite[213]{perras}
\end{verbatim}
\end{magpar}

from

\lcdcasehl[yoptions][]{perras}

\p The \cmd{ycite} citation command reads the bibentry's \cmdc{yoptions} field of comma-separated meta-fields through a \textit{for}-loop, and so is somewhat static; the \cmd{lcycite} is more dynamic and reads the meta-field list from the \cmdc{prenote} field, and the citation can be differently structured each time.

\p For an actual prenote, key it in manually.

\bigskip
See \lcycite[:getcasename,comma,space,:getcaseurl,comma,space,:getcaseref][213]{perras}
\begin{magpar}
\begin{verbatim}
See \lcycite[:getcasename, comma, space, 
:getcaseurl, comma, space, 
:getcaseref][213]{perras}
\end{verbatim}
\end{magpar}

\bigskip
\lcycite[:getcaseurl, endash,
:getcasename, endash][213]{perras}
\begin{magpar}
\begin{verbatim}
\lcycite[:getcaseurl, endash, 
:getcasename, endash][213]{perras}
\end{verbatim}
\end{magpar}

\section{yoptions Metafields}
\p Metafields for user-defined citation formatting can be used on a per-entry basis in the \cmdc{yoptions} bibfield, or  on a per-citation basis in the \cmdc{prenote} field of the \cmd{lcycite} citation command.

\p This section lists the metafields available for use.

%------------
\subsection{A-on-B Metafields}
\boxsdfg{:getaonbedition}\lcycite[:getaonbedition][]{phipson9}\par
\boxsdfg{:getaonbtitle}\lcycite[:getaonbtitle][]{phipson9}\par
\boxsdfg{:getedition}\lcycite[:getedition][]{phipson9}\par
\boxsdfg{:geteditionyear}\lcycite[:geteditionyear][]{phipson9}\par
\boxsdfg{:getlastnames}\lcycite[:getlastnames][]{phipson9}\par
\boxsdfg{:getshorttitle}\lcycite[:getshorttitle][]{phipson9}\par
\boxsdfg{:gettitle}\lcycite[:gettitle][]{phipson9}\par



%------------
\subsection{Case Metafields}
\boxsdfg{:getcasename}\lcycite[:getcasename][]{snail}\par
\boxsdfg{:getcasenamefull}\lcycite[:getcasenamefull][]{snail}\par
\boxsdfg{:getcasenameref}\lcycite[:getcasenameref][]{snail}\par
\boxsdfg{:getcasenamereffull}\lcycite[:getcasenamereffull][]{snail}\par
\boxsdfg{:getcasenamerefnofn}\lcycite[:getcasenamerefnofn][]{snail}\par
\boxsdfg{:getcasenickname}\lcycite[:getcasenickname][]{snail}\par
\boxsdfg{:getcasenumber}\lcycite[:getcasenumber][]{snail}\par
\boxsdfg{:getcaseref}\lcycite[:getcaseref][]{snail}\par
\boxsdfg{:getcaseshortname}\lcycite[:getcaseshortname][]{snail}\par
\boxsdfg{:getcasesn}\lcycite[:getcasesn][]{snail}\par
\boxsdfg{:getcaseurl}\lcycite[:getcaseurl][]{snail}\par
\boxsdfg{:getcaseyear}\lcycite[:getcaseyear][]{snail}\par
\boxsdfg{:getcourtname}\lcycite[:getcourtname][]{snail}\par
\boxsdfg{:getibid}\lcycite[:getibid][]{snail}\par
\boxsdfg{:getibidsupra}\lcycite[:getibidsupra][]{snail}\par
\boxsdfg{:getibidsupranote}\lcycite[:getibidsupranote][]{snail}\par
\boxsdfg{:getparallelreports}\lcycite[:getparallelreports][]{snail}\par
\boxsdfg{:getpartynamesa}\lcycite[:getpartynamesa][]{snail}\par
\boxsdfg{:getpartynamesb}\lcycite[:getpartynamesb][]{snail}\par
\boxsdfg{:getpartysep}\lcycite[:getpartysep][]{snail}\par
\boxsdfg{:getreportpage}\lcycite[:getreportpage][]{snail}\par
\boxsdfg{:getreportref}\lcycite[:getreportref][]{snail}\par
\boxsdfg{:getreportseries}\lcycite[:getreportseries][]{snail}\par
\boxsdfg{:getreportvolume}\lcycite[:getreportvolume][]{snail}\par
\boxsdfg{:getreportyear}\lcycite[:getreportyear][]{snail}\par



%------------
\subsection{In-Progress Case Metafields}
\boxsdfg{:getcaseproc}\par
\boxsdfg{:getproc}\par



%------------
\subsection{Lawcite-lite Metafields}
\boxsdfg{:lclgetlegalfull}\par
\boxsdfg{:lclgetlegalref}\par
\boxsdfg{:lclgetlegalrefstat}\par
\boxsdfg{:lclgetlegalrefcase}\par
\boxsdfg{:lclgetlegaltitle}\par



%------------
\subsection{Law Journal Metafields}
\renewcommand\lcdemolabelw{7cm}

\boxsdfg{:getljarticle}\lcycite[:getljarticle][]{kirbyalr}\par
\boxsdfg{:getljarticle:ibid}\lcycite[:getljarticle:ibid][]{kirbyalr}\par
\boxsdfg{:getljarticleauthor}\lcycite[:getljarticleauthor][]{kirbyalr}\par
\boxsdfg{:getljarticleauthorsc}\lcycite[:getljarticleauthorsc][]{kirbyalr}\par
\boxsdfg{:getljarticlejournaltitle}\lcycite[:getljarticlejournaltitle][]{kirbyalr}\par
\boxsdfg{:getljarticlepage}\lcycite[:getljarticlepage][]{kirbyalr}\par
\boxsdfg{:getljarticlequotes}\lcycite[:getljarticlequotes][]{kirbyalr}\par
\boxsdfg{:getljarticletitle}\lcycite[:getljarticletitle][]{kirbyalr}\par
\boxsdfg{:getljarticleurl}\lcycite[:getljarticleurl][]{kirbyalr}\par
\boxsdfg{:getljarticlevolume}\lcycite[:getljarticlevolume][]{kirbyalr}\par
\boxsdfg{:getljarticleyear}\lcycite[:getljarticleyear][]{kirbyalr}\par
\boxsdfg{:getljarticleyear:plain}\lcycite[:getljarticleyear:plain][]{kirbyalr}\par
\boxsdfg{:getljartshortname}\lcycite[:getljartshortname][]{kirbyalr}\par


%------------
\subsection{Legislation Metafields}
\boxsdfg{:getcanleg}\lcycite[:getcanleg][]{maanulth}\par
\boxsdfg{:getcanreg}\lcycite[:getcanreg][]{maanulth}\par
\boxsdfg{:getcanreg2}\lcycite[:getcanreg2][]{maanulth}\par
\boxsdfg{:getchapter}\lcycite[:getchapter][]{maanulth}\par
\boxsdfg{:getciteref}\lcycite[:getciteref][]{maanulth}\par
\boxsdfg{:getstatutechapter}\lcycite[:getstatutechapter][]{maanulth}\par
\boxsdfg{:getstatutejurisdiction}\lcycite[:getstatutejurisdiction][]{maanulth}\par
\boxsdfg{:getstatutelongtitle}\lcycite[:getstatutelongtitle][]{maanulth}\par
\boxsdfg{:getstatutename}\lcycite[:getstatutename][]{maanulth}\par
\boxsdfg{:getstatutenameref}\lcycite[:getstatutenameref][]{maanulth}\par
\boxsdfg{:getstatutenickname}\lcycite[:getstatutenickname][]{maanulth}\par
\boxsdfg{:getstatuteregnalyear}\lcycite[:getstatuteregnalyear][]{maanulth}\par
\boxsdfg{:getstatuteshorttitle}\lcycite[:getstatuteshorttitle][]{maanulth}\par
\boxsdfg{:getstatutetitle}\lcycite[:getstatutetitle][]{maanulth}\par
\boxsdfg{:getstatutetitleyear}\lcycite[:getstatutetitleyear][]{maanulth}\par
\boxsdfg{:getstatutevolume}\lcycite[:getstatutevolume][]{maanulth}\par
\boxsdfg{:getstatuteyear}\lcycite[:getstatuteyear][]{maanulth}\par
\boxsdfg{:getsvjy}\lcycite[:getsvjy][]{maanulth}\par
\boxsdfg{:gettitle}\lcycite[:gettitle][]{maanulth}\par




%------------
\subsection{Quote Metafields}
\boxsdfg{:getlcepigraph}\lcycite[:getlcepigraph][]{q10}\par
\boxsdfg{:getlcepigraphp}\lcycite[:getlcepigraphp][]{q10}\par
\boxsdfg{:qqcitebox}\lcycite[:qqcitebox][]{q10}\par
\boxsdfg{:quotebox}\lcycite[:quotebox][]{q10}\par

%\qqcite{q10}

\lcdcase{q10}

Bibentry \cmdc{q10} does a cross-reference to the case's bibentry, to bring in the case details: \cmdc{crossref =  \{kelly\}, options=\{ skipbib=true\},}.

%%%------------
%%\subsection{Bib Metafields}
%%\boxsdfg{:getlcdacasefield}\lcycite[:getlcdacasefield][]{casetestb}\par
%%\boxsdfg{:getlcdallfields}\lcycite[:getlcdallfields][]{casetestb}\par
%%\boxsdfg{:getlcdcase}\lcycite[:getlcdcase][]{casetestb}\par
%%\boxsdfg{:getlcdcasehl}\lcycite[:getlcdcasehl][]{casetestb}\par
%%\boxsdfg{:getnote}\lcycite[:getnote][]{casetestb}\par
%%\boxsdfg{:getnote:noparens}\lcycite[:getnote:noparens][]{casetestb}\par
%%\boxsdfg{:getnote:plain}\lcycite[:getnote:plain][]{casetestb}\par
%%\boxsdfg{:mnc:postnote}\lcycite[:mnc:postnote][]{casetestb}\par
%%\boxsdfg{:nocomma:postnote}\lcycite[:nocomma:postnote][]{casetestb}\par
%%\boxsdfg{:notmnc:postnote}\lcycite[:notmnc:postnote][]{casetestb}\par
%%\boxsdfg{:delim:choice}\lcycite[:delim:choice][]{casetestb}\par





%\begin{adjustbox}{minipage=200pt,margin=10pt,bgcolor=blue!25,frame,center,margin=0pt \medskipamount}
%    \centering\sffamily
%{\LARGE Norvig's Law
%\par\medskip}
%\normalsize
%Any technology that surpasses 50\% penetration\\
%will \textbf{never} double again\\
%(in any number of months)
%\end{adjustbox}


%------------
\subsection{Spacing and Punctuation Metafields}
\p Available spacing and punctuation metafields are:
{ itcolon } 
{ isubtitle } 
{ subtitle } 
{ emdash } 
{ endash } 
{ dot } 
{ comma } 
{ colon } 
{ space } 
{ lparen } 
{ rparen } 
{ lbrace } 
{ rbrace } 

\subsection{Generic Metafields}
\p Available generic metafields are:
{ name } 
{ title } 
{ edition } 
{ location } 
{ publisher } 
{ year } 
{ volume } 
{ note } 

%------------
\section{Annotations}
\p Annotations can be added on a per-entry basis via a bibentry field or via an external file. The annotation feature is built into the Biblatex style. Lawcite adds a further two: \cmdc{noterup}, and \cmdc{commentary}. \cmdc{qquotation} is intended for extensive quotation in citations.

\p For performance reasons, use the external file method when there are large volumes of text(s).

\p Requires \cmdc{loadfiles=true} Biblatex package option.
\toggletrue{useannotation}
\toggletrue{usenoterup}
\toggletrue{usecommentary}
\toggletrue{useqquotation}
\begin{verbatim}
\toggletrue{useannotation}
\toggletrue{usenoterup}
\toggletrue{usecommentary}
\toggletrue{useqquotation}
\end{verbatim}

\begin{myquotation}
	
\noindent
\lcinline{testanc1}

\noindent\lcinline{testanc2}
\end{myquotation}

\p The filename prefix can be changed by doing \cmd{renewcommand}\braces{X}\braces{\ldots}, where X is one of:

\begin{myquotation}
\noindent\cmd{bibannotationprefix},\par
\noindent \cmd{bibnoterupprefix}, \par 
\noindent \cmd{bibcommentaryprefix}, \par
\noindent or \cmd{bibqquotationprefix}. 
\end{myquotation}


% Exclude the annotations from the bibliography:
\togglefalse{useannotation}
\togglefalse{usenoterup}
\togglefalse{usecommentary}
%\togglefalse{useqquotation} % already excluded

\section{Text Highlighting}
\p For those interested, text highlighting in this document has been done by the following.

\p highlighting -- the \cmd{highLight} command, \highLight{this is highlighted}, from the luacolor and lua-ul packages.

\p underwave -- the \cmd{underWavy} command, \underWavy{this is underWavy}, a custom command based on the same packages (code from TeX.SE).

\p enclosed text -- the \cmd{hlybox} command, \hlybox{sample text}, a TikZ-based command (code from TeX.SE).

\p magnification-glass environment -- the \cmdc{magpar} environment, using tcolorbox package.
\begin{magpar}
This is a magpar environment.
\end{magpar}

\begin{verbatim}
\begin{magpar}
This is a magpar environment.
\end{magpar}
\end{verbatim}

\p \cmdc{casenote} environment -- takes case name as a parameter, to become the title of the environment.

\begin{casenote}{A Parameter}
This is a casenote environment.
\end{casenote}

\begin{verbatim}
\begin{casenote}{A Parameter}
This is a casenote environment.
\end{casenote}
\end{verbatim}

\p \cmdc{casequote} environment -- takes a text string as a parameter, to become the title of the environment.

\begin{casequote}{A Parameter}
This is a casequote environment.
\end{casequote}

\begin{verbatim}
\begin{casequote}{A Parameter}
This is a casequote environment.
\end{casequote}
\end{verbatim}

%\section{Options and Switches}




%======================================= Bibliography
%%%\citetrackerfalse
%%\newpage
%%{\center
%%\printbibheading[title=Bibliography]
%%}
%%%------------------------------- Legislation
%%\newrefcontext[sorting=statsort]
%%\printbibliography[
%%title=\center Legislation,
%%heading=subbibliography,%
%%type=statute,
%%]
%%%------------------------------- Cases
%%\newrefcontext[sorting=casesort]
%%\printbibliography[
%%title=\center Jurisprudence,
%%heading=subbibliography,%
%%type=case,
%%notcategory=nobib,
%%%notkeyword=nobib,
%%]
%%%------------------------------- Monographs
%%\newrefcontext[sorting=nty]
%%\printbibliography[
%%heading=subbibliography,%
%%%nottype=case,
%%%nottype=statute,
%%%nottype=article,
%%%nottype=ljarticle,
%%keyword=lawbook,
%%title={\center Secondary Materials: Monographs},
%%%postnote={bibcolophon},
%%]
%%%------------------------------- Legal Articles, Law Reviews
%%\newrefcontext[sorting=nty]
%%\printbibliography[
%%heading=subbibliography,%
%%title={\center Secondary Materials: Articles},
%%type=ljarticle,
%%]
%%%postnote={bibcolophon},
%%
%%%-------------------------------------
%%\bigskip
%%\hfill\rulesep\hfill\ %\hrule
%%\bigskip
%%%
%%%------------------------------- General Material
%%\printbibliography[
%%heading=subbibliography,%
%%nottype=case,
%%nottype=statute,
%%nottype=ljarticle,
%%nottype=quote,
%%notkeyword=lawbook,
%%title={\center General Material},
%%]
%%%\citetrackertrue
\printbibliographymcgill

\p Some sundry commands.

\p \cmd{lcrollcall*}

\lcrollcall*{
colchester;a comment
,araujo;another comment
,coldwater;some more comment
}


\cmd{lcrollcall}

\lcrollcall{
colchester;\textbf{formatted} text
,araujo;\textit{formatted} text
,coldwater;\textbf{a note}
}


\p \cmd{lccatena}\paradef{:lccatena}

\lccatena{%
cargill;aff'd
,cargill2;rev’d on other grounds\lccomma
,cargill3;
}.

\lccatena{%
douez;rev’d but not on this point
,douez2;rev’d but not on this point
,douez3;subsequent appeal from the BCSC judgment rev’d in part but not on this point
,douez4;leave to appeal ref’d
,douez5;
}



\begin{casequote}{\lcshorttitle{chow}}
\qcitetextnoqq{q119} in \lcinline[1]{chow}.
\end{casequote}

\qqcite[1]{q119}

\p \cmd{lcqquotation} for extensive quotation (e.g., excerpt for a casebook), here visually set off wih an mdframed environment:\footnote{The wrapper command is \cmd{lcqquotationmdf}.}

%\begin{mdframed}
\lcqquotationmdf{q120}
%\end{mdframed}

\p The bibentry is basically just a nexus:

\bigskip
\begin{verbatim}
@quote{q120,crossref = {vww},options={skip-bib=true},}
\end{verbatim}

\bigskip
with the crossref pulling in the legal citation, and the citation command pulling in text and latex code from the corresponding file, \cmdc{bibqquotation-q120.tex}. Use \cmd{nocite}\braces{vww} to process the crossref case as an entry in its own right into the Table of Cases and Bibliography if it is not directly cited elsewhere.\nocite{vww}

\p For inline code listings, use:

{
\begin{Example}[formatcom=\color{blue}]
\bigskip
\begin{mdframed}[backgroundcolor=green!40!yellow!12]
\begin{Verbatim}[numbers=left,numbersep=2pt]
\AtWriteToIndex{cases}{\let\thepage\theparno}
\AtWriteToIndex{legislation}{\let\thepage\theparno}
\AtWriteToIndex{regulations}{\let\thepage\theparno}
\end{Verbatim}


\end{mdframed}

\end{Example}
}
%to produce:
%
%\bigskip
%\begin{mdframed}[backgroundcolor=green!40!yellow!12]
%\begin{Verbatim}[numbers=left,numbersep=2pt]
%\AtWriteToIndex{cases}{\let\thepage\theparno}
%\AtWriteToIndex{legislation}{\let\thepage\theparno}
%\AtWriteToIndex{regulations}{\let\thepage\theparno}
%\end{Verbatim}
%
%\end{mdframed}





\end{document}

   In a valiant but ultimately futile effort to bring proportionality to this action, I heard what I had hoped would be an attenuated refusals motion in which the parties might focus on what was truly needed to get the case to trial. It is apparent that the parties have much more on their respective plates than just this one piece of litigation. So their positions are driven by far wider considerations. Unless or until the court determines that the parties have consumed more than their fair share of scarce public resources, their battles appear to be destined to continue as unrelenting as the 500 year war between Eminiar VII and Vendikar.
   [1]
    “A Taste of Armageddon,” Star Trek, Season 1, Episode 23, NBC, February 23, 1967.
    
    Apotex Inc. v Eli Lilly and Company, 2017 ONSC 7204 (CanLII), <https://canlii.ca/t/hp39f>
    
    